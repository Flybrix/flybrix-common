!function(){"use strict";angular.module("flybrixCommon",[])}(),function(){"use strict";function e(i,a){return{magnetometer:function(){return i("Calibrating magnetometer bias"),a.sendStructure("Command",{request_response:!0,set_calibration:{enabled:!0,mode:0}},!1)},accelerometer:{flat:e.bind(null,"flat",0),forward:e.bind(null,"lean forward",1),back:e.bind(null,"lean back",2),right:e.bind(null,"lean right",3),left:e.bind(null,"lean left",4)},finish:function(){return i("Finishing calibration"),a.sendStructure("Command",{request_response:!0,set_calibration:{enabled:!1,mode:0}},!1)}};function e(e,t){return i("Calibrating gravity for pose: "+e),a.sendStructure("Command",{request_response:!0,set_calibration:{enabled:!0,mode:t+1}},!1)}}angular.module("flybrixCommon").factory("calibration",e),e.$inject=["commandLog","serial"]}(),function(){"use strict";function e(e){void 0===e&&(e=2e3),this.N=e,this.buffer=new Uint8Array(e),this.ready_for_new_message=!0,this.buffer_length=0}function _(e){for(var t=0,i=0,a=0,r=!1;e.buffer[t];)a?(--a,e.buffer[i++]=e.buffer[t++]):(r&&(e.buffer[i++]=0),r=(a=e.buffer[t++]-1)<254);return a?0:i}function t(e){for(var t=new Uint8Array(Math.floor((255*e.byteLength+761)/254)),i=1,a=0,r=0;r<e.length;++r){254==t[a]&&(t[a]=255,t[a=i++]=0);var o=e[r];++t[a],o?t[i++]=o:t[a=i++]=0}return t.subarray(0,i).slice().buffer}angular.module("flybrixCommon").factory("cobs",function(){return{Reader:e,encode:t}}),e.prototype.readBytes=function(e,t,i){for(var a=0;a<e.length;a++){var r=e[a];if(this.ready_for_new_message&&(this.ready_for_new_message=!1,this.buffer_length=0),this.buffer[this.buffer_length++]=r)this.buffer_length===this.N&&(i("overflow","buffer overflow in COBS decoding"),this.ready_for_new_message=!0);else{this.buffer_length=_(this);var o,n=0===this.buffer_length;for(n&&(this.buffer[0]=1),o=1;o<this.buffer_length;++o)this.buffer[0]^=this.buffer[o];if(0===this.buffer[0])this.ready_for_new_message=!0,0<this.buffer_length?t(this.buffer.slice(1,this.buffer_length)):i("short","Too short packet");else{this.ready_for_new_message=!0;var s="",d="";for(o=0;o<this.buffer_length;o++)s+=this.buffer[o]+",",d+=String.fromCharCode(this.buffer[o]);if(n)i("frame","Unexpected ending of packet");else i("checksum","BAD CHECKSUM ("+this.buffer_length+" bytes)"+s+d)}}}}}(),function(){"use strict";function e(e){var t=[],i=e.defer(),a=r;return a.log=r,a.clearSubscribers=function(){i=e.defer()},a.onMessage=function(e){return i.promise.then(void 0,void 0,e)},a.read=o,a;function r(e){void 0!==e&&(t.push(e),i.notify(o()))}function o(){return t}}angular.module("flybrixCommon").factory("commandLog",e),e.$inject=["$q"]}(),function(){"use strict";function e(n,i,s,a){var d,r=function(){i("No callback defined for receiving configurations!")},o=function(){i("No callback defined for receiving logging state! Callback arguments: (isLogging, isLocked, delay)")};function _(){var e=s.serializationHandler();return i("Requesting current configuration data..."),n.sendStructure("Command",{request_response:!0,req_partial_eeprom_data:e.ConfigurationFlag.empty()},!1)}function t(e){var t=s.serializationHandler(),i=e.mask||t.ConfigurationFlag.empty(),a=e.config||d,r=e.requestUpdate||!1,o={request_response:!0};return e.temporary?(o.set_partial_temporary_config=a,i={set_partial_temporary_config:{MASK:i}}):(o.set_partial_eeprom_data=a,i={set_partial_eeprom_data:{MASK:i}}),n.sendStructure("Command",o,!0,i).then(function(){r&&_()})}function u(e){var t=[(d=a.updateFields(d,e)).version.major,d.version.minor,d.version.patch];s.set(t),s.supported()?(i("Received configuration data (v"+t[0]+"."+t[1]+"."+t[2]+")"),r()):(i("Received an unsupported configuration!"),i("Found version: "+t[0]+"."+t[1]+"."+t[2]+" --- Newest version: "+s.desiredKey()))}return n.addOnReceiveCallback(function(e,t){if("Command"===e&&("set_eeprom_data"in t&&u(t.set_eeprom_data),"set_partial_eeprom_data"in t&&u(t.set_partial_eeprom_data),"set_card_recording_state"in t&&"set_sd_write_delay"in t)){var i=t.set_card_recording_state,a=t.set_sd_write_delay;o(i.record_to_card,i.lock_recording_state,a)}}),d=s.serializationHandler().Configuration.empty(),{request:_,reinit:function(){return i("Setting factory default configuration data..."),n.sendStructure("Command",{request_response:!0,reinit_eeprom_data:!0},!1).then(function(){return _()},function(e){i("Request for factory reset failed: "+e)})},send:function(e){return t({config:e,temporary:!1,requestUpdate:!0})},sendConfig:t,getConfig:function(){return d},setConfigCallback:function(e){r=e},setLoggingCallback:function(e){o=e},getDesiredVersion:function(){return s.desired()}}}angular.module("flybrixCommon").factory("deviceConfig",e),e.$inject=["serial","commandLog","firmwareVersion","serializationHandler"]}(),function(){"use strict";function e(t){var i=[0,0,0],a="0.0.0",e={"1.4.0":!0,"1.5.0":!0,"1.5.1":!0,"1.6.0":!0},r=[1,6,0],o="1.6.0",n=t.getHandler(o),s=n;return{set:function(e){a=(i=e).join("."),s=t.getHandler(o)||n},get:function(){return i},key:function(){return a},supported:function(){return!0===e[a]},desired:function(){return r},desiredKey:function(){return o},serializationHandler:function(){return s}}}angular.module("flybrixCommon").factory("firmwareVersion",e),e.$inject=["serializationHandler"]}(),function(){"use strict";function e(s,d){var r={NO_OVERRIDE:0,FLASH:1,BEACON:2,BREATHE:3,ALTERNATE:4,SOLID:5},_=["right_front","right_back","left_front","left_back"],u={};_.forEach(function(e){u[e]={red:0,green:0,blue:0}});var l={status:65535,pattern:r.SOLID,colors:u,indicator_red:!1,indicator_green:!1},m={led_states:[l]};function o(e,t,i,a,r,o,n){l.status=d.serializationHandler().StatusFlag.empty(),0<r&&r<6&&(l.pattern=r),[e,t,i,a].forEach(function(e,t){if(e){var i=u[_[t]];i.red=e.red,i.green=e.green,i.blue=e.blue}}),void 0!==o&&(l.indicator_red=o),void 0!==n&&(l.indicator_green=n),s.sendConfig({config:m,temporary:!0})}return{set:o,setSimple:function(e,t,i){var a={red:e||0,green:t||0,blue:i||0};o(a,a,a,a,r.SOLID)},patterns:r}}angular.module("flybrixCommon").factory("led",e),e.$inject=["deviceConfig","firmwareVersion"]}(),function(){"use strict";function e(i){var e={LOW:0,MID:1,HIGH:2},a=["low","mid","high"],r=-1,o=0,n=0,s=0,d=e.HIGH,_=e.HIGH,u=!0;return{setThrottle:function(e){r=e},setPitch:function(e){o=e},setRoll:function(e){n=e},setYaw:function(e){s=e},setAux1:function(e){d=Math.max(0,Math.min(2,e))},setAux2:function(e){_=Math.max(0,Math.min(2,e))},getThrottle:function(){return r},getPitch:function(){return o},getRoll:function(){return n},getYaw:function(){return s},getAux1:function(){return d},getAux2:function(){return _},AUX:e,send:function(){if(!u&&i.busy())return;u=!1;var e={};e.throttle=l(4095*(r- -.8)/1.8,0,4095),e.pitch=l(4095*-m(o,.1)/2,-2047,2047),e.roll=l(4095*m(n,.1)/2,-2047,2047),e.yaw=l(4095*-m(s,.1)/2,-2047,2047);var t={};return t["aux1_"+a[d]]=!0,t["aux2_"+a[_]]=!0,i.sendStructure("Command",{request_response:!0,set_serial_rc:{enabled:!0,command:e,aux_mask:t}},!1)},forceNextSend:function(){u=!0}};function l(e,t,i){return Math.max(t,Math.min(e,i))}function m(e,t){return t<e?e-t:e<-t?e+t:0}}angular.module("flybrixCommon").factory("rcData",e),e.$inject=["serial"]}(),function(){"use strict";function e(f,v,p,g,b,h){var y={State:0,Command:1,DebugString:3,HistoryData:4,Protocol:128,Response:255},S=[],D=new e,o=[],t=new p.Reader(1e4),i=void 0;function e(){}e.prototype.busy=function(){return!1},e.prototype.send=function(e){g('No "send" defined for serial backend')},e.prototype.onRead=function(e){g('No "onRead" defined for serial backend')};var n,s=[];return Object.keys(y).forEach(function(e){s[y[e]]=e}),_(function(e,t){if("Response"===e)!function(e,t){for(;0<S.length;){var i=S.shift();if(!(i.mask^e)){var a=e;if((a&=-2)^t){i.response.reject("Request was not fully processed");break}i.response.resolve();break}i.response.reject("Missing ACK")}}(t.mask,t.ack);else if("Protocol"===e){var i=t.response;i&&h.addHandler(i.version,i.structure)}}),{busy:function(){return D.busy()},sendStructure:a,setBackend:function(e){(D=e).onRead=r},addOnReceiveCallback:_,removeOnReceiveCallback:function(t){o=o.filter(function(e){return e!==t})},setBytesHandler:function(e){i=e},handlePostConnect:function(){return a("Command",{request_response:!0,req_partial_eeprom_data:{version:!0}})},Backend:e};function a(e,t,i,a){"State"===e&&(t=function(e){"temperature"in(e=Object.assign({},e))&&(e.temperature*=100);"pressure"in e&&(e.pressure*=256);return e}(t));var r=b.serializationHandler(),o=v.defer();if(!(e in y))return o.reject('Message type "'+e+'" not supported by app, supported message types are:'+Object.keys(y).join(", ")),o.promise;if(!(e in r))return o.reject('Message type "'+e+'" not supported by firmware, supported message types are:'+Object.keys(r).join(", ")),o.promise;var n=y[e],s=r[e],d=new Uint8Array(s.byteCount),_=new h.Serializer(new DataView(d.buffer));s.encode(_,t,a);var u=s.maskArray(t,a);u.length<5&&(u=u[0]<<0|u[1]<<8|u[2]<<16|u[3]<<24);var l=_.index,m=new Uint8Array(l+3);m[0]=m[1]=n;for(var c=0;c<l;++c)m[0]^=m[c+2]=d[c];return m[l+2]=0,S.push({mask:u,response:o}),f(function(){D.send(new Uint8Array(p.encode(m)))},0),i&&g("Sending command "+n),o.promise}function r(e){i?i(e,u):t.readBytes(e,u,d)}function d(e,t){g("COBS decoding failed ("+e+"): "+t)}function _(e){o=o.concat([e])}function u(e){var t=s[e[0]],i=b.serializationHandler()[t];if(t&&i){try{var a=new h.Serializer(new DataView(e.buffer,1)),r=i.decode(a)}catch(e){g("Unrecognized message format received")}"State"===t&&(r=function(e){e=Object.assign({},e);"timestamp_us"in e&&(e.serial_update_rate_estimate=1e6/(e.timestamp_us-n),n=e.timestamp_us);"temperature"in e&&(e.temperature/=100);"pressure"in e&&(e.pressure/=256);return e}(r)),o.forEach(function(e){e(t,r)})}else g("Illegal message type passed from firmware")}}angular.module("flybrixCommon").factory("serial",e),e.$inject=["$timeout","$q","cobs","commandLog","firmwareVersion","serializationHandler"]}(),function(){"use strict";function e(){var a={};function o(e,t){return t instanceof Array?function(e,t){for(var i=Math.max(e.length,t.length),a=[],r=0;r<i;++r)a.push(o(e[r],t[r]));return a}(e,t):t instanceof Object?(i=e,a=t,r={},Object.keys(i).forEach(function(e){r[e]=o(i[e],a[e])}),Object.keys(a).forEach(function(e){e in r||(r[e]=o(i[e],a[e]))}),r):null==t?e:t;var i,a,r}return a["1.4.0"]=FlybrixSerialization.parse("Vector3f = { x: f32, y: f32, z: f32 };PIDSettings = {kp: f32,ki: f32,kd: f32,integral_windup_guard: f32,d_filter_time: f32,setpoint_filter_time: f32,command_to_value: f32 };Version = { major: u8, minor: u8, patch: u8 };ConfigID = u32;PcbTransform = { orientation: Vector3f, translation: Vector3f };MixTable = { fz: [i8:8], tx: [i8:8], ty: [i8:8], tz: [i8:8] };MagBias = { offset: Vector3f };ChannelProperties = {assignment: { thrust: u8, pitch: u8, roll: u8, yaw: u8, aux1: u8, aux2: u8 },inversion: {/8/ thrust: void, pitch: void, roll: void, yaw: void, aux1: void, aux2: void },midpoint: [u16:6],deadzone: [u16:6] };PIDBypass = {/8/thrust_master: void,pitch_master: void,roll_master: void,yaw_master: void,thrust_slave: void,pitch_slave: void,roll_slave: void,yaw_slave: void};PIDParameters = {thrust_master: PIDSettings,pitch_master: PIDSettings,roll_master: PIDSettings,yaw_master: PIDSettings,thrust_slave: PIDSettings,pitch_slave: PIDSettings,roll_slave: PIDSettings,yaw_slave: PIDSettings,pid_bypass: PIDBypass };StateParameters = { state_estimation: [f32:2], enable: [f32:2] };StatusFlag = {/16/boot: void,mpu_fail: void,bmp_fail: void,rx_fail: void,idle: void,enabling: void,clear_mpu_bias: void,set_mpu_bias: void,fail_stability: void,fail_angle: void,enabled: void,battery_low: void,temp_warning: void,log_full: void,fail_other: void,override: void };Color = { red: u8, green: u8, blue: u8 };LEDStateColors = {right_front: Color,right_back: Color,left_front: Color,left_back: Color };LEDStateCase = {status: StatusFlag,pattern: u8,colors: LEDStateColors,indicator_red: bool,indicator_green: bool };LEDStates = [/16/LEDStateCase:16];LEDStatesFixed = [LEDStateCase:16];DeviceName = s9;Configuration = {/16/version: Version,id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStates,name: DeviceName };ConfigurationFixed = {version: Version,id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStatesFixed,name: DeviceName };ConfigurationFlag = {/16/version: void,id: void,pcb_transform: void,mix_table: void,mag_bias: void,channel: void,pid_parameters: void,state_parameters: void,led_states: [// void:16],name: void};Rotation = { pitch: f32, roll: f32, yaw: f32 };PIDState = {timestamp_us: u32,input: f32,setpoint: f32,p_term: f32,i_term: f32,d_term: f32 };RcCommand = { throttle: i16, pitch: i16, roll: i16, yaw: i16 };State = {/32/timestamp_us: u32,status: StatusFlag,v0_raw: u16,i0_raw: u16,i1_raw: u16,accel: Vector3f,gyro: Vector3f,mag: Vector3f,temperature: u16,pressure: u32,ppm: [i16:6],aux_chan_mask: u8,command: RcCommand,control: { fz: f32, tx: f32, ty: f32, tz: f32 },pid_master_fz: PIDState,pid_master_tx: PIDState,pid_master_ty: PIDState,pid_master_tz: PIDState,pid_slave_fz: PIDState,pid_slave_tx: PIDState,pid_slave_ty: PIDState,pid_slave_tz: PIDState,motor_out: [i16:8],kinematics_angle: Rotation,kinematics_rate: Rotation,kinematics_altitude: f32,loop_count: u32 };StateFields = {/32/timestamp_us: void,status: void,v0_raw: void,i0_raw: void,i1_raw: void,accel: void,gyro: void,mag: void,temperature: void,pressure: void,ppm: void,aux_chan_mask: void,command: void,control: void,pid_master_fz: void,pid_master_tx: void,pid_master_ty: void,pid_master_tz: void,pid_slave_fz: void,pid_slave_tx: void,pid_slave_ty: void,pid_slave_tz: void,motor_out: void,kinematics_angle: void,kinematics_rate: void,kinematics_altitude: void,loop_count: void };AuxMask = {//aux1_low: void,aux1_mid: void,aux1_high: void,aux2_low: void,aux2_mid: void,aux2_high: void };Command = {/32/request_response: void,set_eeprom_data: ConfigurationFixed,reinit_eeprom_data: void,request_eeprom_data: void,request_enable_iteration: u8,motor_override_speed_0: u16,motor_override_speed_1: u16,motor_override_speed_2: u16,motor_override_speed_3: u16,motor_override_speed_4: u16,motor_override_speed_5: u16,motor_override_speed_6: u16,motor_override_speed_7: u16,set_command_override: bool,set_state_mask: StateFields,set_state_delay: u16,set_sd_write_delay: u16,set_led: {  pattern: u8,  color_right: Color,  color_left: Color,  indicator_red: bool,  indicator_green: bool },set_serial_rc: { enabled: bool, command: RcCommand, aux_mask: AuxMask },set_card_recording_state: {/8/ record_to_card: void, lock_recording_state: void },set_partial_eeprom_data: Configuration,reinit_partial_eeprom_data: ConfigurationFlag,req_partial_eeprom_data: ConfigurationFlag,req_card_recording_state: void,set_partial_temporary_config: Configuration,set_command_sources: {/8/ serial: void, radio: void },set_calibration: { enabled: bool, mode: u8 },set_autopilot_enabled: bool,set_usb_mode: u8};DebugString = { deprecated_mask: u32, message: s };HistoryData = DebugString;Response = { mask: u32, ack: u32 };ProtocolInfo = { version: Version, structure: s };Protocol = {/32/ request: void, response: ProtocolInfo };"),a["1.5.0"]=a["1.5.1"]=FlybrixSerialization.parse("Vector3f = { x: f32, y: f32, z: f32 };PIDSettings = {kp: f32,ki: f32,kd: f32,integral_windup_guard: f32,d_filter_time: f32,setpoint_filter_time: f32,command_to_value: f32 };Version = { major: u8, minor: u8, patch: u8 };ConfigID = u32;PcbTransform = { orientation: Vector3f, translation: Vector3f };MixTable = { fz: [i8:8], tx: [i8:8], ty: [i8:8], tz: [i8:8] };MagBias = { offset: Vector3f };ChannelProperties = {assignment: { thrust: u8, pitch: u8, roll: u8, yaw: u8, aux1: u8, aux2: u8 },inversion: {/8/ thrust: void, pitch: void, roll: void, yaw: void, aux1: void, aux2: void },midpoint: [u16:6],deadzone: [u16:6] };PIDBypass = {/8/thrust_master: void,pitch_master: void,roll_master: void,yaw_master: void,thrust_slave: void,pitch_slave: void,roll_slave: void,yaw_slave: void};PIDParameters = {thrust_master: PIDSettings,pitch_master: PIDSettings,roll_master: PIDSettings,yaw_master: PIDSettings,thrust_slave: PIDSettings,pitch_slave: PIDSettings,roll_slave: PIDSettings,yaw_slave: PIDSettings,thrust_gain: f32,pitch_gain: f32,roll_gain: f32,yaw_gain: f32,pid_bypass: PIDBypass };StateParameters = { state_estimation: [f32:2], enable: [f32:2] };StatusFlag = {/16/boot: void,mpu_fail: void,bmp_fail: void,rx_fail: void,idle: void,enabling: void,clear_mpu_bias: void,set_mpu_bias: void,fail_stability: void,fail_angle: void,enabled: void,battery_low: void,temp_warning: void,log_full: void,fail_other: void,override: void };Color = { red: u8, green: u8, blue: u8 };LEDStateColors = {right_front: Color,right_back: Color,left_front: Color,left_back: Color };LEDStateCase = {status: StatusFlag,pattern: u8,colors: LEDStateColors,indicator_red: bool,indicator_green: bool };LEDStates = [/16/LEDStateCase:16];LEDStatesFixed = [LEDStateCase:16];DeviceName = s9;Configuration = {/16/version: Version,id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStates,name: DeviceName };ConfigurationFixed = {version: Version,id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStatesFixed,name: DeviceName };ConfigurationFlag = {/16/version: void,id: void,pcb_transform: void,mix_table: void,mag_bias: void,channel: void,pid_parameters: void,state_parameters: void,led_states: [// void:16],name: void,velocity_pid_parameters: void,inertial_bias: void };Rotation = { pitch: f32, roll: f32, yaw: f32 };PIDState = {timestamp_us: u32,input: f32,setpoint: f32,p_term: f32,i_term: f32,d_term: f32 };RcCommand = { throttle: i16, pitch: i16, roll: i16, yaw: i16 };State = {/32/timestamp_us: u32,status: StatusFlag,v0_raw: u16,i0_raw: u16,i1_raw: u16,accel: Vector3f,gyro: Vector3f,mag: Vector3f,temperature: u16,pressure: u32,ppm: [i16:6],aux_chan_mask: u8,command: RcCommand,control: { fz: f32, tx: f32, ty: f32, tz: f32 },pid_master_fz: PIDState,pid_master_tx: PIDState,pid_master_ty: PIDState,pid_master_tz: PIDState,pid_slave_fz: PIDState,pid_slave_tx: PIDState,pid_slave_ty: PIDState,pid_slave_tz: PIDState,motor_out: [i16:8],kinematics_angle: Rotation,kinematics_rate: Rotation,kinematics_altitude: f32,loop_count: u32 };StateFields = {/32/timestamp_us: void,status: void,v0_raw: void,i0_raw: void,i1_raw: void,accel: void,gyro: void,mag: void,temperature: void,pressure: void,ppm: void,aux_chan_mask: void,command: void,control: void,pid_master_fz: void,pid_master_tx: void,pid_master_ty: void,pid_master_tz: void,pid_slave_fz: void,pid_slave_tx: void,pid_slave_ty: void,pid_slave_tz: void,motor_out: void,kinematics_angle: void,kinematics_rate: void,kinematics_altitude: void,loop_count: void };AuxMask = {//aux1_low: void,aux1_mid: void,aux1_high: void,aux2_low: void,aux2_mid: void,aux2_high: void };Command = {/32/request_response: void,set_eeprom_data: ConfigurationFixed,reinit_eeprom_data: void,request_eeprom_data: void,request_enable_iteration: u8,motor_override_speed_0: u16,motor_override_speed_1: u16,motor_override_speed_2: u16,motor_override_speed_3: u16,motor_override_speed_4: u16,motor_override_speed_5: u16,motor_override_speed_6: u16,motor_override_speed_7: u16,set_command_override: bool,set_state_mask: StateFields,set_state_delay: u16,set_sd_write_delay: u16,set_led: {  pattern: u8,  color_right: Color,  color_left: Color,  indicator_red: bool,  indicator_green: bool },set_serial_rc: { enabled: bool, command: RcCommand, aux_mask: AuxMask },set_card_recording_state: {/8/ record_to_card: void, lock_recording_state: void },set_partial_eeprom_data: Configuration,reinit_partial_eeprom_data: ConfigurationFlag,req_partial_eeprom_data: ConfigurationFlag,req_card_recording_state: void,set_partial_temporary_config: Configuration,set_command_sources: {/8/ serial: void, radio: void },set_calibration: { enabled: bool, mode: u8 },set_autopilot_enabled: bool,set_usb_mode: u8};DebugString = { deprecated_mask: u32, message: s };HistoryData = DebugString;Response = { mask: u32, ack: u32 };ProtocolInfo = { version: Version, structure: s };Protocol = {/32/ request: void, response: ProtocolInfo };"),a["1.6.0"]=FlybrixSerialization.parse("Vector3f = { x: f32, y: f32, z: f32 };PIDSettings = {kp: f32,ki: f32,kd: f32,integral_windup_guard: f32,d_filter_time: f32,setpoint_filter_time: f32,command_to_value: f32 };Version = { major: u8, minor: u8, patch: u8 };ConfigID = u32;PcbTransform = { orientation: Vector3f, translation: Vector3f };MixTable = { fz: [i8:8], tx: [i8:8], ty: [i8:8], tz: [i8:8] };MagBias = { offset: Vector3f };ChannelProperties = {assignment: { thrust: u8, pitch: u8, roll: u8, yaw: u8, aux1: u8, aux2: u8 },inversion: {/8/ thrust: void, pitch: void, roll: void, yaw: void, aux1: void, aux2: void },midpoint: [u16:6],deadzone: [u16:6] };PIDBypass = {/8/thrust_master: void,pitch_master: void,roll_master: void,yaw_master: void,thrust_slave: void,pitch_slave: void,roll_slave: void,yaw_slave: void};PIDParameters = {thrust_master: PIDSettings,pitch_master: PIDSettings,roll_master: PIDSettings,yaw_master: PIDSettings,thrust_slave: PIDSettings,pitch_slave: PIDSettings,roll_slave: PIDSettings,yaw_slave: PIDSettings,thrust_gain: f32,pitch_gain: f32,roll_gain: f32,yaw_gain: f32,pid_bypass: PIDBypass };StateParameters = { state_estimation: [f32:2], enable: [f32:2] };StatusFlag = {/16/_0: void,_1: void,_2: void,no_signal: void,idle: void,arming: void,recording_sd: void,_7: void,loop_slow: void,_9: void,armed: void,battery_low: void,battery_critical: void,log_full: void,crash_detected: void,override: void };Color = { red: u8, green: u8, blue: u8 };LEDStateColors = {right_front: Color,right_back: Color,left_front: Color,left_back: Color };LEDStateCase = {status: StatusFlag,pattern: u8,colors: LEDStateColors,indicator_red: bool,indicator_green: bool };LEDStates = [/16/LEDStateCase:16];LEDStatesFixed = [LEDStateCase:16];DeviceName = s9;InertialBias = { accel: Vector3f, gyro: Vector3f };VelocityPIDBypass = {/8/forward_master: void,right_master: void,up_master: void,_unused_master: void,forward_slave: void,right_slave: void,up_slave: void,_unused_slave: void};VelocityPIDParameters = {forward_master: PIDSettings,right_master: PIDSettings,up_master: PIDSettings,forward_slave: PIDSettings,right_slave: PIDSettings,up_slave: PIDSettings,pid_bypass: VelocityPIDBypass };Configuration = {/16/version: Version,id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStates,name: DeviceName,velocity_pid_parameters: VelocityPIDParameters,inertial_bias: InertialBias };ConfigurationFixed = {version: Version,id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStatesFixed,name: DeviceName,velocity_pid_parameters: VelocityPIDParameters,inertial_bias: InertialBias };ConfigurationFlag = {/16/version: void,id: void,pcb_transform: void,mix_table: void,mag_bias: void,channel: void,pid_parameters: void,state_parameters: void,led_states: [// void:16],name: void,velocity_pid_parameters: void,inertial_bias: void };Rotation = { pitch: f32, roll: f32, yaw: f32 };PIDState = {timestamp_us: u32,input: f32,setpoint: f32,p_term: f32,i_term: f32,d_term: f32 };RcCommand = { throttle: i16, pitch: i16, roll: i16, yaw: i16 };State = {/32/timestamp_us: u32,status: StatusFlag,v0_raw: u16,i0_raw: u16,i1_raw: u16,accel: Vector3f,gyro: Vector3f,mag: Vector3f,temperature: u16,pressure: u32,ppm: [i16:6],aux_chan_mask: u8,command: RcCommand,control: { fz: f32, tx: f32, ty: f32, tz: f32 },pid_master_fz: PIDState,pid_master_tx: PIDState,pid_master_ty: PIDState,pid_master_tz: PIDState,pid_slave_fz: PIDState,pid_slave_tx: PIDState,pid_slave_ty: PIDState,pid_slave_tz: PIDState,motor_out: [i16:8],kinematics_angle: Rotation,kinematics_rate: Rotation,kinematics_altitude: f32,loop_count: u32 };StateFields = {/32/timestamp_us: void,status: void,v0_raw: void,i0_raw: void,i1_raw: void,accel: void,gyro: void,mag: void,temperature: void,pressure: void,ppm: void,aux_chan_mask: void,command: void,control: void,pid_master_fz: void,pid_master_tx: void,pid_master_ty: void,pid_master_tz: void,pid_slave_fz: void,pid_slave_tx: void,pid_slave_ty: void,pid_slave_tz: void,motor_out: void,kinematics_angle: void,kinematics_rate: void,kinematics_altitude: void,loop_count: void };AuxMask = {//aux1_low: void,aux1_mid: void,aux1_high: void,aux2_low: void,aux2_mid: void,aux2_high: void };Command = {/32/request_response: void,set_eeprom_data: ConfigurationFixed,reinit_eeprom_data: void,request_eeprom_data: void,request_enable_iteration: u8,motor_override_speed_0: u16,motor_override_speed_1: u16,motor_override_speed_2: u16,motor_override_speed_3: u16,motor_override_speed_4: u16,motor_override_speed_5: u16,motor_override_speed_6: u16,motor_override_speed_7: u16,set_command_override: bool,set_state_mask: StateFields,set_state_delay: u16,set_sd_write_delay: u16,set_led: {  pattern: u8,  color_right: Color,  color_left: Color,  indicator_red: bool,  indicator_green: bool },set_serial_rc: { enabled: bool, command: RcCommand, aux_mask: AuxMask },set_card_recording_state: {/8/ record_to_card: void, lock_recording_state: void },set_partial_eeprom_data: Configuration,reinit_partial_eeprom_data: ConfigurationFlag,req_partial_eeprom_data: ConfigurationFlag,req_card_recording_state: void,set_partial_temporary_config: Configuration,set_command_sources: {/8/ serial: void, radio: void },set_calibration: { enabled: bool, mode: u8 },set_autopilot_enabled: bool,set_usb_mode: u8};DebugString = { deprecated_mask: u32, message: s };HistoryData = DebugString;Response = { mask: u32, ack: u32 };ProtocolInfo = { version: Version, structure: s };Protocol = {/32/ request: void, response: ProtocolInfo };"),{Serializer:FlybrixSerialization.Serializer,getHandler:function(e){return a[e]},addHandler:function(e,t){var i=e.major.toString()+"."+e.minor.toString()+e.patch.toString();a[i]=FlybrixSerialization.parse(t)},updateFields:o}}e.$inject=[],angular.module("flybrixCommon").factory("serializationHandler",e)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNhbGlicmF0aW9uLmpzIiwiY29icy5qcyIsImNvbW1hbmRMb2cuanMiLCJkZXZpY2VDb25maWcuanMiLCJmaXJtd2FyZVZlcnNpb24uanMiLCJsZWQuanMiLCJyY0RhdGEuanMiLCJzZXJpYWwuanMiLCJzZXJpYWxpemF0aW9uSGFuZGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY2FsaWJyYXRpb24iLCJjb21tYW5kTG9nIiwic2VyaWFsIiwibWFnbmV0b21ldGVyIiwic2VuZFN0cnVjdHVyZSIsInJlcXVlc3RfcmVzcG9uc2UiLCJzZXRfY2FsaWJyYXRpb24iLCJlbmFibGVkIiwibW9kZSIsImFjY2VsZXJvbWV0ZXIiLCJmbGF0IiwiY2FsaWJyYXRlQWNjZWxlcm9tZXRlciIsImJpbmQiLCJmb3J3YXJkIiwiYmFjayIsInJpZ2h0IiwibGVmdCIsImZpbmlzaCIsInBvc2VEZXNjcmlwdGlvbiIsInBvc2VJZCIsImZhY3RvcnkiLCIkaW5qZWN0IiwiUmVhZGVyIiwiY2FwYWNpdHkiLCJ1bmRlZmluZWQiLCJ0aGlzIiwiTiIsImJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJyZWFkeV9mb3JfbmV3X21lc3NhZ2UiLCJidWZmZXJfbGVuZ3RoIiwiY29ic0RlY29kZSIsInJlYWRlciIsInNyY19wdHIiLCJkc3RfcHRyIiwibGVmdG92ZXJfbGVuZ3RoIiwiYXBwZW5kX3plcm8iLCJlbmNvZGUiLCJidWYiLCJyZXR2YWwiLCJNYXRoIiwiZmxvb3IiLCJieXRlTGVuZ3RoIiwibGVuIiwicG9zX2N0ciIsImkiLCJsZW5ndGgiLCJ2YWwiLCJzdWJhcnJheSIsInNsaWNlIiwicHJvdG90eXBlIiwicmVhZEJ5dGVzIiwiZGF0YSIsIm9uU3VjY2VzcyIsIm9uRXJyb3IiLCJjIiwiaiIsImZhaWxlZF9kZWNvZGUiLCJieXRlcyIsIm1lc3NhZ2UiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCIkcSIsIm1lc3NhZ2VzIiwicmVzcG9uZGVyIiwiZGVmZXIiLCJzZXJ2aWNlIiwibG9nIiwiY2xlYXJTdWJzY3JpYmVycyIsIm9uTWVzc2FnZSIsImNhbGxiYWNrIiwicHJvbWlzZSIsInRoZW4iLCJyZWFkIiwicHVzaCIsIm5vdGlmeSIsImRldmljZUNvbmZpZyIsImZpcm13YXJlVmVyc2lvbiIsInNlcmlhbGl6YXRpb25IYW5kbGVyIiwiY29uZmlnIiwiY29uZmlnQ2FsbGJhY2siLCJsb2dnaW5nQ2FsbGJhY2siLCJyZXF1ZXN0IiwiaGFuZGxlcnMiLCJyZXFfcGFydGlhbF9lZXByb21fZGF0YSIsIkNvbmZpZ3VyYXRpb25GbGFnIiwiZW1wdHkiLCJzZW5kQ29uZmlnIiwicHJvcGVydGllcyIsIm1hc2siLCJuZXdDb25maWciLCJyZXF1ZXN0VXBkYXRlIiwidGVtcG9yYXJ5Iiwic2V0X3BhcnRpYWxfdGVtcG9yYXJ5X2NvbmZpZyIsIk1BU0siLCJzZXRfcGFydGlhbF9lZXByb21fZGF0YSIsInVwZGF0ZUNvbmZpZ0Zyb21SZW1vdGVEYXRhIiwiY29uZmlnQ2hhbmdlcyIsInZlcnNpb24iLCJ1cGRhdGVGaWVsZHMiLCJtYWpvciIsIm1pbm9yIiwicGF0Y2giLCJzZXQiLCJzdXBwb3J0ZWQiLCJkZXNpcmVkS2V5IiwiYWRkT25SZWNlaXZlQ2FsbGJhY2siLCJtZXNzYWdlVHlwZSIsInNldF9lZXByb21fZGF0YSIsImNhcmRfcmVjX3N0YXRlIiwic2V0X2NhcmRfcmVjb3JkaW5nX3N0YXRlIiwic2Rfd3JpdGVfZGVsYXkiLCJzZXRfc2Rfd3JpdGVfZGVsYXkiLCJyZWNvcmRfdG9fY2FyZCIsImxvY2tfcmVjb3JkaW5nX3N0YXRlIiwiQ29uZmlndXJhdGlvbiIsInJlaW5pdCIsInJlaW5pdF9lZXByb21fZGF0YSIsInJlYXNvbiIsInNlbmQiLCJnZXRDb25maWciLCJzZXRDb25maWdDYWxsYmFjayIsInNldExvZ2dpbmdDYWxsYmFjayIsImdldERlc2lyZWRWZXJzaW9uIiwiZGVzaXJlZCIsImtleSIsIjEuNC4wIiwiMS41LjAiLCIxLjUuMSIsIjEuNi4wIiwiZGVmYXVsdFNlcmlhbGl6YXRpb25IYW5kbGVyIiwiZ2V0SGFuZGxlciIsImN1cnJlbnRTZXJpYWxpemF0aW9uSGFuZGxlciIsInZhbHVlIiwiam9pbiIsImdldCIsImxlZCIsIkxlZFBhdHRlcm5zIiwiTk9fT1ZFUlJJREUiLCJGTEFTSCIsIkJFQUNPTiIsIkJSRUFUSEUiLCJBTFRFUk5BVEUiLCJTT0xJRCIsImtleXMiLCJjb2xvcnMiLCJmb3JFYWNoIiwicmVkIiwiZ3JlZW4iLCJibHVlIiwibGVkU3RhdGUiLCJzdGF0dXMiLCJwYXR0ZXJuIiwiaW5kaWNhdG9yX3JlZCIsImluZGljYXRvcl9ncmVlbiIsImNvbmZpZ1BhcnQiLCJsZWRfc3RhdGVzIiwiY29sb3JfcmYiLCJjb2xvcl9yYiIsImNvbG9yX2xmIiwiY29sb3JfbGIiLCJTdGF0dXNGbGFnIiwiY29sb3IiLCJpZHgiLCJ2Iiwic2V0U2ltcGxlIiwicGF0dGVybnMiLCJyY0RhdGEiLCJBVVgiLCJMT1ciLCJNSUQiLCJISUdIIiwiYXV4TmFtZXMiLCJ0aHJvdHRsZSIsInBpdGNoIiwicm9sbCIsInlhdyIsImF1eDEiLCJhdXgyIiwidXJnZW50Iiwic2V0VGhyb3R0bGUiLCJzZXRQaXRjaCIsInNldFJvbGwiLCJzZXRZYXciLCJzZXRBdXgxIiwibWF4IiwibWluIiwic2V0QXV4MiIsImdldFRocm90dGxlIiwiZ2V0UGl0Y2giLCJnZXRSb2xsIiwiZ2V0WWF3IiwiZ2V0QXV4MSIsImdldEF1eDIiLCJidXN5IiwiY29tbWFuZCIsImNvbnN0cmFpbiIsImFwcGx5RGVhZHpvbmUiLCJhdXhfbWFzayIsInNldF9zZXJpYWxfcmMiLCJmb3JjZU5leHRTZW5kIiwieCIsInhtaW4iLCJ4bWF4IiwiZGVhZHpvbmUiLCIkdGltZW91dCIsImNvYnMiLCJNZXNzYWdlVHlwZSIsIlN0YXRlIiwiQ29tbWFuZCIsIkRlYnVnU3RyaW5nIiwiSGlzdG9yeURhdGEiLCJQcm90b2NvbCIsIlJlc3BvbnNlIiwiYWNrbm93bGVkZ2VzIiwiYmFja2VuZCIsIkJhY2tlbmQiLCJvblJlY2VpdmVMaXN0ZW5lcnMiLCJjb2JzUmVhZGVyIiwiYnl0ZXNIYW5kbGVyIiwib25SZWFkIiwibGFzdF90aW1lc3RhbXBfdXMiLCJNZXNzYWdlVHlwZUludmVyc2lvbiIsIk9iamVjdCIsInNoaWZ0IiwicmVsYXhlZE1hc2siLCJyZXNwb25zZSIsInJlamVjdCIsInJlc29sdmUiLCJhY2tub3dsZWRnZSIsImFjayIsImFkZEhhbmRsZXIiLCJzdHJ1Y3R1cmUiLCJzZXRCYWNrZW5kIiwicmVtb3ZlT25SZWNlaXZlQ2FsbGJhY2siLCJmaWx0ZXIiLCJjYiIsInNldEJ5dGVzSGFuZGxlciIsImhhbmRsZXIiLCJoYW5kbGVQb3N0Q29ubmVjdCIsImxvZ19zZW5kIiwiZXh0cmFNYXNrIiwic3RhdGUiLCJhc3NpZ24iLCJ0ZW1wZXJhdHVyZSIsInByZXNzdXJlIiwicHJvY2Vzc1N0YXRlT3V0cHV0IiwidHlwZUNvZGUiLCJieXRlQ291bnQiLCJzZXJpYWxpemVyIiwiU2VyaWFsaXplciIsIkRhdGFWaWV3IiwibWFza0FycmF5IiwiZGF0YUxlbmd0aCIsImluZGV4Iiwib3V0cHV0IiwicHJvY2Vzc0RhdGEiLCJyZXBvcnRJc3N1ZXMiLCJpc3N1ZSIsInRleHQiLCJjb25jYXQiLCJkZWNvZGUiLCJlcnIiLCJzZXJpYWxfdXBkYXRlX3JhdGVfZXN0aW1hdGUiLCJ0aW1lc3RhbXBfdXMiLCJwcm9jZXNzU3RhdGVJbnB1dCIsImxpc3RlbmVyIiwiaGFuZGxlckNhY2hlIiwidGFyZ2V0Iiwic291cmNlIiwiQXJyYXkiLCJyZXN1bHQiLCJ1cGRhdGVGaWVsZHNBcnJheSIsIkZseWJyaXhTZXJpYWxpemF0aW9uIiwicGFyc2UiLCJjb25maWdGdWxsMTQiLCJjb25maWdGdWxsMTUiLCJjb25maWdGdWxsMTYiLCJmaXJtd2FyZSIsInZlcnNpb25TdHJpbmciLCJ0b1N0cmluZyJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxhQUVBQSxRQUFBQyxPQUFBLGdCQUFBLElBSEEsR0NBQSxXQUNBLGFBTUEsU0FB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QixxQkFBQXZCLFdBQ0F2SCxXQUFBLFNBQUFtSixHQUNBLE9BQUFYLEVBQUFXLElBRUEvQyxXQUFBLFNBQUFySSxFQUFBc0ksR0FDQSxJQUFBK0MsRUFBQXJMLEVBQUFFLE1BQUFvTCxXQUFBLElBQUF0TCxFQUFBRyxNQUFBbUwsV0FBQXRMLEVBQUFJLE1BQUFrTCxXQUNBYixFQUFBWSxHQUFBTixxQkFBQUMsTUFBQTFDLElBRUFySSxhQUFBQSxHQTVZQXJCLEVBQUF6RCxRQUFBLEdBRUF2QixRQUFBQyxPQUFBLGlCQUFBcUIsUUFBQSx1QkFBQTBELEdBTEEiLCJmaWxlIjoiZmx5YnJpeC1jb21tb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdmbHlicml4Q29tbW9uJywgW10pO1xyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2ZseWJyaXhDb21tb24nKS5mYWN0b3J5KCdjYWxpYnJhdGlvbicsIGNhbGlicmF0aW9uKTtcclxuXHJcbiAgICBjYWxpYnJhdGlvbi4kaW5qZWN0ID0gWydjb21tYW5kTG9nJywgJ3NlcmlhbCddO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNhbGlicmF0aW9uKGNvbW1hbmRMb2csIHNlcmlhbCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1hZ25ldG9tZXRlcjogbWFnbmV0b21ldGVyLFxyXG4gICAgICAgICAgICBhY2NlbGVyb21ldGVyOiB7XHJcbiAgICAgICAgICAgICAgICBmbGF0OiBjYWxpYnJhdGVBY2NlbGVyb21ldGVyLmJpbmQobnVsbCwgJ2ZsYXQnLCAwKSxcclxuICAgICAgICAgICAgICAgIGZvcndhcmQ6IGNhbGlicmF0ZUFjY2VsZXJvbWV0ZXIuYmluZChudWxsLCAnbGVhbiBmb3J3YXJkJywgMSksXHJcbiAgICAgICAgICAgICAgICBiYWNrOiBjYWxpYnJhdGVBY2NlbGVyb21ldGVyLmJpbmQobnVsbCwgJ2xlYW4gYmFjaycsIDIpLFxyXG4gICAgICAgICAgICAgICAgcmlnaHQ6IGNhbGlicmF0ZUFjY2VsZXJvbWV0ZXIuYmluZChudWxsLCAnbGVhbiByaWdodCcsIDMpLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogY2FsaWJyYXRlQWNjZWxlcm9tZXRlci5iaW5kKG51bGwsICdsZWFuIGxlZnQnLCA0KSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmluaXNoOiBmaW5pc2gsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbWFnbmV0b21ldGVyKCkge1xyXG4gICAgICAgICAgICBjb21tYW5kTG9nKFwiQ2FsaWJyYXRpbmcgbWFnbmV0b21ldGVyIGJpYXNcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJpYWwuc2VuZFN0cnVjdHVyZSgnQ29tbWFuZCcsIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfcmVzcG9uc2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzZXRfY2FsaWJyYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGU6IDAsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjYWxpYnJhdGVBY2NlbGVyb21ldGVyKHBvc2VEZXNjcmlwdGlvbiwgcG9zZUlkKSB7XHJcbiAgICAgICAgICAgIGNvbW1hbmRMb2coXCJDYWxpYnJhdGluZyBncmF2aXR5IGZvciBwb3NlOiBcIiArIHBvc2VEZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJpYWwuc2VuZFN0cnVjdHVyZSgnQ29tbWFuZCcsIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfcmVzcG9uc2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzZXRfY2FsaWJyYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGU6IHBvc2VJZCArIDEsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaW5pc2goKSB7XHJcbiAgICAgICAgICAgIGNvbW1hbmRMb2coXCJGaW5pc2hpbmcgY2FsaWJyYXRpb25cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJpYWwuc2VuZFN0cnVjdHVyZSgnQ29tbWFuZCcsIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfcmVzcG9uc2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzZXRfY2FsaWJyYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtb2RlOiAwLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSgpKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdmbHlicml4Q29tbW9uJykuZmFjdG9yeSgnY29icycsIGNvYnMpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvYnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgUmVhZGVyOiBSZWFkZXIsXHJcbiAgICAgICAgICAgIGVuY29kZTogZW5jb2RlLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIFJlYWRlcihjYXBhY2l0eSkge1xyXG4gICAgICAgIGlmIChjYXBhY2l0eSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNhcGFjaXR5ID0gMjAwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5OID0gY2FwYWNpdHk7XHJcbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheShjYXBhY2l0eSk7XHJcbiAgICAgICAgdGhpcy5yZWFkeV9mb3JfbmV3X21lc3NhZ2UgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYnVmZmVyX2xlbmd0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29ic0RlY29kZShyZWFkZXIpIHtcclxuICAgICAgICB2YXIgc3JjX3B0ciA9IDA7XHJcbiAgICAgICAgdmFyIGRzdF9wdHIgPSAwO1xyXG4gICAgICAgIHZhciBsZWZ0b3Zlcl9sZW5ndGggPSAwO1xyXG4gICAgICAgIHZhciBhcHBlbmRfemVybyA9IGZhbHNlO1xyXG4gICAgICAgIHdoaWxlIChyZWFkZXIuYnVmZmVyW3NyY19wdHJdKSB7XHJcbiAgICAgICAgICAgIGlmICghbGVmdG92ZXJfbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwZW5kX3plcm8pXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLmJ1ZmZlcltkc3RfcHRyKytdID0gMDtcclxuICAgICAgICAgICAgICAgIGxlZnRvdmVyX2xlbmd0aCA9IHJlYWRlci5idWZmZXJbc3JjX3B0cisrXSAtIDE7XHJcbiAgICAgICAgICAgICAgICBhcHBlbmRfemVybyA9IGxlZnRvdmVyX2xlbmd0aCA8IDB4RkU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAtLWxlZnRvdmVyX2xlbmd0aDtcclxuICAgICAgICAgICAgICAgIHJlYWRlci5idWZmZXJbZHN0X3B0cisrXSA9IHJlYWRlci5idWZmZXJbc3JjX3B0cisrXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGxlZnRvdmVyX2xlbmd0aCA/IDAgOiBkc3RfcHRyO1xyXG4gICAgfVxyXG5cclxuICAgIFJlYWRlci5wcm90b3R5cGUucmVhZEJ5dGVzID0gZnVuY3Rpb24oZGF0YSwgb25TdWNjZXNzLCBvbkVycm9yKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gZGF0YVtpXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlfZm9yX25ld19tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmaXJzdCBieXRlIG9mIGEgbmV3IG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIHRoaXMucmVhZHlfZm9yX25ld19tZXNzYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcl9sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlclt0aGlzLmJ1ZmZlcl9sZW5ndGgrK10gPSBjO1xyXG5cclxuICAgICAgICAgICAgaWYgKGMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ1ZmZlcl9sZW5ndGggPT09IHRoaXMuTikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1ZmZlciBvdmVyZmxvdywgcHJvYmFibHkgZHVlIHRvIGVycm9ycyBpbiBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgb25FcnJvcignb3ZlcmZsb3cnLCAnYnVmZmVyIG92ZXJmbG93IGluIENPQlMgZGVjb2RpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYWR5X2Zvcl9uZXdfbWVzc2FnZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5idWZmZXJfbGVuZ3RoID0gY29ic0RlY29kZSh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIGZhaWxlZF9kZWNvZGUgPSAodGhpcy5idWZmZXJfbGVuZ3RoID09PSAwKTtcclxuICAgICAgICAgICAgaWYgKGZhaWxlZF9kZWNvZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyWzBdID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgajtcclxuICAgICAgICAgICAgZm9yIChqID0gMTsgaiA8IHRoaXMuYnVmZmVyX2xlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlclswXSBePSB0aGlzLmJ1ZmZlcltqXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5idWZmZXJbMF0gPT09IDApIHsgIC8vIGNoZWNrIHN1bSBpcyBjb3JyZWN0XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWR5X2Zvcl9uZXdfbWVzc2FnZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5idWZmZXJfbGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2Vzcyh0aGlzLmJ1ZmZlci5zbGljZSgxLCB0aGlzLmJ1ZmZlcl9sZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25FcnJvcignc2hvcnQnLCAnVG9vIHNob3J0IHBhY2tldCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgeyAgLy8gYmFkIGNoZWNrc3VtXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWR5X2Zvcl9uZXdfbWVzc2FnZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnl0ZXMgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMuYnVmZmVyX2xlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXMgKz0gdGhpcy5idWZmZXJbal0gKyBcIixcIjtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5idWZmZXJbal0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGZhaWxlZF9kZWNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKCdmcmFtZScsICdVbmV4cGVjdGVkIGVuZGluZyBvZiBwYWNrZXQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9ICdCQUQgQ0hFQ0tTVU0gKCcgKyB0aGlzLmJ1ZmZlcl9sZW5ndGggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnIGJ5dGVzKScgKyBieXRlcyArIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgb25FcnJvcignY2hlY2tzdW0nLCBtc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBlbmNvZGUoYnVmKSB7XHJcbiAgICAgICAgdmFyIHJldHZhbCA9XHJcbiAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KE1hdGguZmxvb3IoKGJ1Zi5ieXRlTGVuZ3RoICogMjU1ICsgNzYxKSAvIDI1NCkpO1xyXG4gICAgICAgIHZhciBsZW4gPSAxO1xyXG4gICAgICAgIHZhciBwb3NfY3RyID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1Zi5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBpZiAocmV0dmFsW3Bvc19jdHJdID09IDB4RkUpIHtcclxuICAgICAgICAgICAgICAgIHJldHZhbFtwb3NfY3RyXSA9IDB4RkY7XHJcbiAgICAgICAgICAgICAgICBwb3NfY3RyID0gbGVuKys7XHJcbiAgICAgICAgICAgICAgICByZXR2YWxbcG9zX2N0cl0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB2YWwgPSBidWZbaV07XHJcbiAgICAgICAgICAgICsrcmV0dmFsW3Bvc19jdHJdO1xyXG4gICAgICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR2YWxbbGVuKytdID0gdmFsO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcG9zX2N0ciA9IGxlbisrO1xyXG4gICAgICAgICAgICAgICAgcmV0dmFsW3Bvc19jdHJdID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0dmFsLnN1YmFycmF5KDAsIGxlbikuc2xpY2UoKS5idWZmZXI7XHJcbiAgICB9O1xyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2ZseWJyaXhDb21tb24nKS5mYWN0b3J5KCdjb21tYW5kTG9nJywgY29tbWFuZExvZyk7XHJcblxyXG4gICAgY29tbWFuZExvZy4kaW5qZWN0ID0gWyckcSddO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbW1hbmRMb2coJHEpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZXMgPSBbXTtcclxuICAgICAgICB2YXIgcmVzcG9uZGVyID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSBsb2c7XHJcbiAgICAgICAgc2VydmljZS5sb2cgPSBsb2c7XHJcbiAgICAgICAgc2VydmljZS5jbGVhclN1YnNjcmliZXJzID0gY2xlYXJTdWJzY3JpYmVycztcclxuICAgICAgICBzZXJ2aWNlLm9uTWVzc2FnZSA9IG9uTWVzc2FnZTtcclxuICAgICAgICBzZXJ2aWNlLnJlYWQgPSByZWFkO1xyXG5cclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9nKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJlc3BvbmRlci5ub3RpZnkocmVhZCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVhZCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2xlYXJTdWJzY3JpYmVycygpIHtcclxuICAgICAgICAgICAgcmVzcG9uZGVyID0gJHEuZGVmZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uTWVzc2FnZShjYWxsYmFjaykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uZGVyLnByb21pc2UudGhlbih1bmRlZmluZWQsIHVuZGVmaW5lZCwgY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSgpKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdmbHlicml4Q29tbW9uJykuZmFjdG9yeSgnZGV2aWNlQ29uZmlnJywgZGV2aWNlQ29uZmlnKTtcclxuXHJcbiAgICBkZXZpY2VDb25maWcuJGluamVjdCA9IFsnc2VyaWFsJywgJ2NvbW1hbmRMb2cnLCAnZmlybXdhcmVWZXJzaW9uJywgJ3NlcmlhbGl6YXRpb25IYW5kbGVyJ107XHJcblxyXG4gICAgZnVuY3Rpb24gZGV2aWNlQ29uZmlnKHNlcmlhbCwgY29tbWFuZExvZywgZmlybXdhcmVWZXJzaW9uLCBzZXJpYWxpemF0aW9uSGFuZGxlcikge1xyXG4gICAgICAgIHZhciBjb25maWc7XHJcblxyXG4gICAgICAgIHZhciBjb25maWdDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb21tYW5kTG9nKCdObyBjYWxsYmFjayBkZWZpbmVkIGZvciByZWNlaXZpbmcgY29uZmlndXJhdGlvbnMhJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGxvZ2dpbmdDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb21tYW5kTG9nKFxyXG4gICAgICAgICAgICAgICAgJ05vIGNhbGxiYWNrIGRlZmluZWQgZm9yIHJlY2VpdmluZyBsb2dnaW5nIHN0YXRlIScgK1xyXG4gICAgICAgICAgICAgICAgJyBDYWxsYmFjayBhcmd1bWVudHM6IChpc0xvZ2dpbmcsIGlzTG9ja2VkLCBkZWxheSknKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZXJpYWwuYWRkT25SZWNlaXZlQ2FsbGJhY2soZnVuY3Rpb24obWVzc2FnZVR5cGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VUeXBlICE9PSAnQ29tbWFuZCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJ3NldF9lZXByb21fZGF0YScgaW4gbWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ29uZmlnRnJvbVJlbW90ZURhdGEobWVzc2FnZS5zZXRfZWVwcm9tX2RhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgnc2V0X3BhcnRpYWxfZWVwcm9tX2RhdGEnIGluIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUNvbmZpZ0Zyb21SZW1vdGVEYXRhKG1lc3NhZ2Uuc2V0X3BhcnRpYWxfZWVwcm9tX2RhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgoJ3NldF9jYXJkX3JlY29yZGluZ19zdGF0ZScgaW4gbWVzc2FnZSkgJiYgKCdzZXRfc2Rfd3JpdGVfZGVsYXknIGluIG1lc3NhZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FyZF9yZWNfc3RhdGUgPSBtZXNzYWdlLnNldF9jYXJkX3JlY29yZGluZ19zdGF0ZTtcclxuICAgICAgICAgICAgICAgIHZhciBzZF93cml0ZV9kZWxheSA9IG1lc3NhZ2Uuc2V0X3NkX3dyaXRlX2RlbGF5O1xyXG4gICAgICAgICAgICAgICAgbG9nZ2luZ0NhbGxiYWNrKGNhcmRfcmVjX3N0YXRlLnJlY29yZF90b19jYXJkLCBjYXJkX3JlY19zdGF0ZS5sb2NrX3JlY29yZGluZ19zdGF0ZSwgc2Rfd3JpdGVfZGVsYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldERlc2lyZWRWZXJzaW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmlybXdhcmVWZXJzaW9uLmRlc2lyZWQoKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZXF1ZXN0KCkge1xyXG4gICAgICAgICAgICB2YXIgaGFuZGxlcnMgPSBmaXJtd2FyZVZlcnNpb24uc2VyaWFsaXphdGlvbkhhbmRsZXIoKTtcclxuICAgICAgICAgICAgY29tbWFuZExvZygnUmVxdWVzdGluZyBjdXJyZW50IGNvbmZpZ3VyYXRpb24gZGF0YS4uLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2VyaWFsLnNlbmRTdHJ1Y3R1cmUoJ0NvbW1hbmQnLCB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0X3Jlc3BvbnNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVxX3BhcnRpYWxfZWVwcm9tX2RhdGE6IGhhbmRsZXJzLkNvbmZpZ3VyYXRpb25GbGFnLmVtcHR5KCksXHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlaW5pdCgpIHtcclxuICAgICAgICAgICAgY29tbWFuZExvZygnU2V0dGluZyBmYWN0b3J5IGRlZmF1bHQgY29uZmlndXJhdGlvbiBkYXRhLi4uJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJpYWwuc2VuZFN0cnVjdHVyZSgnQ29tbWFuZCcsIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfcmVzcG9uc2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZWluaXRfZWVwcm9tX2RhdGE6IHRydWUsXHJcbiAgICAgICAgICAgIH0sIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZExvZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSZXF1ZXN0IGZvciBmYWN0b3J5IHJlc2V0IGZhaWxlZDogJyArIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZW5kKG5ld0NvbmZpZykge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VuZENvbmZpZyh7IGNvbmZpZzogbmV3Q29uZmlnLCB0ZW1wb3Jhcnk6IGZhbHNlLCByZXF1ZXN0VXBkYXRlOiB0cnVlIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VuZENvbmZpZyhwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IGZpcm13YXJlVmVyc2lvbi5zZXJpYWxpemF0aW9uSGFuZGxlcigpO1xyXG4gICAgICAgICAgICB2YXIgbWFzayA9IHByb3BlcnRpZXMubWFzayB8fCBoYW5kbGVycy5Db25maWd1cmF0aW9uRmxhZy5lbXB0eSgpO1xyXG4gICAgICAgICAgICB2YXIgbmV3Q29uZmlnID0gcHJvcGVydGllcy5jb25maWcgfHwgY29uZmlnO1xyXG4gICAgICAgICAgICB2YXIgcmVxdWVzdFVwZGF0ZSA9IHByb3BlcnRpZXMucmVxdWVzdFVwZGF0ZSB8fCBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0X3Jlc3BvbnNlOiB0cnVlLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAocHJvcGVydGllcy50ZW1wb3JhcnkpIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2V0X3BhcnRpYWxfdGVtcG9yYXJ5X2NvbmZpZyA9IG5ld0NvbmZpZztcclxuICAgICAgICAgICAgICAgIG1hc2sgPSB7IHNldF9wYXJ0aWFsX3RlbXBvcmFyeV9jb25maWc6IHsgTUFTSzogbWFzayB9IH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNldF9wYXJ0aWFsX2VlcHJvbV9kYXRhID0gbmV3Q29uZmlnO1xyXG4gICAgICAgICAgICAgICAgbWFzayA9IHsgc2V0X3BhcnRpYWxfZWVwcm9tX2RhdGE6IHsgTUFTSzogbWFzayB9IH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbC5zZW5kU3RydWN0dXJlKCdDb21tYW5kJywgbWVzc2FnZSwgdHJ1ZSwgbWFzaykudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0VXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbmZpZ0Zyb21SZW1vdGVEYXRhKGNvbmZpZ0NoYW5nZXMpIHtcclxuICAgICAgICAgICAgLy9jb21tYW5kTG9nKCdSZWNlaXZlZCBjb25maWchJyk7XHJcbiAgICAgICAgICAgIGNvbmZpZyA9IHNlcmlhbGl6YXRpb25IYW5kbGVyLnVwZGF0ZUZpZWxkcyhjb25maWcsIGNvbmZpZ0NoYW5nZXMpO1xyXG4gICAgICAgICAgICB2YXIgdmVyc2lvbiA9IFtjb25maWcudmVyc2lvbi5tYWpvciwgY29uZmlnLnZlcnNpb24ubWlub3IsIGNvbmZpZy52ZXJzaW9uLnBhdGNoXTtcclxuICAgICAgICAgICAgZmlybXdhcmVWZXJzaW9uLnNldCh2ZXJzaW9uKTtcclxuICAgICAgICAgICAgaWYgKCFmaXJtd2FyZVZlcnNpb24uc3VwcG9ydGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbW1hbmRMb2coJ1JlY2VpdmVkIGFuIHVuc3VwcG9ydGVkIGNvbmZpZ3VyYXRpb24hJyk7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kTG9nKFxyXG4gICAgICAgICAgICAgICAgICAgICdGb3VuZCB2ZXJzaW9uOiAnICsgdmVyc2lvblswXSArICcuJyArIHZlcnNpb25bMV0gKyAnLicgKyB2ZXJzaW9uWzJdICArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAtLS0gTmV3ZXN0IHZlcnNpb246ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcm13YXJlVmVyc2lvbi5kZXNpcmVkS2V5KCkgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbW1hbmRMb2coXHJcbiAgICAgICAgICAgICAgICAgICAgJ1JlY2VpdmVkIGNvbmZpZ3VyYXRpb24gZGF0YSAodicgK1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb25bMF0gKyAnLicgKyB2ZXJzaW9uWzFdICsgJy4nICsgdmVyc2lvblsyXSArJyknKTtcclxuICAgICAgICAgICAgICAgIGNvbmZpZ0NhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldENvbmZpZ0NhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZ0NhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRMb2dnaW5nQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgbG9nZ2luZ0NhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRDb25maWcoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25maWcgPSBmaXJtd2FyZVZlcnNpb24uc2VyaWFsaXphdGlvbkhhbmRsZXIoKS5Db25maWd1cmF0aW9uLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IHJlcXVlc3QsXHJcbiAgICAgICAgICAgIHJlaW5pdDogcmVpbml0LFxyXG4gICAgICAgICAgICBzZW5kOiBzZW5kLFxyXG4gICAgICAgICAgICBzZW5kQ29uZmlnOiBzZW5kQ29uZmlnLFxyXG4gICAgICAgICAgICBnZXRDb25maWc6IGdldENvbmZpZyxcclxuICAgICAgICAgICAgc2V0Q29uZmlnQ2FsbGJhY2s6IHNldENvbmZpZ0NhbGxiYWNrLFxyXG4gICAgICAgICAgICBzZXRMb2dnaW5nQ2FsbGJhY2s6IHNldExvZ2dpbmdDYWxsYmFjayxcclxuICAgICAgICAgICAgZ2V0RGVzaXJlZFZlcnNpb246IGdldERlc2lyZWRWZXJzaW9uLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnZmx5YnJpeENvbW1vbicpLmZhY3RvcnkoJ2Zpcm13YXJlVmVyc2lvbicsIGZpcm13YXJlVmVyc2lvbik7XHJcblxyXG4gICAgZmlybXdhcmVWZXJzaW9uLiRpbmplY3QgPSBbJ3NlcmlhbGl6YXRpb25IYW5kbGVyJ107XHJcblxyXG4gICAgZnVuY3Rpb24gZmlybXdhcmVWZXJzaW9uKHNlcmlhbGl6YXRpb25IYW5kbGVyKSB7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBbMCwgMCwgMF07XHJcbiAgICAgICAgdmFyIGtleSA9ICcwLjAuMCc7XHJcbiAgICAgICAgdmFyIHN1cHBvcnRlZCA9IHtcclxuICAgICAgICAgICAgJzEuNC4wJzogdHJ1ZSxcclxuICAgICAgICAgICAgJzEuNS4wJzogdHJ1ZSxcclxuICAgICAgICAgICAgJzEuNS4xJzogdHJ1ZSxcclxuICAgICAgICAgICAgJzEuNi4wJzogdHJ1ZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZGVzaXJlZCA9IFsxLCA2LCAwXTtcclxuICAgICAgICB2YXIgZGVzaXJlZEtleSA9ICcxLjYuMCc7XHJcblxyXG4gICAgICAgIHZhciBkZWZhdWx0U2VyaWFsaXphdGlvbkhhbmRsZXIgPSBzZXJpYWxpemF0aW9uSGFuZGxlci5nZXRIYW5kbGVyKGRlc2lyZWRLZXkpO1xyXG4gICAgICAgIHZhciBjdXJyZW50U2VyaWFsaXphdGlvbkhhbmRsZXIgPSBkZWZhdWx0U2VyaWFsaXphdGlvbkhhbmRsZXI7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZlcnNpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGtleSA9IHZhbHVlLmpvaW4oJy4nKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZXJpYWxpemF0aW9uSGFuZGxlciA9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXphdGlvbkhhbmRsZXIuZ2V0SGFuZGxlcihkZXNpcmVkS2V5KSB8fCBkZWZhdWx0U2VyaWFsaXphdGlvbkhhbmRsZXI7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVyc2lvbjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAga2V5OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBrZXk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1cHBvcnRlZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwcG9ydGVkW2tleV0gPT09IHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlc2lyZWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlc2lyZWQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlc2lyZWRLZXk6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlc2lyZWRLZXk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YXRpb25IYW5kbGVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50U2VyaWFsaXphdGlvbkhhbmRsZXI7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnZmx5YnJpeENvbW1vbicpLmZhY3RvcnkoJ2xlZCcsIGxlZCk7XHJcblxyXG4gICAgbGVkLiRpbmplY3QgPSBbJ2RldmljZUNvbmZpZycsICdmaXJtd2FyZVZlcnNpb24nXTtcclxuXHJcbiAgICBmdW5jdGlvbiBsZWQoZGV2aWNlQ29uZmlnLCBmaXJtd2FyZVZlcnNpb24pIHtcclxuICAgICAgICB2YXIgTGVkUGF0dGVybnMgPSB7XHJcbiAgICAgICAgICAgIE5PX09WRVJSSURFOiAwLFxyXG4gICAgICAgICAgICBGTEFTSDogMSxcclxuICAgICAgICAgICAgQkVBQ09OOiAyLFxyXG4gICAgICAgICAgICBCUkVBVEhFOiAzLFxyXG4gICAgICAgICAgICBBTFRFUk5BVEU6IDQsXHJcbiAgICAgICAgICAgIFNPTElEOiA1LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBrZXlzID0gWydyaWdodF9mcm9udCcsICdyaWdodF9iYWNrJywgJ2xlZnRfZnJvbnQnLCAnbGVmdF9iYWNrJ107XHJcbiAgICAgICAgdmFyIGNvbG9ycyA9IHt9O1xyXG5cclxuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICAgIGNvbG9yc1trZXldID0ge1xyXG4gICAgICAgICAgICAgICAgcmVkOiAwLFxyXG4gICAgICAgICAgICAgICAgZ3JlZW46IDAsXHJcbiAgICAgICAgICAgICAgICBibHVlOiAwLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBsZWRTdGF0ZSA9IHtcclxuICAgICAgICAgICAgc3RhdHVzOiA2NTUzNSxcclxuICAgICAgICAgICAgcGF0dGVybjogTGVkUGF0dGVybnMuU09MSUQsXHJcbiAgICAgICAgICAgIGNvbG9yczogY29sb3JzLFxyXG4gICAgICAgICAgICBpbmRpY2F0b3JfcmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgaW5kaWNhdG9yX2dyZWVuOiBmYWxzZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY29uZmlnUGFydCA9IHsgbGVkX3N0YXRlczogW2xlZFN0YXRlXSB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXQoXHJcbiAgICAgICAgICAgIGNvbG9yX3JmLCBjb2xvcl9yYiwgY29sb3JfbGYsIGNvbG9yX2xiLCBwYXR0ZXJuLCByZWQsIGdyZWVuKSB7XHJcbiAgICAgICAgICAgIGxlZFN0YXRlLnN0YXR1cyA9IGZpcm13YXJlVmVyc2lvbi5zZXJpYWxpemF0aW9uSGFuZGxlcigpLlN0YXR1c0ZsYWcuZW1wdHkoKTtcclxuICAgICAgICAgICAgaWYgKHBhdHRlcm4gPiAwICYmIHBhdHRlcm4gPCA2KSB7XHJcbiAgICAgICAgICAgICAgICBsZWRTdGF0ZS5wYXR0ZXJuID0gcGF0dGVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBbY29sb3JfcmYsIGNvbG9yX3JiLCBjb2xvcl9sZiwgY29sb3JfbGJdLmZvckVhY2goZnVuY3Rpb24oXHJcbiAgICAgICAgICAgICAgICBjb2xvciwgaWR4KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHYgPSBjb2xvcnNba2V5c1tpZHhdXTtcclxuICAgICAgICAgICAgICAgIHYucmVkID0gY29sb3IucmVkO1xyXG4gICAgICAgICAgICAgICAgdi5ncmVlbiA9IGNvbG9yLmdyZWVuO1xyXG4gICAgICAgICAgICAgICAgdi5ibHVlID0gY29sb3IuYmx1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbGVkU3RhdGUuaW5kaWNhdG9yX3JlZCA9IHJlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZ3JlZW4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbGVkU3RhdGUuaW5kaWNhdG9yX2dyZWVuID0gZ3JlZW47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFwcGx5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRTaW1wbGUocmVkLCBncmVlbiwgYmx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgY29sb3IgPSB7cmVkOiByZWQgfHwgMCwgZ3JlZW46IGdyZWVuIHx8IDAsIGJsdWU6IGJsdWUgfHwgMH07XHJcbiAgICAgICAgICAgIHNldChjb2xvciwgY29sb3IsIGNvbG9yLCBjb2xvciwgTGVkUGF0dGVybnMuU09MSUQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYXBwbHkoKSB7XHJcbiAgICAgICAgICAgIGRldmljZUNvbmZpZy5zZW5kQ29uZmlnKHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZzogY29uZmlnUGFydCxcclxuICAgICAgICAgICAgICAgIHRlbXBvcmFyeTogdHJ1ZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZXQ6IHNldCxcclxuICAgICAgICAgICAgc2V0U2ltcGxlOiBzZXRTaW1wbGUsXHJcbiAgICAgICAgICAgIHBhdHRlcm5zOiBMZWRQYXR0ZXJucyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxufSgpKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdmbHlicml4Q29tbW9uJykuZmFjdG9yeSgncmNEYXRhJywgcmNEYXRhKTtcclxuXHJcbiAgICByY0RhdGEuJGluamVjdCA9IFsnc2VyaWFsJ107XHJcblxyXG4gICAgZnVuY3Rpb24gcmNEYXRhKHNlcmlhbCkge1xyXG4gICAgICAgIHZhciBBVVggPSB7XHJcbiAgICAgICAgICAgIExPVzogMCxcclxuICAgICAgICAgICAgTUlEOiAxLFxyXG4gICAgICAgICAgICBISUdIOiAyLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGF1eE5hbWVzID0gWydsb3cnLCAnbWlkJywgJ2hpZ2gnXTtcclxuXHJcbiAgICAgICAgdmFyIHRocm90dGxlID0gLTE7XHJcbiAgICAgICAgdmFyIHBpdGNoID0gMDtcclxuICAgICAgICB2YXIgcm9sbCA9IDA7XHJcbiAgICAgICAgdmFyIHlhdyA9IDA7XHJcbiAgICAgICAgLy8gZGVmYXVsdHMgdG8gaGlnaCAtLSBsb3cgaXMgZW5hYmxpbmc7IGhpZ2ggaXMgZGlzYWJsaW5nXHJcbiAgICAgICAgdmFyIGF1eDEgPSBBVVguSElHSDtcclxuICAgICAgICAvLyBkZWZhdWx0cyB0byA/PyAtLSBuZWVkIHRvIGNoZWNrIHRyYW5zbWl0dGVyIGJlaGF2aW9yXHJcbiAgICAgICAgdmFyIGF1eDIgPSBBVVguSElHSDtcclxuXHJcbiAgICAgICAgdmFyIHVyZ2VudCA9IHRydWU7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNldFRocm90dGxlOiBzZXRUaHJvdHRsZSxcclxuICAgICAgICAgICAgc2V0UGl0Y2g6IHNldFBpdGNoLFxyXG4gICAgICAgICAgICBzZXRSb2xsOiBzZXRSb2xsLFxyXG4gICAgICAgICAgICBzZXRZYXc6IHNldFlhdyxcclxuICAgICAgICAgICAgc2V0QXV4MTogc2V0QXV4MSxcclxuICAgICAgICAgICAgc2V0QXV4Mjogc2V0QXV4MixcclxuICAgICAgICAgICAgZ2V0VGhyb3R0bGU6IGdldFRocm90dGxlLFxyXG4gICAgICAgICAgICBnZXRQaXRjaDogZ2V0UGl0Y2gsXHJcbiAgICAgICAgICAgIGdldFJvbGw6IGdldFJvbGwsXHJcbiAgICAgICAgICAgIGdldFlhdzogZ2V0WWF3LFxyXG4gICAgICAgICAgICBnZXRBdXgxOiBnZXRBdXgxLFxyXG4gICAgICAgICAgICBnZXRBdXgyOiBnZXRBdXgyLFxyXG4gICAgICAgICAgICBBVVg6IEFVWCxcclxuICAgICAgICAgICAgc2VuZDogc2VuZCxcclxuICAgICAgICAgICAgZm9yY2VOZXh0U2VuZDogZm9yY2VOZXh0U2VuZCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZW5kKCkge1xyXG4gICAgICAgICAgICBpZiAoIXVyZ2VudCAmJiBzZXJpYWwuYnVzeSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXJnZW50ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29tbWFuZCA9IHt9O1xyXG5cclxuICAgICAgICAgICAgLy8gaW52ZXJ0IHBpdGNoIGFuZCByb2xsXHJcbiAgICAgICAgICAgIHZhciB0aHJvdHRsZV90aHJlc2hvbGQgPVxyXG4gICAgICAgICAgICAgICAgLTAuODsgIC8vIGtlZXAgYm90dG9tIDEwJSBvZiB0aHJvdHRsZSBzdGljayB0byBtZWFuICdvZmYnXHJcbiAgICAgICAgICAgIGNvbW1hbmQudGhyb3R0bGUgPSBjb25zdHJhaW4oXHJcbiAgICAgICAgICAgICAgICAodGhyb3R0bGUgLSB0aHJvdHRsZV90aHJlc2hvbGQpICogNDA5NSAvXHJcbiAgICAgICAgICAgICAgICAgICAgKDEgLSB0aHJvdHRsZV90aHJlc2hvbGQpLFxyXG4gICAgICAgICAgICAgICAgMCwgNDA5NSk7XHJcbiAgICAgICAgICAgIGNvbW1hbmQucGl0Y2ggPVxyXG4gICAgICAgICAgICAgICAgY29uc3RyYWluKC0oYXBwbHlEZWFkem9uZShwaXRjaCwgMC4xKSkgKiA0MDk1IC8gMiwgLTIwNDcsIDIwNDcpO1xyXG4gICAgICAgICAgICBjb21tYW5kLnJvbGwgPVxyXG4gICAgICAgICAgICAgICAgY29uc3RyYWluKChhcHBseURlYWR6b25lKHJvbGwsIDAuMSkpICogNDA5NSAvIDIsIC0yMDQ3LCAyMDQ3KTtcclxuICAgICAgICAgICAgY29tbWFuZC55YXcgPVxyXG4gICAgICAgICAgICAgICAgY29uc3RyYWluKC0oYXBwbHlEZWFkem9uZSh5YXcsIDAuMSkpICogNDA5NSAvIDIsIC0yMDQ3LCAyMDQ3KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhdXhfbWFzayA9IHt9O1xyXG4gICAgICAgICAgICAvLyBhdXgxX2xvdywgYXV4MV9taWQsIGF1eDFfaGlnaCwgYW5kIHNhbWUgd2l0aCBhdXgyXHJcbiAgICAgICAgICAgIGF1eF9tYXNrWydhdXgxXycgKyBhdXhOYW1lc1thdXgxXV0gPSB0cnVlO1xyXG4gICAgICAgICAgICBhdXhfbWFza1snYXV4Ml8nICsgYXV4TmFtZXNbYXV4Ml1dID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXJpYWwuc2VuZFN0cnVjdHVyZSgnQ29tbWFuZCcsIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfcmVzcG9uc2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzZXRfc2VyaWFsX3JjOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBjb21tYW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1eF9tYXNrOiBhdXhfbWFzayxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldFRocm90dGxlKHYpIHtcclxuICAgICAgICAgICAgdGhyb3R0bGUgPSB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0UGl0Y2godikge1xyXG4gICAgICAgICAgICBwaXRjaCA9IHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRSb2xsKHYpIHtcclxuICAgICAgICAgICAgcm9sbCA9IHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRZYXcodikge1xyXG4gICAgICAgICAgICB5YXcgPSB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0QXV4MSh2KSB7XHJcbiAgICAgICAgICAgIGF1eDEgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigyLCB2KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRBdXgyKHYpIHtcclxuICAgICAgICAgICAgYXV4MiA9IE1hdGgubWF4KDAsIE1hdGgubWluKDIsIHYpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFRocm90dGxlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhyb3R0bGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRQaXRjaCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBpdGNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Um9sbCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJvbGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRZYXcoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB5YXc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRBdXgxKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXV4MTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEF1eDIoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdXgyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZm9yY2VOZXh0U2VuZCgpIHtcclxuICAgICAgICAgICAgdXJnZW50ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbnN0cmFpbih4LCB4bWluLCB4bWF4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCh4bWluLCBNYXRoLm1pbih4LCB4bWF4KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhcHBseURlYWR6b25lKHZhbHVlLCBkZWFkem9uZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPiBkZWFkem9uZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIC0gZGVhZHpvbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgLWRlYWR6b25lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKyBkZWFkem9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnZmx5YnJpeENvbW1vbicpLmZhY3RvcnkoJ3NlcmlhbCcsIHNlcmlhbCk7XHJcblxyXG4gICAgc2VyaWFsLiRpbmplY3QgPSBbJyR0aW1lb3V0JywgJyRxJywgJ2NvYnMnLCAnY29tbWFuZExvZycsICdmaXJtd2FyZVZlcnNpb24nLCAnc2VyaWFsaXphdGlvbkhhbmRsZXInXTtcclxuXHJcbiAgICBmdW5jdGlvbiBzZXJpYWwoJHRpbWVvdXQsICRxLCBjb2JzLCBjb21tYW5kTG9nLCBmaXJtd2FyZVZlcnNpb24sIHNlcmlhbGl6YXRpb25IYW5kbGVyKSB7XHJcbiAgICAgICAgdmFyIE1lc3NhZ2VUeXBlID0ge1xyXG4gICAgICAgICAgICBTdGF0ZTogMCxcclxuICAgICAgICAgICAgQ29tbWFuZDogMSxcclxuICAgICAgICAgICAgRGVidWdTdHJpbmc6IDMsXHJcbiAgICAgICAgICAgIEhpc3RvcnlEYXRhOiA0LFxyXG4gICAgICAgICAgICBQcm90b2NvbDogMTI4LFxyXG4gICAgICAgICAgICBSZXNwb25zZTogMjU1LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBhY2tub3dsZWRnZXMgPSBbXTtcclxuICAgICAgICB2YXIgYmFja2VuZCA9IG5ldyBCYWNrZW5kKCk7XHJcblxyXG4gICAgICAgIHZhciBvblJlY2VpdmVMaXN0ZW5lcnMgPSBbXTtcclxuXHJcbiAgICAgICAgdmFyIGNvYnNSZWFkZXIgPSBuZXcgY29icy5SZWFkZXIoMTAwMDApO1xyXG4gICAgICAgIHZhciBieXRlc0hhbmRsZXIgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIEJhY2tlbmQoKSB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBCYWNrZW5kLnByb3RvdHlwZS5idXN5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBCYWNrZW5kLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBjb21tYW5kTG9nKCdObyBcInNlbmRcIiBkZWZpbmVkIGZvciBzZXJpYWwgYmFja2VuZCcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIEJhY2tlbmQucHJvdG90eXBlLm9uUmVhZCA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgY29tbWFuZExvZygnTm8gXCJvblJlYWRcIiBkZWZpbmVkIGZvciBzZXJpYWwgYmFja2VuZCcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBNZXNzYWdlVHlwZUludmVyc2lvbiA9IFtdO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKE1lc3NhZ2VUeXBlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgICBNZXNzYWdlVHlwZUludmVyc2lvbltNZXNzYWdlVHlwZVtrZXldXSA9IGtleTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYWRkT25SZWNlaXZlQ2FsbGJhY2soZnVuY3Rpb24obWVzc2FnZVR5cGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VUeXBlID09PSAnUmVzcG9uc2UnKSB7XHJcbiAgICAgICAgICAgICAgICBhY2tub3dsZWRnZShtZXNzYWdlLm1hc2ssIG1lc3NhZ2UuYWNrKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlVHlwZSA9PT0gJ1Byb3RvY29sJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBtZXNzYWdlLnJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemF0aW9uSGFuZGxlci5hZGRIYW5kbGVyKGRhdGEudmVyc2lvbiwgZGF0YS5zdHJ1Y3R1cmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJ1c3k6IGJ1c3ksXHJcbiAgICAgICAgICAgIHNlbmRTdHJ1Y3R1cmU6IHNlbmRTdHJ1Y3R1cmUsXHJcbiAgICAgICAgICAgIHNldEJhY2tlbmQ6IHNldEJhY2tlbmQsXHJcbiAgICAgICAgICAgIGFkZE9uUmVjZWl2ZUNhbGxiYWNrOiBhZGRPblJlY2VpdmVDYWxsYmFjayxcclxuICAgICAgICAgICAgcmVtb3ZlT25SZWNlaXZlQ2FsbGJhY2s6IHJlbW92ZU9uUmVjZWl2ZUNhbGxiYWNrLFxyXG4gICAgICAgICAgICBzZXRCeXRlc0hhbmRsZXI6IHNldEJ5dGVzSGFuZGxlcixcclxuICAgICAgICAgICAgaGFuZGxlUG9zdENvbm5lY3Q6IGhhbmRsZVBvc3RDb25uZWN0LFxyXG4gICAgICAgICAgICBCYWNrZW5kOiBCYWNrZW5kLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEJhY2tlbmQodikge1xyXG4gICAgICAgICAgICBiYWNrZW5kID0gdjtcclxuICAgICAgICAgICAgYmFja2VuZC5vblJlYWQgPSByZWFkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUG9zdENvbm5lY3QoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0RmlybXdhcmVWZXJzaW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZXF1ZXN0RmlybXdhcmVWZXJzaW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VuZFN0cnVjdHVyZSgnQ29tbWFuZCcsIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfcmVzcG9uc2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZXFfcGFydGlhbF9lZXByb21fZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNlbmRTdHJ1Y3R1cmUobWVzc2FnZVR5cGUsIGRhdGEsIGxvZ19zZW5kLCBleHRyYU1hc2spIHtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VUeXBlID09PSAnU3RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gcHJvY2Vzc1N0YXRlT3V0cHV0KGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IGZpcm13YXJlVmVyc2lvbi5zZXJpYWxpemF0aW9uSGFuZGxlcigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgaWYgKCEobWVzc2FnZVR5cGUgaW4gTWVzc2FnZVR5cGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS5yZWplY3QoJ01lc3NhZ2UgdHlwZSBcIicgKyBtZXNzYWdlVHlwZSArXHJcbiAgICAgICAgICAgICAgICAgICAgJ1wiIG5vdCBzdXBwb3J0ZWQgYnkgYXBwLCBzdXBwb3J0ZWQgbWVzc2FnZSB0eXBlcyBhcmU6JyArXHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoTWVzc2FnZVR5cGUpLmpvaW4oJywgJykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb21pc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCEobWVzc2FnZVR5cGUgaW4gaGFuZGxlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS5yZWplY3QoJ01lc3NhZ2UgdHlwZSBcIicgKyBtZXNzYWdlVHlwZSArXHJcbiAgICAgICAgICAgICAgICAgICAgJ1wiIG5vdCBzdXBwb3J0ZWQgYnkgZmlybXdhcmUsIHN1cHBvcnRlZCBtZXNzYWdlIHR5cGVzIGFyZTonICtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhoYW5kbGVycykuam9pbignLCAnKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucHJvbWlzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdHlwZUNvZGUgPSBNZXNzYWdlVHlwZVttZXNzYWdlVHlwZV07XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVyID0gaGFuZGxlcnNbbWVzc2FnZVR5cGVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGhhbmRsZXIuYnl0ZUNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZXJpYWxpemVyID0gbmV3IHNlcmlhbGl6YXRpb25IYW5kbGVyLlNlcmlhbGl6ZXIobmV3IERhdGFWaWV3KGJ1ZmZlci5idWZmZXIpKTtcclxuICAgICAgICAgICAgaGFuZGxlci5lbmNvZGUoc2VyaWFsaXplciwgZGF0YSwgZXh0cmFNYXNrKTtcclxuICAgICAgICAgICAgdmFyIG1hc2sgPSBoYW5kbGVyLm1hc2tBcnJheShkYXRhLCBleHRyYU1hc2spO1xyXG4gICAgICAgICAgICBpZiAobWFzay5sZW5ndGggPCA1KSB7XHJcbiAgICAgICAgICAgICAgICBtYXNrID0gKG1hc2tbMF0gPDwgMCkgfCAobWFza1sxXSA8PCA4KSB8IChtYXNrWzJdIDw8IDE2KSB8IChtYXNrWzNdIDw8IDI0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGFMZW5ndGggPSBzZXJpYWxpemVyLmluZGV4O1xyXG5cclxuICAgICAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGFMZW5ndGggKyAzKTtcclxuICAgICAgICAgICAgb3V0cHV0WzBdID0gb3V0cHV0WzFdID0gdHlwZUNvZGU7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGRhdGFMZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXRbMF0gXj0gb3V0cHV0W2lkeCArIDJdID0gYnVmZmVyW2lkeF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0W2RhdGFMZW5ndGggKyAyXSA9IDA7XHJcblxyXG4gICAgICAgICAgICBhY2tub3dsZWRnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBtYXNrLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYmFja2VuZC5zZW5kKG5ldyBVaW50OEFycmF5KGNvYnMuZW5jb2RlKG91dHB1dCkpKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobG9nX3NlbmQpIHtcclxuICAgICAgICAgICAgICAgIGNvbW1hbmRMb2coJ1NlbmRpbmcgY29tbWFuZCAnICsgdHlwZUNvZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJ1c3koKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYWNrZW5kLmJ1c3koKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEJ5dGVzSGFuZGxlcihoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGJ5dGVzSGFuZGxlciA9IGhhbmRsZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWFkKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGJ5dGVzSGFuZGxlcilcclxuICAgICAgICAgICAgICAgIGJ5dGVzSGFuZGxlcihkYXRhLCBwcm9jZXNzRGF0YSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGNvYnNSZWFkZXIucmVhZEJ5dGVzKGRhdGEsIHByb2Nlc3NEYXRhLCByZXBvcnRJc3N1ZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVwb3J0SXNzdWVzKGlzc3VlLCB0ZXh0KSB7XHJcbiAgICAgICAgICAgIGNvbW1hbmRMb2coJ0NPQlMgZGVjb2RpbmcgZmFpbGVkICgnICsgaXNzdWUgKyAnKTogJyArIHRleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkT25SZWNlaXZlQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgb25SZWNlaXZlTGlzdGVuZXJzID0gb25SZWNlaXZlTGlzdGVuZXJzLmNvbmNhdChbY2FsbGJhY2tdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZU9uUmVjZWl2ZUNhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIG9uUmVjZWl2ZUxpc3RlbmVycyA9IG9uUmVjZWl2ZUxpc3RlbmVycy5maWx0ZXIoZnVuY3Rpb24oY2IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYiAhPT0gY2FsbGJhY2s7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWNrbm93bGVkZ2UobWFzaywgdmFsdWUpIHtcclxuICAgICAgICAgICAgd2hpbGUgKGFja25vd2xlZGdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGFja25vd2xlZGdlcy5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHYubWFzayBeIG1hc2spIHtcclxuICAgICAgICAgICAgICAgICAgICB2LnJlc3BvbnNlLnJlamVjdCgnTWlzc2luZyBBQ0snKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciByZWxheGVkTWFzayA9IG1hc2s7XHJcbiAgICAgICAgICAgICAgICByZWxheGVkTWFzayAmPSB+MTtcclxuICAgICAgICAgICAgICAgIGlmIChyZWxheGVkTWFzayBeIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5yZXNwb25zZS5yZWplY3QoJ1JlcXVlc3Qgd2FzIG5vdCBmdWxseSBwcm9jZXNzZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHYucmVzcG9uc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGJ5dGVzKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlVHlwZSA9IE1lc3NhZ2VUeXBlSW52ZXJzaW9uW2J5dGVzWzBdXTtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBmaXJtd2FyZVZlcnNpb24uc2VyaWFsaXphdGlvbkhhbmRsZXIoKVttZXNzYWdlVHlwZV07XHJcbiAgICAgICAgICAgIGlmICghbWVzc2FnZVR5cGUgfHwgIWhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbW1hbmRMb2coJ0lsbGVnYWwgbWVzc2FnZSB0eXBlIHBhc3NlZCBmcm9tIGZpcm13YXJlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBzZXJpYWxpemVyID0gbmV3IHNlcmlhbGl6YXRpb25IYW5kbGVyLlNlcmlhbGl6ZXIobmV3IERhdGFWaWV3KGJ5dGVzLmJ1ZmZlciwgMSkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBoYW5kbGVyLmRlY29kZShzZXJpYWxpemVyKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kTG9nKCdVbnJlY29nbml6ZWQgbWVzc2FnZSBmb3JtYXQgcmVjZWl2ZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWVzc2FnZVR5cGUgPT09ICdTdGF0ZScpIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBwcm9jZXNzU3RhdGVJbnB1dChtZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvblJlY2VpdmVMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihsaXN0ZW5lcikge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIobWVzc2FnZVR5cGUsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBsYXN0X3RpbWVzdGFtcF91cyA9IDA7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NTdGF0ZUlucHV0KHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHN0YXRlID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUpO1xyXG4gICAgICAgICAgICB2YXIgc2VyaWFsX3VwZGF0ZV9yYXRlX0h6ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmICgndGltZXN0YW1wX3VzJyBpbiBzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUuc2VyaWFsX3VwZGF0ZV9yYXRlX2VzdGltYXRlID0gMTAwMDAwMCAvIChzdGF0ZS50aW1lc3RhbXBfdXMgLSBsYXN0X3RpbWVzdGFtcF91cyk7XHJcbiAgICAgICAgICAgICAgICBsYXN0X3RpbWVzdGFtcF91cyA9IHN0YXRlLnRpbWVzdGFtcF91cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJ3RlbXBlcmF0dXJlJyBpbiBzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUudGVtcGVyYXR1cmUgLz0gMTAwLjA7ICAvLyB0ZW1wZXJhdHVyZSBnaXZlbiBpbiBDZWxzaXVzICogMTAwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCdwcmVzc3VyZScgaW4gc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnByZXNzdXJlIC89IDI1Ni4wOyAgLy8gcHJlc3N1cmUgZ2l2ZW4gaW4gKFEyNC44KSBmb3JtYXRcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc1N0YXRlT3V0cHV0KHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHN0YXRlID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUpO1xyXG4gICAgICAgICAgICBpZiAoJ3RlbXBlcmF0dXJlJyBpbiBzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUudGVtcGVyYXR1cmUgKj0gMTAwLjA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCdwcmVzc3VyZScgaW4gc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnByZXNzdXJlICo9IDI1Ni4wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgc2VyaWFsaXphdGlvbkhhbmRsZXIuJGluamVjdCA9IFtdO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdmbHlicml4Q29tbW9uJykuZmFjdG9yeSgnc2VyaWFsaXphdGlvbkhhbmRsZXInLCBzZXJpYWxpemF0aW9uSGFuZGxlcik7XHJcblxyXG4gICAgZnVuY3Rpb24gc2VyaWFsaXphdGlvbkhhbmRsZXIoKSB7XHJcbiAgICAgICAgdmFyIGhhbmRsZXJDYWNoZSA9IHt9O1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gJ1ZlcnNpb24gPSB7IG1ham9yOiB1OCwgbWlub3I6IHU4LCBwYXRjaDogdTggfTsnO1xyXG4gICAgICAgIHZhciBjb25maWdJZCA9ICdDb25maWdJRCA9IHUzMjsnO1xyXG5cclxuICAgICAgICB2YXIgdmVjdG9yM2YgPSAnVmVjdG9yM2YgPSB7IHg6IGYzMiwgeTogZjMyLCB6OiBmMzIgfTsnO1xyXG5cclxuICAgICAgICB2YXIgcGNiVHJhbnNmb3JtID0gJ1BjYlRyYW5zZm9ybSA9IHsgb3JpZW50YXRpb246IFZlY3RvcjNmLCB0cmFuc2xhdGlvbjogVmVjdG9yM2YgfTsnO1xyXG4gICAgICAgIHZhciBtaXhUYWJsZSA9ICdNaXhUYWJsZSA9IHsgZno6IFtpODo4XSwgdHg6IFtpODo4XSwgdHk6IFtpODo4XSwgdHo6IFtpODo4XSB9Oyc7XHJcbiAgICAgICAgdmFyIG1hZ0JpYXMgPSAnTWFnQmlhcyA9IHsgb2Zmc2V0OiBWZWN0b3IzZiB9Oyc7XHJcbiAgICAgICAgdmFyIGNoYW5uZWxQcm9wZXJ0aWVzID0gJ0NoYW5uZWxQcm9wZXJ0aWVzID0geycgK1xyXG4gICAgICAgICAgICAnYXNzaWdubWVudDogeyB0aHJ1c3Q6IHU4LCBwaXRjaDogdTgsIHJvbGw6IHU4LCB5YXc6IHU4LCBhdXgxOiB1OCwgYXV4MjogdTggfSwnICtcclxuICAgICAgICAgICAgJ2ludmVyc2lvbjogey84LyB0aHJ1c3Q6IHZvaWQsIHBpdGNoOiB2b2lkLCByb2xsOiB2b2lkLCB5YXc6IHZvaWQsIGF1eDE6IHZvaWQsIGF1eDI6IHZvaWQgfSwnICtcclxuICAgICAgICAgICAgJ21pZHBvaW50OiBbdTE2OjZdLCcgK1xyXG4gICAgICAgICAgICAnZGVhZHpvbmU6IFt1MTY6Nl0gfTsnO1xyXG5cclxuICAgICAgICB2YXIgcGlkU2V0dGluZ3MgPSAnUElEU2V0dGluZ3MgPSB7JyArXHJcbiAgICAgICAgICAgICdrcDogZjMyLCcgK1xyXG4gICAgICAgICAgICAna2k6IGYzMiwnICtcclxuICAgICAgICAgICAgJ2tkOiBmMzIsJyArXHJcbiAgICAgICAgICAgICdpbnRlZ3JhbF93aW5kdXBfZ3VhcmQ6IGYzMiwnICtcclxuICAgICAgICAgICAgJ2RfZmlsdGVyX3RpbWU6IGYzMiwnICtcclxuICAgICAgICAgICAgJ3NldHBvaW50X2ZpbHRlcl90aW1lOiBmMzIsJyArXHJcbiAgICAgICAgICAgICdjb21tYW5kX3RvX3ZhbHVlOiBmMzIgfTsnO1xyXG4gICAgICAgIHZhciBwaWRCeXBhc3MgPSAnUElEQnlwYXNzID0gey84LycgK1xyXG4gICAgICAgICAgICAndGhydXN0X21hc3Rlcjogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpdGNoX21hc3Rlcjogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3JvbGxfbWFzdGVyOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAneWF3X21hc3Rlcjogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3RocnVzdF9zbGF2ZTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpdGNoX3NsYXZlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncm9sbF9zbGF2ZTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3lhd19zbGF2ZTogdm9pZH07JztcclxuICAgICAgICB2YXIgcGlkUGFyYW1ldGVyczE0ID0gcGlkQnlwYXNzICsgJ1BJRFBhcmFtZXRlcnMgPSB7JyArXHJcbiAgICAgICAgICAgICd0aHJ1c3RfbWFzdGVyOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3BpdGNoX21hc3RlcjogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdyb2xsX21hc3RlcjogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICd5YXdfbWFzdGVyOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3RocnVzdF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdwaXRjaF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdyb2xsX3NsYXZlOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3lhd19zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdwaWRfYnlwYXNzOiBQSURCeXBhc3MgfTsnO1xyXG4gICAgICAgIHZhciBwaWRQYXJhbWV0ZXJzID0gcGlkQnlwYXNzICsgJ1BJRFBhcmFtZXRlcnMgPSB7JyArXHJcbiAgICAgICAgICAgICd0aHJ1c3RfbWFzdGVyOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3BpdGNoX21hc3RlcjogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdyb2xsX21hc3RlcjogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICd5YXdfbWFzdGVyOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3RocnVzdF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdwaXRjaF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdyb2xsX3NsYXZlOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3lhd19zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICd0aHJ1c3RfZ2FpbjogZjMyLCcgK1xyXG4gICAgICAgICAgICAncGl0Y2hfZ2FpbjogZjMyLCcgK1xyXG4gICAgICAgICAgICAncm9sbF9nYWluOiBmMzIsJyArXHJcbiAgICAgICAgICAgICd5YXdfZ2FpbjogZjMyLCcgK1xyXG4gICAgICAgICAgICAncGlkX2J5cGFzczogUElEQnlwYXNzIH07JztcclxuXHJcbiAgICAgICAgdmFyIHN0YXRlUGFyYW1ldGVycyA9ICdTdGF0ZVBhcmFtZXRlcnMgPSB7IHN0YXRlX2VzdGltYXRpb246IFtmMzI6Ml0sIGVuYWJsZTogW2YzMjoyXSB9Oyc7XHJcblxyXG4gICAgICAgIHZhciBzdGF0dXNGbGFnMTQxNSA9ICdTdGF0dXNGbGFnID0gey8xNi8nICtcclxuICAgICAgICAgICAgJ2Jvb3Q6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdtcHVfZmFpbDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2JtcF9mYWlsOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncnhfZmFpbDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2lkbGU6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdlbmFibGluZzogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2NsZWFyX21wdV9iaWFzOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnc2V0X21wdV9iaWFzOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnZmFpbF9zdGFiaWxpdHk6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdmYWlsX2FuZ2xlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnZW5hYmxlZDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2JhdHRlcnlfbG93OiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAndGVtcF93YXJuaW5nOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbG9nX2Z1bGw6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdmYWlsX290aGVyOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnb3ZlcnJpZGU6IHZvaWQgfTsnO1xyXG5cclxuICAgICAgICB2YXIgc3RhdHVzRmxhZyA9ICdTdGF0dXNGbGFnID0gey8xNi8nICtcclxuICAgICAgICAgICAgJ18wOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnXzE6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdfMjogdm9pZCwnICtcclxuICAgICAgICAgICAgJ25vX3NpZ25hbDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2lkbGU6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdhcm1pbmc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdyZWNvcmRpbmdfc2Q6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdfNzogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2xvb3Bfc2xvdzogdm9pZCwnICtcclxuICAgICAgICAgICAgJ185OiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnYXJtZWQ6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdiYXR0ZXJ5X2xvdzogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2JhdHRlcnlfY3JpdGljYWw6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdsb2dfZnVsbDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2NyYXNoX2RldGVjdGVkOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnb3ZlcnJpZGU6IHZvaWQgfTsnO1xyXG5cclxuICAgICAgICB2YXIgY29sb3IgPSAnQ29sb3IgPSB7IHJlZDogdTgsIGdyZWVuOiB1OCwgYmx1ZTogdTggfTsnO1xyXG4gICAgICAgIHZhciBsZWRTdGF0ZUNvbG9ycyA9ICdMRURTdGF0ZUNvbG9ycyA9IHsnICtcclxuICAgICAgICAgICAgJ3JpZ2h0X2Zyb250OiBDb2xvciwnICtcclxuICAgICAgICAgICAgJ3JpZ2h0X2JhY2s6IENvbG9yLCcgK1xyXG4gICAgICAgICAgICAnbGVmdF9mcm9udDogQ29sb3IsJyArXHJcbiAgICAgICAgICAgICdsZWZ0X2JhY2s6IENvbG9yIH07JztcclxuICAgICAgICB2YXIgbGVkU3RhdGVDYXNlID0gbGVkU3RhdGVDb2xvcnMgKyAnTEVEU3RhdGVDYXNlID0geycgK1xyXG4gICAgICAgICAgICAnc3RhdHVzOiBTdGF0dXNGbGFnLCcgK1xyXG4gICAgICAgICAgICAncGF0dGVybjogdTgsJyArXHJcbiAgICAgICAgICAgICdjb2xvcnM6IExFRFN0YXRlQ29sb3JzLCcgK1xyXG4gICAgICAgICAgICAnaW5kaWNhdG9yX3JlZDogYm9vbCwnICtcclxuICAgICAgICAgICAgJ2luZGljYXRvcl9ncmVlbjogYm9vbCB9Oyc7XHJcbiAgICAgICAgdmFyIGxlZFN0YXRlcyA9ICdMRURTdGF0ZXMgPSBbLzE2L0xFRFN0YXRlQ2FzZToxNl07JztcclxuICAgICAgICB2YXIgbGVkU3RhdGVzRml4ZWQgPSAnTEVEU3RhdGVzRml4ZWQgPSBbTEVEU3RhdGVDYXNlOjE2XTsnO1xyXG5cclxuICAgICAgICB2YXIgZGV2aWNlTmFtZSA9ICdEZXZpY2VOYW1lID0gczk7JztcclxuXHJcbiAgICAgICAgdmFyIHZlbG9jaXR5UGlkQnlwYXNzID0gJ1ZlbG9jaXR5UElEQnlwYXNzID0gey84LycgK1xyXG4gICAgICAgICAgICAnZm9yd2FyZF9tYXN0ZXI6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdyaWdodF9tYXN0ZXI6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICd1cF9tYXN0ZXI6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdfdW51c2VkX21hc3Rlcjogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2ZvcndhcmRfc2xhdmU6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdyaWdodF9zbGF2ZTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3VwX3NsYXZlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnX3VudXNlZF9zbGF2ZTogdm9pZH07JztcclxuXHJcbiAgICAgICAgdmFyIHZlbG9jaXR5UGlkUGFyYW1ldGVycyA9IHZlbG9jaXR5UGlkQnlwYXNzICsgJ1ZlbG9jaXR5UElEUGFyYW1ldGVycyA9IHsnICtcclxuICAgICAgICAgICAgJ2ZvcndhcmRfbWFzdGVyOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3JpZ2h0X21hc3RlcjogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICd1cF9tYXN0ZXI6IFBJRFNldHRpbmdzLCcgK1xyXG4gICAgICAgICAgICAnZm9yd2FyZF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdyaWdodF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICd1cF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdwaWRfYnlwYXNzOiBWZWxvY2l0eVBJREJ5cGFzcyB9Oyc7XHJcblxyXG4gICAgICAgIHZhciBpbmVydGlhbEJpYXMgPSAnSW5lcnRpYWxCaWFzID0geyBhY2NlbDogVmVjdG9yM2YsIGd5cm86IFZlY3RvcjNmIH07JztcclxuXHJcbiAgICAgICAgdmFyIGNvbmZpZzE0MTUgPSAnQ29uZmlndXJhdGlvbiA9IHsvMTYvJyArXHJcbiAgICAgICAgICAgICd2ZXJzaW9uOiBWZXJzaW9uLCcgK1xyXG4gICAgICAgICAgICAnaWQ6IENvbmZpZ0lELCcgK1xyXG4gICAgICAgICAgICAncGNiX3RyYW5zZm9ybTogUGNiVHJhbnNmb3JtLCcgK1xyXG4gICAgICAgICAgICAnbWl4X3RhYmxlOiBNaXhUYWJsZSwnICtcclxuICAgICAgICAgICAgJ21hZ19iaWFzOiBNYWdCaWFzLCcgK1xyXG4gICAgICAgICAgICAnY2hhbm5lbDogQ2hhbm5lbFByb3BlcnRpZXMsJyArXHJcbiAgICAgICAgICAgICdwaWRfcGFyYW1ldGVyczogUElEUGFyYW1ldGVycywnICtcclxuICAgICAgICAgICAgJ3N0YXRlX3BhcmFtZXRlcnM6IFN0YXRlUGFyYW1ldGVycywnICtcclxuICAgICAgICAgICAgJ2xlZF9zdGF0ZXM6IExFRFN0YXRlcywnICtcclxuICAgICAgICAgICAgJ25hbWU6IERldmljZU5hbWUgfTsnO1xyXG5cclxuICAgICAgICB2YXIgY29uZmlnRml4ZWQxNDE1ID0gJ0NvbmZpZ3VyYXRpb25GaXhlZCA9IHsnICtcclxuICAgICAgICAgICAgJ3ZlcnNpb246IFZlcnNpb24sJyArXHJcbiAgICAgICAgICAgICdpZDogQ29uZmlnSUQsJyArXHJcbiAgICAgICAgICAgICdwY2JfdHJhbnNmb3JtOiBQY2JUcmFuc2Zvcm0sJyArXHJcbiAgICAgICAgICAgICdtaXhfdGFibGU6IE1peFRhYmxlLCcgK1xyXG4gICAgICAgICAgICAnbWFnX2JpYXM6IE1hZ0JpYXMsJyArXHJcbiAgICAgICAgICAgICdjaGFubmVsOiBDaGFubmVsUHJvcGVydGllcywnICtcclxuICAgICAgICAgICAgJ3BpZF9wYXJhbWV0ZXJzOiBQSURQYXJhbWV0ZXJzLCcgK1xyXG4gICAgICAgICAgICAnc3RhdGVfcGFyYW1ldGVyczogU3RhdGVQYXJhbWV0ZXJzLCcgK1xyXG4gICAgICAgICAgICAnbGVkX3N0YXRlczogTEVEU3RhdGVzRml4ZWQsJyArXHJcbiAgICAgICAgICAgICduYW1lOiBEZXZpY2VOYW1lIH07JztcclxuXHJcbiAgICAgICAgdmFyIGNvbmZpZyA9ICdDb25maWd1cmF0aW9uID0gey8xNi8nICtcclxuICAgICAgICAgICAgJ3ZlcnNpb246IFZlcnNpb24sJyArXHJcbiAgICAgICAgICAgICdpZDogQ29uZmlnSUQsJyArXHJcbiAgICAgICAgICAgICdwY2JfdHJhbnNmb3JtOiBQY2JUcmFuc2Zvcm0sJyArXHJcbiAgICAgICAgICAgICdtaXhfdGFibGU6IE1peFRhYmxlLCcgK1xyXG4gICAgICAgICAgICAnbWFnX2JpYXM6IE1hZ0JpYXMsJyArXHJcbiAgICAgICAgICAgICdjaGFubmVsOiBDaGFubmVsUHJvcGVydGllcywnICtcclxuICAgICAgICAgICAgJ3BpZF9wYXJhbWV0ZXJzOiBQSURQYXJhbWV0ZXJzLCcgK1xyXG4gICAgICAgICAgICAnc3RhdGVfcGFyYW1ldGVyczogU3RhdGVQYXJhbWV0ZXJzLCcgK1xyXG4gICAgICAgICAgICAnbGVkX3N0YXRlczogTEVEU3RhdGVzLCcgK1xyXG4gICAgICAgICAgICAnbmFtZTogRGV2aWNlTmFtZSwnICtcclxuICAgICAgICAgICAgJ3ZlbG9jaXR5X3BpZF9wYXJhbWV0ZXJzOiBWZWxvY2l0eVBJRFBhcmFtZXRlcnMsJyArXHJcbiAgICAgICAgICAgICdpbmVydGlhbF9iaWFzOiBJbmVydGlhbEJpYXMgfTsnO1xyXG5cclxuICAgICAgICB2YXIgY29uZmlnRml4ZWQgPSAnQ29uZmlndXJhdGlvbkZpeGVkID0geycgK1xyXG4gICAgICAgICAgICAndmVyc2lvbjogVmVyc2lvbiwnICtcclxuICAgICAgICAgICAgJ2lkOiBDb25maWdJRCwnICtcclxuICAgICAgICAgICAgJ3BjYl90cmFuc2Zvcm06IFBjYlRyYW5zZm9ybSwnICtcclxuICAgICAgICAgICAgJ21peF90YWJsZTogTWl4VGFibGUsJyArXHJcbiAgICAgICAgICAgICdtYWdfYmlhczogTWFnQmlhcywnICtcclxuICAgICAgICAgICAgJ2NoYW5uZWw6IENoYW5uZWxQcm9wZXJ0aWVzLCcgK1xyXG4gICAgICAgICAgICAncGlkX3BhcmFtZXRlcnM6IFBJRFBhcmFtZXRlcnMsJyArXHJcbiAgICAgICAgICAgICdzdGF0ZV9wYXJhbWV0ZXJzOiBTdGF0ZVBhcmFtZXRlcnMsJyArXHJcbiAgICAgICAgICAgICdsZWRfc3RhdGVzOiBMRURTdGF0ZXNGaXhlZCwnICtcclxuICAgICAgICAgICAgJ25hbWU6IERldmljZU5hbWUsJyArXHJcbiAgICAgICAgICAgICd2ZWxvY2l0eV9waWRfcGFyYW1ldGVyczogVmVsb2NpdHlQSURQYXJhbWV0ZXJzLCcgK1xyXG4gICAgICAgICAgICAnaW5lcnRpYWxfYmlhczogSW5lcnRpYWxCaWFzIH07JztcclxuXHJcbiAgICAgICAgdmFyIGNvbmZpZ0ZsYWcxNCA9ICdDb25maWd1cmF0aW9uRmxhZyA9IHsvMTYvJyArXHJcbiAgICAgICAgICAgICd2ZXJzaW9uOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnaWQ6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdwY2JfdHJhbnNmb3JtOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbWl4X3RhYmxlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbWFnX2JpYXM6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdjaGFubmVsOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncGlkX3BhcmFtZXRlcnM6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdzdGF0ZV9wYXJhbWV0ZXJzOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbGVkX3N0YXRlczogWy8vIHZvaWQ6MTZdLCcgK1xyXG4gICAgICAgICAgICAnbmFtZTogdm9pZH07JztcclxuXHJcbiAgICAgICAgdmFyIGNvbmZpZ0ZsYWcgPSAnQ29uZmlndXJhdGlvbkZsYWcgPSB7LzE2LycgK1xyXG4gICAgICAgICAgICAndmVyc2lvbjogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2lkOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncGNiX3RyYW5zZm9ybTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ21peF90YWJsZTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ21hZ19iaWFzOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnY2hhbm5lbDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9wYXJhbWV0ZXJzOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnc3RhdGVfcGFyYW1ldGVyczogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2xlZF9zdGF0ZXM6IFsvLyB2b2lkOjE2XSwnICtcclxuICAgICAgICAgICAgJ25hbWU6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICd2ZWxvY2l0eV9waWRfcGFyYW1ldGVyczogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2luZXJ0aWFsX2JpYXM6IHZvaWQgfTsnO1xyXG5cclxuICAgICAgICB2YXIgY29uZmlnRnVsbDE0ID0gdmVjdG9yM2YgKyBwaWRTZXR0aW5ncyArIHZlcnNpb24gKyBjb25maWdJZCArIHBjYlRyYW5zZm9ybSArXHJcbiAgICAgICAgICAgIG1peFRhYmxlICsgbWFnQmlhcyArIGNoYW5uZWxQcm9wZXJ0aWVzICsgcGlkUGFyYW1ldGVyczE0ICsgc3RhdGVQYXJhbWV0ZXJzICtcclxuICAgICAgICAgICAgc3RhdHVzRmxhZzE0MTUgKyBjb2xvciArIGxlZFN0YXRlQ2FzZSArIGxlZFN0YXRlcyArIGxlZFN0YXRlc0ZpeGVkICsgZGV2aWNlTmFtZSArXHJcbiAgICAgICAgICAgIGNvbmZpZzE0MTUgKyBjb25maWdGaXhlZDE0MTUgKyBjb25maWdGbGFnMTQ7XHJcbiAgICAgICAgdmFyIGNvbmZpZ0Z1bGwxNSA9IHZlY3RvcjNmICsgcGlkU2V0dGluZ3MgKyB2ZXJzaW9uICsgY29uZmlnSWQgKyBwY2JUcmFuc2Zvcm0gKyBtaXhUYWJsZSArXHJcbiAgICAgICAgICAgIG1hZ0JpYXMgKyBjaGFubmVsUHJvcGVydGllcyArIHBpZFBhcmFtZXRlcnMgKyBzdGF0ZVBhcmFtZXRlcnMgK1xyXG4gICAgICAgICAgICBzdGF0dXNGbGFnMTQxNSArIGNvbG9yICsgbGVkU3RhdGVDYXNlICsgbGVkU3RhdGVzICsgbGVkU3RhdGVzRml4ZWQgKyBkZXZpY2VOYW1lICtcclxuICAgICAgICAgICAgY29uZmlnMTQxNSArIGNvbmZpZ0ZpeGVkMTQxNSArIGNvbmZpZ0ZsYWc7XHJcbiAgICAgICAgdmFyIGNvbmZpZ0Z1bGwxNiA9IHZlY3RvcjNmICsgcGlkU2V0dGluZ3MgKyB2ZXJzaW9uICsgY29uZmlnSWQgKyBwY2JUcmFuc2Zvcm0gKyBtaXhUYWJsZSArXHJcbiAgICAgICAgICAgIG1hZ0JpYXMgKyBjaGFubmVsUHJvcGVydGllcyArIHBpZFBhcmFtZXRlcnMgKyBzdGF0ZVBhcmFtZXRlcnMgK1xyXG4gICAgICAgICAgICBzdGF0dXNGbGFnICsgY29sb3IgKyBsZWRTdGF0ZUNhc2UgKyBsZWRTdGF0ZXMgKyBsZWRTdGF0ZXNGaXhlZCArIGRldmljZU5hbWUgK1xyXG4gICAgICAgICAgICBpbmVydGlhbEJpYXMgKyB2ZWxvY2l0eVBpZFBhcmFtZXRlcnMgK1xyXG4gICAgICAgICAgICBjb25maWcgKyBjb25maWdGaXhlZCArIGNvbmZpZ0ZsYWc7XHJcblxyXG4gICAgICAgIHZhciBzdGF0ZSA9ICdSb3RhdGlvbiA9IHsgcGl0Y2g6IGYzMiwgcm9sbDogZjMyLCB5YXc6IGYzMiB9OycgK1xyXG4gICAgICAgICAgICAnUElEU3RhdGUgPSB7JyArXHJcbiAgICAgICAgICAgICd0aW1lc3RhbXBfdXM6IHUzMiwnICtcclxuICAgICAgICAgICAgJ2lucHV0OiBmMzIsJyArXHJcbiAgICAgICAgICAgICdzZXRwb2ludDogZjMyLCcgK1xyXG4gICAgICAgICAgICAncF90ZXJtOiBmMzIsJyArXHJcbiAgICAgICAgICAgICdpX3Rlcm06IGYzMiwnICtcclxuICAgICAgICAgICAgJ2RfdGVybTogZjMyIH07JyArXHJcbiAgICAgICAgICAgICdSY0NvbW1hbmQgPSB7IHRocm90dGxlOiBpMTYsIHBpdGNoOiBpMTYsIHJvbGw6IGkxNiwgeWF3OiBpMTYgfTsnICtcclxuICAgICAgICAgICAgJ1N0YXRlID0gey8zMi8nICtcclxuICAgICAgICAgICAgJ3RpbWVzdGFtcF91czogdTMyLCcgK1xyXG4gICAgICAgICAgICAnc3RhdHVzOiBTdGF0dXNGbGFnLCcgK1xyXG4gICAgICAgICAgICAndjBfcmF3OiB1MTYsJyArXHJcbiAgICAgICAgICAgICdpMF9yYXc6IHUxNiwnICtcclxuICAgICAgICAgICAgJ2kxX3JhdzogdTE2LCcgK1xyXG4gICAgICAgICAgICAnYWNjZWw6IFZlY3RvcjNmLCcgK1xyXG4gICAgICAgICAgICAnZ3lybzogVmVjdG9yM2YsJyArXHJcbiAgICAgICAgICAgICdtYWc6IFZlY3RvcjNmLCcgK1xyXG4gICAgICAgICAgICAndGVtcGVyYXR1cmU6IHUxNiwnICtcclxuICAgICAgICAgICAgJ3ByZXNzdXJlOiB1MzIsJyArXHJcbiAgICAgICAgICAgICdwcG06IFtpMTY6Nl0sJyArXHJcbiAgICAgICAgICAgICdhdXhfY2hhbl9tYXNrOiB1OCwnICtcclxuICAgICAgICAgICAgJ2NvbW1hbmQ6IFJjQ29tbWFuZCwnICtcclxuICAgICAgICAgICAgJ2NvbnRyb2w6IHsgZno6IGYzMiwgdHg6IGYzMiwgdHk6IGYzMiwgdHo6IGYzMiB9LCcgK1xyXG4gICAgICAgICAgICAncGlkX21hc3Rlcl9mejogUElEU3RhdGUsJyArXHJcbiAgICAgICAgICAgICdwaWRfbWFzdGVyX3R4OiBQSURTdGF0ZSwnICtcclxuICAgICAgICAgICAgJ3BpZF9tYXN0ZXJfdHk6IFBJRFN0YXRlLCcgK1xyXG4gICAgICAgICAgICAncGlkX21hc3Rlcl90ejogUElEU3RhdGUsJyArXHJcbiAgICAgICAgICAgICdwaWRfc2xhdmVfZno6IFBJRFN0YXRlLCcgK1xyXG4gICAgICAgICAgICAncGlkX3NsYXZlX3R4OiBQSURTdGF0ZSwnICtcclxuICAgICAgICAgICAgJ3BpZF9zbGF2ZV90eTogUElEU3RhdGUsJyArXHJcbiAgICAgICAgICAgICdwaWRfc2xhdmVfdHo6IFBJRFN0YXRlLCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3V0OiBbaTE2OjhdLCcgK1xyXG4gICAgICAgICAgICAna2luZW1hdGljc19hbmdsZTogUm90YXRpb24sJyArXHJcbiAgICAgICAgICAgICdraW5lbWF0aWNzX3JhdGU6IFJvdGF0aW9uLCcgK1xyXG4gICAgICAgICAgICAna2luZW1hdGljc19hbHRpdHVkZTogZjMyLCcgK1xyXG4gICAgICAgICAgICAnbG9vcF9jb3VudDogdTMyIH07JyArXHJcbiAgICAgICAgICAgICdTdGF0ZUZpZWxkcyA9IHsvMzIvJyArXHJcbiAgICAgICAgICAgICd0aW1lc3RhbXBfdXM6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdzdGF0dXM6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICd2MF9yYXc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdpMF9yYXc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdpMV9yYXc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdhY2NlbDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2d5cm86IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdtYWc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICd0ZW1wZXJhdHVyZTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3ByZXNzdXJlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncHBtOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnYXV4X2NoYW5fbWFzazogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2NvbW1hbmQ6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdjb250cm9sOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncGlkX21hc3Rlcl9mejogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9tYXN0ZXJfdHg6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdwaWRfbWFzdGVyX3R5OiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncGlkX21hc3Rlcl90ejogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9zbGF2ZV9mejogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9zbGF2ZV90eDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9zbGF2ZV90eTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9zbGF2ZV90ejogdm9pZCwnICtcclxuICAgICAgICAgICAgJ21vdG9yX291dDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2tpbmVtYXRpY3NfYW5nbGU6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdraW5lbWF0aWNzX3JhdGU6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdraW5lbWF0aWNzX2FsdGl0dWRlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbG9vcF9jb3VudDogdm9pZCB9Oyc7XHJcblxyXG4gICAgICAgIHZhciBhdXhNYXNrID0gJ0F1eE1hc2sgPSB7Ly8nICtcclxuICAgICAgICAgICAgJ2F1eDFfbG93OiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnYXV4MV9taWQ6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdhdXgxX2hpZ2g6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdhdXgyX2xvdzogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2F1eDJfbWlkOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnYXV4Ml9oaWdoOiB2b2lkIH07JztcclxuXHJcbiAgICAgICAgdmFyIGNvbW1hbmRzID0gYXV4TWFzayArICdDb21tYW5kID0gey8zMi8nICtcclxuICAgICAgICAgICAgJ3JlcXVlc3RfcmVzcG9uc2U6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdzZXRfZWVwcm9tX2RhdGE6IENvbmZpZ3VyYXRpb25GaXhlZCwnICtcclxuICAgICAgICAgICAgJ3JlaW5pdF9lZXByb21fZGF0YTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3JlcXVlc3RfZWVwcm9tX2RhdGE6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdyZXF1ZXN0X2VuYWJsZV9pdGVyYXRpb246IHU4LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfMDogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfMTogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfMjogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfMzogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfNDogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfNTogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfNjogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfNzogdTE2LCcgK1xyXG4gICAgICAgICAgICAnc2V0X2NvbW1hbmRfb3ZlcnJpZGU6IGJvb2wsJyArXHJcbiAgICAgICAgICAgICdzZXRfc3RhdGVfbWFzazogU3RhdGVGaWVsZHMsJyArXHJcbiAgICAgICAgICAgICdzZXRfc3RhdGVfZGVsYXk6IHUxNiwnICtcclxuICAgICAgICAgICAgJ3NldF9zZF93cml0ZV9kZWxheTogdTE2LCcgK1xyXG4gICAgICAgICAgICAnc2V0X2xlZDogeycgK1xyXG4gICAgICAgICAgICAnICBwYXR0ZXJuOiB1OCwnICtcclxuICAgICAgICAgICAgJyAgY29sb3JfcmlnaHQ6IENvbG9yLCcgK1xyXG4gICAgICAgICAgICAnICBjb2xvcl9sZWZ0OiBDb2xvciwnICtcclxuICAgICAgICAgICAgJyAgaW5kaWNhdG9yX3JlZDogYm9vbCwnICtcclxuICAgICAgICAgICAgJyAgaW5kaWNhdG9yX2dyZWVuOiBib29sIH0sJyArXHJcbiAgICAgICAgICAgICdzZXRfc2VyaWFsX3JjOiB7IGVuYWJsZWQ6IGJvb2wsIGNvbW1hbmQ6IFJjQ29tbWFuZCwgYXV4X21hc2s6IEF1eE1hc2sgfSwnICtcclxuICAgICAgICAgICAgJ3NldF9jYXJkX3JlY29yZGluZ19zdGF0ZTogey84LyByZWNvcmRfdG9fY2FyZDogdm9pZCwgbG9ja19yZWNvcmRpbmdfc3RhdGU6IHZvaWQgfSwnICtcclxuICAgICAgICAgICAgJ3NldF9wYXJ0aWFsX2VlcHJvbV9kYXRhOiBDb25maWd1cmF0aW9uLCcgK1xyXG4gICAgICAgICAgICAncmVpbml0X3BhcnRpYWxfZWVwcm9tX2RhdGE6IENvbmZpZ3VyYXRpb25GbGFnLCcgK1xyXG4gICAgICAgICAgICAncmVxX3BhcnRpYWxfZWVwcm9tX2RhdGE6IENvbmZpZ3VyYXRpb25GbGFnLCcgK1xyXG4gICAgICAgICAgICAncmVxX2NhcmRfcmVjb3JkaW5nX3N0YXRlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnc2V0X3BhcnRpYWxfdGVtcG9yYXJ5X2NvbmZpZzogQ29uZmlndXJhdGlvbiwnICtcclxuICAgICAgICAgICAgJ3NldF9jb21tYW5kX3NvdXJjZXM6IHsvOC8gc2VyaWFsOiB2b2lkLCByYWRpbzogdm9pZCB9LCcgK1xyXG4gICAgICAgICAgICAnc2V0X2NhbGlicmF0aW9uOiB7IGVuYWJsZWQ6IGJvb2wsIG1vZGU6IHU4IH0sJyArXHJcbiAgICAgICAgICAgICdzZXRfYXV0b3BpbG90X2VuYWJsZWQ6IGJvb2wsJyArXHJcbiAgICAgICAgICAgICdzZXRfdXNiX21vZGU6IHU4fTsnO1xyXG5cclxuICAgICAgICB2YXIgZGVidWdTdHJpbmcgPSBcIkRlYnVnU3RyaW5nID0geyBkZXByZWNhdGVkX21hc2s6IHUzMiwgbWVzc2FnZTogcyB9O1wiO1xyXG4gICAgICAgIHZhciBoaXN0b3J5RGF0YSA9IFwiSGlzdG9yeURhdGEgPSBEZWJ1Z1N0cmluZztcIjtcclxuICAgICAgICB2YXIgcmVzcG9uc2UgPSBcIlJlc3BvbnNlID0geyBtYXNrOiB1MzIsIGFjazogdTMyIH07XCI7XHJcbiAgICAgICAgdmFyIHByb3RvY29sID0gXCJQcm90b2NvbEluZm8gPSB7IHZlcnNpb246IFZlcnNpb24sIHN0cnVjdHVyZTogcyB9O1wiICtcclxuICAgICAgICAgICAgXCJQcm90b2NvbCA9IHsvMzIvIHJlcXVlc3Q6IHZvaWQsIHJlc3BvbnNlOiBQcm90b2NvbEluZm8gfTtcIjtcclxuXHJcbiAgICAgICAgdmFyIGhhbmRsZXIxNCA9IGNvbmZpZ0Z1bGwxNCArIHN0YXRlICsgY29tbWFuZHMgKyBkZWJ1Z1N0cmluZyArIGhpc3RvcnlEYXRhICsgcmVzcG9uc2UgKyBwcm90b2NvbDtcclxuICAgICAgICB2YXIgaGFuZGxlcjE1ID0gY29uZmlnRnVsbDE1ICsgc3RhdGUgKyBjb21tYW5kcyArIGRlYnVnU3RyaW5nICsgaGlzdG9yeURhdGEgKyByZXNwb25zZSArIHByb3RvY29sO1xyXG4gICAgICAgIHZhciBoYW5kbGVyMTYgPSBjb25maWdGdWxsMTYgKyBzdGF0ZSArIGNvbW1hbmRzICsgZGVidWdTdHJpbmcgKyBoaXN0b3J5RGF0YSArIHJlc3BvbnNlICsgcHJvdG9jb2w7XHJcblxyXG4gICAgICAgIGhhbmRsZXJDYWNoZVsnMS40LjAnXSA9IEZseWJyaXhTZXJpYWxpemF0aW9uLnBhcnNlKGhhbmRsZXIxNCk7XHJcbiAgICAgICAgaGFuZGxlckNhY2hlWycxLjUuMCddID0gaGFuZGxlckNhY2hlWycxLjUuMSddID0gRmx5YnJpeFNlcmlhbGl6YXRpb24ucGFyc2UoaGFuZGxlcjE1KTtcclxuICAgICAgICBoYW5kbGVyQ2FjaGVbJzEuNi4wJ10gPSBGbHlicml4U2VyaWFsaXphdGlvbi5wYXJzZShoYW5kbGVyMTYpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVGaWVsZHModGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgICAgICAgICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRmllbGRzQXJyYXkodGFyZ2V0LCBzb3VyY2UpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUZpZWxkc09iamVjdCh0YXJnZXQsIHNvdXJjZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNvdXJjZSA9PT0gbnVsbCB8fCBzb3VyY2UgPT09IHVuZGVmaW5lZCkgPyB0YXJnZXQgOiBzb3VyY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUZpZWxkc09iamVjdCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRhcmdldCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IHVwZGF0ZUZpZWxkcyh0YXJnZXRba2V5XSwgc291cmNlW2tleV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gcmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB1cGRhdGVGaWVsZHModGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVGaWVsZHNBcnJheSh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gTWF0aC5tYXgodGFyZ2V0Lmxlbmd0aCwgc291cmNlLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godXBkYXRlRmllbGRzKHRhcmdldFtpZHhdLCBzb3VyY2VbaWR4XSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBTZXJpYWxpemVyOiBGbHlicml4U2VyaWFsaXphdGlvbi5TZXJpYWxpemVyLFxyXG4gICAgICAgICAgICBnZXRIYW5kbGVyOiBmdW5jdGlvbiAoZmlybXdhcmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyQ2FjaGVbZmlybXdhcmVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZGRIYW5kbGVyOiBmdW5jdGlvbiAodmVyc2lvbiwgc3RydWN0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmVyc2lvblN0cmluZyA9IHZlcnNpb24ubWFqb3IudG9TdHJpbmcoKSArICcuJyArIHZlcnNpb24ubWlub3IudG9TdHJpbmcoKSArIHZlcnNpb24ucGF0Y2gudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXJDYWNoZVt2ZXJzaW9uU3RyaW5nXSA9IEZseWJyaXhTZXJpYWxpemF0aW9uLnBhcnNlKHN0cnVjdHVyZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHVwZGF0ZUZpZWxkczogdXBkYXRlRmllbGRzLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59KCkpO1xyXG4iXX0=
