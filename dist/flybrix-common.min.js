!function(){"use strict";angular.module("flybrixCommon",[])}(),function(){"use strict";function e(i,r){return{magnetometer:function(){return i("Calibrating magnetometer bias"),r.sendStructure("Command",{request_response:!0,set_calibration:{enabled:!0,mode:0}},!1)},accelerometer:{flat:e.bind(null,"flat",0),forward:e.bind(null,"lean forward",1),back:e.bind(null,"lean back",2),right:e.bind(null,"lean right",3),left:e.bind(null,"lean left",4)},finish:function(){return i("Finishing calibration"),r.sendStructure("Command",{request_response:!0,set_calibration:{enabled:!1,mode:0}},!1)}};function e(e,t){return i("Calibrating gravity for pose: "+e),r.sendStructure("Command",{request_response:!0,set_calibration:{enabled:!0,mode:t+1}},!1)}}angular.module("flybrixCommon").factory("calibration",e),e.$inject=["commandLog","serial"]}(),function(){"use strict";function e(e){void 0===e&&(e=2e3),this.N=e,this.buffer=new Uint8Array(e),this.ready_for_new_message=!0,this.buffer_length=0}function d(e){for(var t=0,i=0,r=0,a=!1;e.buffer[t];)r?(--r,e.buffer[i++]=e.buffer[t++]):(a&&(e.buffer[i++]=0),a=(r=e.buffer[t++]-1)<254);return r?0:i}function t(e){for(var t=new Uint8Array(Math.floor((255*e.byteLength+761)/254)),i=1,r=0,a=0;a<e.length;++a){254==t[r]&&(t[r]=255,t[r=i++]=0);var o=e[a];++t[r],o?t[i++]=o:t[r=i++]=0}return t.subarray(0,i).slice().buffer}angular.module("flybrixCommon").factory("cobs",function(){return{Reader:e,encode:t}}),e.prototype.readBytes=function(e,t,i){for(var r=0;r<e.length;r++){var a=e[r];if(this.ready_for_new_message&&(this.ready_for_new_message=!1,this.buffer_length=0),this.buffer[this.buffer_length++]=a)this.buffer_length===this.N&&(i("overflow","buffer overflow in COBS decoding"),this.ready_for_new_message=!0);else{this.buffer_length=d(this);var o,n=0===this.buffer_length;for(n&&(this.buffer[0]=1),o=1;o<this.buffer_length;++o)this.buffer[0]^=this.buffer[o];if(0===this.buffer[0])this.ready_for_new_message=!0,0<this.buffer_length?t(this.buffer.slice(1,this.buffer_length)):i("short","Too short packet");else{this.ready_for_new_message=!0;var s="",_="";for(o=0;o<this.buffer_length;o++)s+=this.buffer[o]+",",_+=String.fromCharCode(this.buffer[o]);if(n)i("frame","Unexpected ending of packet");else i("checksum","BAD CHECKSUM ("+this.buffer_length+" bytes)"+s+_)}}}}}(),function(){"use strict";function e(e){var t=[],i=e.defer(),r=a;return r.log=a,r.clearSubscribers=function(){i=e.defer()},r.onMessage=function(e){return i.promise.then(void 0,void 0,e)},r.read=o,r;function a(e){void 0!==e&&(t.push(e),i.notify(o()))}function o(){return t}}angular.module("flybrixCommon").factory("commandLog",e),e.$inject=["$q"]}(),function(){"use strict";function e(n,t,s,i){var _,r=function(){t("No callback defined for receiving configurations!")},a=function(){t("No callback defined for receiving logging state! Callback arguments: (isLogging, isLocked, delay)")};function d(){var e=s.serializationHandler();return t("Requesting current configuration data..."),n.sendStructure("Command",{request_response:!0,req_partial_eeprom_data:e.ConfigurationFlag.empty()},!1)}function o(e){var t=s.serializationHandler(),i=e.mask||t.ConfigurationFlag.empty(),r=e.config||_,a=e.requestUpdate||!1,o={request_response:!0};return e.temporary?(o.set_partial_temporary_config=r,i={request_response:!0,set_partial_temporary_config:i}):(o.set_partial_eeprom_data=r,i={request_response:!0,set_partial_eeprom_data:i}),n.sendStructure("Command",o,!0,i).then(function(){a&&d()})}function u(e){_=i.updateFields(_,e),s.set(_.version),s.supported()?(t("Received configuration data (v"+_.version[0]+"."+_.version[1]+"."+_.version[2]+")"),r()):(t("Received an unsupported configuration!"),t("Found version: "+_.version[0]+"."+_.version[1]+"."+_.version[2]+" --- Newest version: "+s.desiredKey()))}return n.addOnReceiveCallback(function(e,t){if("Command"===e&&("set_eeprom_data"in t&&u(t.set_eeprom_data),"set_partial_eeprom_data"in t&&u(t.set_partial_eeprom_data),"set_card_recording_state"in t&&"set_sd_write_delay"in t)){var i=t.set_card_recording_state,r=t.set_sd_write_delay;a(i.record_to_card,i.lock_recording_state,r)}}),_=s.serializationHandler().Configuration.empty(),{request:d,reinit:function(){return t("Setting factory default configuration data..."),n.sendStructure("Command",{request_response:!0,reinit_eeprom_data:!0},!1).then(function(){return d()},function(e){t("Request for factory reset failed: "+e)})},send:function(e){return o({config:e,temporary:!1,requestUpdate:!0})},sendConfig:o,getConfig:function(){return _},setConfigCallback:function(e){r=e},setLoggingCallback:function(e){a=e},getDesiredVersion:function(){return s.desired()}}}angular.module("flybrixCommon").factory("deviceConfig",e),e.$inject=["serial","commandLog","firmwareVersion","serializationHandler"]}(),function(){"use strict";function e(t){var i=[0,0,0],r="0.0.0",e={"1.4.0":!0,"1.5.0":!0,"1.5.1":!0,"1.6.0":!0},a=[1,6,0],o="1.6.0",n=t.getHandler(o),s=n;return{set:function(e){r=(i=e).join("."),s=t.getHandler(o)||n},get:function(){return i},key:function(){return r},supported:function(){return!0===e[r]},desired:function(){return a},desiredKey:function(){return o},serializationHandler:function(){return s}}}angular.module("flybrixCommon").factory("firmwareVersion",e),e.$inject=["serializationHandler"]}(),function(){"use strict";function e(s,_){var a={NO_OVERRIDE:0,FLASH:1,BEACON:2,BREATHE:3,ALTERNATE:4,SOLID:5},d=["right_front","right_back","left_front","left_back"],u={};d.forEach(function(e){u[e]={red:0,green:0,blue:0}});var l={status:65535,pattern:a.SOLID,colors:u,indicator_red:!1,indicator_green:!1},c={led_states:[l]};function o(e,t,i,r,a,o,n){l.status=_.serializationHandler().StatusFlag.empty(),0<a&&a<6&&(l.pattern=a),[e,t,i,r].forEach(function(e,t){if(e){var i=u[d[t]];i.red=e.red,i.green=e.green,i.blue=e.blue}}),void 0!==o&&(l.indicator_red=o),void 0!==n&&(l.indicator_green=n),s.sendConfig({config:c,temporary:!0})}return{set:o,setSimple:function(e,t,i){var r={red:e||0,green:t||0,blue:i||0};o(r,r,r,r,a.SOLID)},patterns:a}}angular.module("flybrixCommon").factory("led",e),e.$inject=["deviceConfig","firmwareVersion"]}(),function(){"use strict";function e(i){var e={LOW:0,MID:1,HIGH:2},r=["low","mid","high"],a=-1,o=0,n=0,s=0,_=e.HIGH,d=e.HIGH,u=!0;return{setThrottle:function(e){a=e},setPitch:function(e){o=e},setRoll:function(e){n=e},setYaw:function(e){s=e},setAux1:function(e){_=Math.max(0,Math.min(2,e))},setAux2:function(e){d=Math.max(0,Math.min(2,e))},getThrottle:function(){return a},getPitch:function(){return o},getRoll:function(){return n},getYaw:function(){return s},getAux1:function(){return _},getAux2:function(){return d},AUX:e,send:function(){if(!u&&i.busy())return;u=!1;var e={};e.throttle=l(4095*(a- -.8)/1.8,0,4095),e.pitch=l(4095*-c(o,.1)/2,-2047,2047),e.roll=l(4095*c(n,.1)/2,-2047,2047),e.yaw=l(4095*-c(s,.1)/2,-2047,2047);var t={};return t["aux1_"+r[_]]=!0,t["aux2_"+r[d]]=!0,i.sendStructure("Command",{request_response:!0,set_serial_rc:{enabled:!0,command:e,aux_mask:t}},!1)},forceNextSend:function(){u=!0}};function l(e,t,i){return Math.max(t,Math.min(e,i))}function c(e,t){return t<e?e-t:e<-t?e+t:0}}angular.module("flybrixCommon").factory("rcData",e),e.$inject=["serial"]}(),function(){"use strict";function e(f,v,p,g,b,h){var y={State:0,Command:1,DebugString:3,HistoryData:4,Protocol:128,Response:255},S=[],D=new e,o=[],t=new p.Reader(1e4),i=void 0;function e(){}e.prototype.busy=function(){return!1},e.prototype.send=function(e){g('No "send" defined for serial backend')},e.prototype.onRead=function(e){g('No "onRead" defined for serial backend')};var n,s=[];return Object.keys(y).forEach(function(e){s[y[e]]=e}),d(function(e,t){if("Response"===e)!function(e,t){for(;0<S.length;){var i=S.shift();if(!(i.mask^e)){var r=e;if((r&=-2)^t){i.response.reject("Request was not fully processed");break}i.response.resolve();break}i.response.reject("Missing ACK")}}(t.mask,t.ack);else if("Protocol"===e){var i=t.response;i&&h.addHandler(i.version,i.structure)}}),{busy:function(){return D.busy()},sendStructure:r,setBackend:function(e){(D=e).onRead=a},addOnReceiveCallback:d,removeOnReceiveCallback:function(t){o=o.filter(function(e){return e!==t})},setBytesHandler:function(e){i=e},handlePostConnect:function(){return r("Command",{request_response:!0,req_partial_eeprom_data:{version:!0}})},Backend:e};function r(e,t,i,r){"State"===e&&(t=function(e){"temperature"in(e=Object.assign({},e))&&(e.temperature*=100);"pressure"in e&&(e.pressure*=256);return e}(t));var a=b.serializationHandler(),o=v.defer();if(!(e in y))return o.reject('Message type "'+e+'" not supported by app, supported message types are:'+Object.keys(y).join(", ")),o.promise;if(!(e in a))return o.reject('Message type "'+e+'" not supported by firmware, supported message types are:'+Object.keys(a).join(", ")),o.promise;var n=y[e],s=a[e],_=new Uint8Array(s.byteCount),d=new h.Serializer(new DataView(_.buffer));s.encode(d,t,r);var u=s.maskArray(t,r);u.length<5&&(u=u[0]<<0|u[1]<<8|u[2]<<16|u[3]<<24);var l=d.index,c=new Uint8Array(l+3);c[0]=c[1]=n;for(var m=0;m<l;++m)c[0]^=c[m+2]=_[m];return c[l+2]=0,S.push({mask:u,response:o}),f(function(){D.send(new Uint8Array(p.encode(c)))},0),i&&g("Sending command "+n),o.promise}function a(e){i?i(e,u):t.readBytes(e,u,_)}function _(e,t){g("COBS decoding failed ("+e+"): "+t)}function d(e){o=o.concat([e])}function u(e){var t=s[e[0]],i=b.serializationHandler()[t];if(t&&i){try{var r=new h.Serializer(new DataView(e.buffer,1)),a=i.decode(r)}catch(e){g("Unrecognized message format received")}"State"===t&&(a=function(e){e=Object.assign({},e);"timestamp_us"in e&&(e.serial_update_rate_estimate=1e6/(e.timestamp_us-n),n=e.timestamp_us);"temperature"in e&&(e.temperature/=100);"pressure"in e&&(e.pressure/=256);return e}(a)),o.forEach(function(e){e(t,a)})}else g("Illegal message type passed from firmware")}}angular.module("flybrixCommon").factory("serial",e),e.$inject=["$timeout","$q","cobs","commandLog","firmwareVersion","serializationHandler"]}(),function(){"use strict";function e(){var r={};function o(e,t){return t instanceof Array?function(e,t){for(var i=Math.max(e.length,t.length),r=[],a=0;a<i;++a)r.push(o(e[a],t[a]));return r}(e,t):t instanceof Object?(i=e,r=t,a={},Object.keys(i).forEach(function(e){a[e]=o(i[e],r[e])}),Object.keys(r).forEach(function(e){e in a||(a[e]=o(i[e],r[e]))}),a):null==t?e:t;var i,r,a}return r["1.4.0"]=FlybrixSerialization.parse("Vector3f = { x: f32, y: f32, z: f32 };PIDSettings = {kp: f32,ki: f32,kd: f32,integral_windup_guard: f32,d_filter_time: f32,setpoint_filter_time: f32,command_to_value: f32 };Version = { major: u8, minor: u8, patch: u8 };ConfigID = u32;PcbTransform = { orientation: Vector3f, translation: Vector3f };MixTable = { fz: [i8:8], tx: [i8:8], ty: [i8:8], tz: [i8:8] };MagBias = { offset: Vector3f };ChannelProperties = {assignment: [u8:6],inversion: u8,midpoint: [u16:6],deadzone: [u16:6] };PIDParameters = {thrust_master: PIDSettings,pitch_master: PIDSettings,roll_master: PIDSettings,yaw_master: PIDSettings,thrust_slave: PIDSettings,pitch_slave: PIDSettings,roll_slave: PIDSettings,yaw_slave: PIDSettings,pid_bypass: u8 };StateParameters = { state_estimation: [f32:2], enable: [f32:2] };StatusFlag = {/16/boot: void,mpu_fail: void,bmp_fail: void,rx_fail: void,idle: void,enabling: void,clear_mpu_bias: void,set_mpu_bias: void,fail_stability: void,fail_angle: void,enabled: void,battery_low: void,temp_warning: void,log_full: void,fail_other: void,override: void };Color = { red: u8, green: u8, blue: u8 };LEDStateCase = {status: StatusFlag,pattern: u8,color_right_front: Color,color_right_back: Color,color_left_front: Color,color_left_back: Color,indicator_red: bool,indicator_green: bool };LEDStates = [/16/LEDStateCase:16];LEDStatesFixed = [LEDStateCase:16];DeviceName = s9;Configuration = {/16/version: Version,config_id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStates,device_name: DeviceName };ConfigurationFixed = {version: Version,config_id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStatesFixed,device_name: DeviceName };ConfigurationFlag = {/16/version: void,config_id: void,pcb_transform: void,mix_table: void,mag_bias: void,channel: void,pid_parameters: void,state_parameters: void,led_states: [// void:16],device_name: void};Rotation = { roll: f32, pitch: f32, yaw: f32 };PIDState = {timestamp_us: u32,input: f32,setpoint: f32,p_term: f32,i_term: f32,d_term: f32 };RcCommand = { throttle: i16, pitch: i16, roll: i16, yaw: i16 };State = {/32/timestamp_us: u32,status: StatusFlag,v0_raw: u16,i0_raw: u16,i1_raw: u16,accel: Vector3f,gyro: Vector3f,mag: Vector3f,temperature: u16,pressure: u32,ppm: [i16:6],aux_chan_mask: u8,command: RcCommand,control: { fz: f32, tx: f32, ty: f32, tz: f32 },pid_master_fz: PIDState,pid_master_tx: PIDState,pid_master_ty: PIDState,pid_master_tz: PIDState,pid_slave_fz: PIDState,pid_slave_tx: PIDState,pid_slave_ty: PIDState,pid_slave_tz: PIDState,motor_out: [i16:8],kinematics_angle: Rotation,kinematics_rate: Rotation,kinematics_altitude: f32,loop_count: u32 };StateFields = {/32/timestamp_us: void,status: void,v0_raw: void,i0_raw: void,i1_raw: void,accel: void,gyro: void,mag: void,temperature: void,pressure: void,ppm: void,aux_chan_mask: void,command: void,control: void,pid_master_fz: void,pid_master_tx: void,pid_master_ty: void,pid_master_tz: void,pid_slave_fz: void,pid_slave_tx: void,pid_slave_ty: void,pid_slave_tz: void,motor_out: void,kinematics_angle: void,kinematics_rate: void,kinematics_altitude: void,loop_count: void };AuxMask = {//aux1_low: void,aux1_mid: void,aux1_high: void,aux2_low: void,aux2_mid: void,aux2_high: void };Command = {/32/request_response: void,set_eeprom_data: ConfigurationFixed,reinit_eeprom_data: void,request_eeprom_data: void,request_enable_iteration: u8,motor_override_speed_0: u16,motor_override_speed_1: u16,motor_override_speed_2: u16,motor_override_speed_3: u16,motor_override_speed_4: u16,motor_override_speed_5: u16,motor_override_speed_6: u16,motor_override_speed_7: u16,set_command_override: bool,set_state_mask: StateFields,set_state_delay: u16,set_sd_write_delay: u16,set_led: {  pattern: u8,  color_right: Color,  color_left: Color,  indicator_red: bool,  indicator_green: bool },set_serial_rc: { enabled: bool, command: RcCommand, aux_mask: AuxMask },set_card_recording_state: {/8/ record_to_card: void, lock_recording_state: void },set_partial_eeprom_data: Configuration,reinit_partial_eeprom_data: ConfigurationFlag,req_partial_eeprom_data: ConfigurationFlag,req_card_recording_state: void,set_partial_temporary_config: Configuration,set_command_sources: {/8/ serial: void, radio: void },set_calibration: { enabled: bool, mode: u8 },set_autopilot_enabled: bool,set_usb_mode: u8};DebugString = { deprecated_mask: u32, message: s };HistoryData = DebugString;Response = { mask: u32, ack: u32 };ProtocolInfo = { version: Version, structure: s };Protocol = {/32/ request: void, response: ProtocolInfo };"),r["1.5.0"]=r["1.5.1"]=FlybrixSerialization.parse("Vector3f = { x: f32, y: f32, z: f32 };PIDSettings = {kp: f32,ki: f32,kd: f32,integral_windup_guard: f32,d_filter_time: f32,setpoint_filter_time: f32,command_to_value: f32 };Version = { major: u8, minor: u8, patch: u8 };ConfigID = u32;PcbTransform = { orientation: Vector3f, translation: Vector3f };MixTable = { fz: [i8:8], tx: [i8:8], ty: [i8:8], tz: [i8:8] };MagBias = { offset: Vector3f };ChannelProperties = {assignment: [u8:6],inversion: u8,midpoint: [u16:6],deadzone: [u16:6] };PIDParameters = {thrust_master: PIDSettings,pitch_master: PIDSettings,roll_master: PIDSettings,yaw_master: PIDSettings,thrust_slave: PIDSettings,pitch_slave: PIDSettings,roll_slave: PIDSettings,yaw_slave: PIDSettings,thrust_gain: f32,pitch_gain: f32,roll_gain: f32,yaw_gain: f32,pid_bypass: u8 };StateParameters = { state_estimation: [f32:2], enable: [f32:2] };StatusFlag = {/16/boot: void,mpu_fail: void,bmp_fail: void,rx_fail: void,idle: void,enabling: void,clear_mpu_bias: void,set_mpu_bias: void,fail_stability: void,fail_angle: void,enabled: void,battery_low: void,temp_warning: void,log_full: void,fail_other: void,override: void };Color = { red: u8, green: u8, blue: u8 };LEDStateCase = {status: StatusFlag,pattern: u8,color_right_front: Color,color_right_back: Color,color_left_front: Color,color_left_back: Color,indicator_red: bool,indicator_green: bool };LEDStates = [/16/LEDStateCase:16];LEDStatesFixed = [LEDStateCase:16];DeviceName = s9;Configuration = {/16/version: Version,config_id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStates,device_name: DeviceName };ConfigurationFixed = {version: Version,config_id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStatesFixed,device_name: DeviceName };ConfigurationFlag = {/16/version: void,config_id: void,pcb_transform: void,mix_table: void,mag_bias: void,channel: void,pid_parameters: void,state_parameters: void,led_states: [// void:16],device_name: void,velocity_pid_parameters: void,inertial_bias: void };Rotation = { roll: f32, pitch: f32, yaw: f32 };PIDState = {timestamp_us: u32,input: f32,setpoint: f32,p_term: f32,i_term: f32,d_term: f32 };RcCommand = { throttle: i16, pitch: i16, roll: i16, yaw: i16 };State = {/32/timestamp_us: u32,status: StatusFlag,v0_raw: u16,i0_raw: u16,i1_raw: u16,accel: Vector3f,gyro: Vector3f,mag: Vector3f,temperature: u16,pressure: u32,ppm: [i16:6],aux_chan_mask: u8,command: RcCommand,control: { fz: f32, tx: f32, ty: f32, tz: f32 },pid_master_fz: PIDState,pid_master_tx: PIDState,pid_master_ty: PIDState,pid_master_tz: PIDState,pid_slave_fz: PIDState,pid_slave_tx: PIDState,pid_slave_ty: PIDState,pid_slave_tz: PIDState,motor_out: [i16:8],kinematics_angle: Rotation,kinematics_rate: Rotation,kinematics_altitude: f32,loop_count: u32 };StateFields = {/32/timestamp_us: void,status: void,v0_raw: void,i0_raw: void,i1_raw: void,accel: void,gyro: void,mag: void,temperature: void,pressure: void,ppm: void,aux_chan_mask: void,command: void,control: void,pid_master_fz: void,pid_master_tx: void,pid_master_ty: void,pid_master_tz: void,pid_slave_fz: void,pid_slave_tx: void,pid_slave_ty: void,pid_slave_tz: void,motor_out: void,kinematics_angle: void,kinematics_rate: void,kinematics_altitude: void,loop_count: void };AuxMask = {//aux1_low: void,aux1_mid: void,aux1_high: void,aux2_low: void,aux2_mid: void,aux2_high: void };Command = {/32/request_response: void,set_eeprom_data: ConfigurationFixed,reinit_eeprom_data: void,request_eeprom_data: void,request_enable_iteration: u8,motor_override_speed_0: u16,motor_override_speed_1: u16,motor_override_speed_2: u16,motor_override_speed_3: u16,motor_override_speed_4: u16,motor_override_speed_5: u16,motor_override_speed_6: u16,motor_override_speed_7: u16,set_command_override: bool,set_state_mask: StateFields,set_state_delay: u16,set_sd_write_delay: u16,set_led: {  pattern: u8,  color_right: Color,  color_left: Color,  indicator_red: bool,  indicator_green: bool },set_serial_rc: { enabled: bool, command: RcCommand, aux_mask: AuxMask },set_card_recording_state: {/8/ record_to_card: void, lock_recording_state: void },set_partial_eeprom_data: Configuration,reinit_partial_eeprom_data: ConfigurationFlag,req_partial_eeprom_data: ConfigurationFlag,req_card_recording_state: void,set_partial_temporary_config: Configuration,set_command_sources: {/8/ serial: void, radio: void },set_calibration: { enabled: bool, mode: u8 },set_autopilot_enabled: bool,set_usb_mode: u8};DebugString = { deprecated_mask: u32, message: s };HistoryData = DebugString;Response = { mask: u32, ack: u32 };ProtocolInfo = { version: Version, structure: s };Protocol = {/32/ request: void, response: ProtocolInfo };"),r["1.6.0"]=FlybrixSerialization.parse("Vector3f = { x: f32, y: f32, z: f32 };PIDSettings = {kp: f32,ki: f32,kd: f32,integral_windup_guard: f32,d_filter_time: f32,setpoint_filter_time: f32,command_to_value: f32 };Version = { major: u8, minor: u8, patch: u8 };ConfigID = u32;PcbTransform = { orientation: Vector3f, translation: Vector3f };MixTable = { fz: [i8:8], tx: [i8:8], ty: [i8:8], tz: [i8:8] };MagBias = { offset: Vector3f };ChannelProperties = {assignment: [u8:6],inversion: u8,midpoint: [u16:6],deadzone: [u16:6] };PIDParameters = {thrust_master: PIDSettings,pitch_master: PIDSettings,roll_master: PIDSettings,yaw_master: PIDSettings,thrust_slave: PIDSettings,pitch_slave: PIDSettings,roll_slave: PIDSettings,yaw_slave: PIDSettings,thrust_gain: f32,pitch_gain: f32,roll_gain: f32,yaw_gain: f32,pid_bypass: u8 };StateParameters = { state_estimation: [f32:2], enable: [f32:2] };StatusFlag = {/16/_0: void,_1: void,_2: void,no_signal: void,idle: void,arming: void,recording_sd: void,_7: void,loop_slow: void,_9: void,armed: void,battery_low: void,battery_critical: void,log_full: void,crash_detected: void,override: void };Color = { red: u8, green: u8, blue: u8 };LEDStateCase = {status: StatusFlag,pattern: u8,color_right_front: Color,color_right_back: Color,color_left_front: Color,color_left_back: Color,indicator_red: bool,indicator_green: bool };LEDStates = [/16/LEDStateCase:16];LEDStatesFixed = [LEDStateCase:16];DeviceName = s9;InertialBias = { accel: Vector3f, gyro: Vector3f };VelocityPIDParameters = {forward_master: PIDSettings,right_master: PIDSettings,up_master: PIDSettings,forward_slave: PIDSettings,right_slave: PIDSettings,up_slave: PIDSettings,pid_bypass: u8 };Configuration = {/16/version: Version,config_id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStates,device_name: DeviceName,velocity_pid_parameters: VelocityPIDParameters,inertial_bias: InertialBias };ConfigurationFixed = {version: Version,config_id: ConfigID,pcb_transform: PcbTransform,mix_table: MixTable,mag_bias: MagBias,channel: ChannelProperties,pid_parameters: PIDParameters,state_parameters: StateParameters,led_states: LEDStatesFixed,device_name: DeviceName,velocity_pid_parameters: VelocityPIDParameters,inertial_bias: InertialBias };ConfigurationFlag = {/16/version: void,config_id: void,pcb_transform: void,mix_table: void,mag_bias: void,channel: void,pid_parameters: void,state_parameters: void,led_states: [// void:16],device_name: void,velocity_pid_parameters: void,inertial_bias: void };Rotation = { roll: f32, pitch: f32, yaw: f32 };PIDState = {timestamp_us: u32,input: f32,setpoint: f32,p_term: f32,i_term: f32,d_term: f32 };RcCommand = { throttle: i16, pitch: i16, roll: i16, yaw: i16 };State = {/32/timestamp_us: u32,status: StatusFlag,v0_raw: u16,i0_raw: u16,i1_raw: u16,accel: Vector3f,gyro: Vector3f,mag: Vector3f,temperature: u16,pressure: u32,ppm: [i16:6],aux_chan_mask: u8,command: RcCommand,control: { fz: f32, tx: f32, ty: f32, tz: f32 },pid_master_fz: PIDState,pid_master_tx: PIDState,pid_master_ty: PIDState,pid_master_tz: PIDState,pid_slave_fz: PIDState,pid_slave_tx: PIDState,pid_slave_ty: PIDState,pid_slave_tz: PIDState,motor_out: [i16:8],kinematics_angle: Rotation,kinematics_rate: Rotation,kinematics_altitude: f32,loop_count: u32 };StateFields = {/32/timestamp_us: void,status: void,v0_raw: void,i0_raw: void,i1_raw: void,accel: void,gyro: void,mag: void,temperature: void,pressure: void,ppm: void,aux_chan_mask: void,command: void,control: void,pid_master_fz: void,pid_master_tx: void,pid_master_ty: void,pid_master_tz: void,pid_slave_fz: void,pid_slave_tx: void,pid_slave_ty: void,pid_slave_tz: void,motor_out: void,kinematics_angle: void,kinematics_rate: void,kinematics_altitude: void,loop_count: void };AuxMask = {//aux1_low: void,aux1_mid: void,aux1_high: void,aux2_low: void,aux2_mid: void,aux2_high: void };Command = {/32/request_response: void,set_eeprom_data: ConfigurationFixed,reinit_eeprom_data: void,request_eeprom_data: void,request_enable_iteration: u8,motor_override_speed_0: u16,motor_override_speed_1: u16,motor_override_speed_2: u16,motor_override_speed_3: u16,motor_override_speed_4: u16,motor_override_speed_5: u16,motor_override_speed_6: u16,motor_override_speed_7: u16,set_command_override: bool,set_state_mask: StateFields,set_state_delay: u16,set_sd_write_delay: u16,set_led: {  pattern: u8,  color_right: Color,  color_left: Color,  indicator_red: bool,  indicator_green: bool },set_serial_rc: { enabled: bool, command: RcCommand, aux_mask: AuxMask },set_card_recording_state: {/8/ record_to_card: void, lock_recording_state: void },set_partial_eeprom_data: Configuration,reinit_partial_eeprom_data: ConfigurationFlag,req_partial_eeprom_data: ConfigurationFlag,req_card_recording_state: void,set_partial_temporary_config: Configuration,set_command_sources: {/8/ serial: void, radio: void },set_calibration: { enabled: bool, mode: u8 },set_autopilot_enabled: bool,set_usb_mode: u8};DebugString = { deprecated_mask: u32, message: s };HistoryData = DebugString;Response = { mask: u32, ack: u32 };ProtocolInfo = { version: Version, structure: s };Protocol = {/32/ request: void, response: ProtocolInfo };"),{Serializer:FlybrixSerialization.Serializer,getHandler:function(e){return r[e]},addHandler:function(e,t){var i=e.major.toString()+"."+e.minor.toString()+e.patch.toString();r[i]=FlybrixSerialization.parse(t)},updateFields:o}}e.$inject=[],angular.module("flybrixCommon").factory("serializationHandler",e)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNhbGlicmF0aW9uLmpzIiwiY29icy5qcyIsImNvbW1hbmRMb2cuanMiLCJkZXZpY2VDb25maWcuanMiLCJmaXJtd2FyZVZlcnNpb24uanMiLCJsZWQuanMiLCJyY0RhdGEuanMiLCJzZXJpYWwuanMiLCJzZXJpYWxpemF0aW9uSGFuZGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY2FsaWJyYXRpb24iLCJjb21tYW5kTG9nIiwic2VyaWFsIiwibWFnbmV0b21ldGVyIiwic2VuZFN0cnVjdHVyZSIsInJlcXVlc3RfcmVzcG9uc2UiLCJzZXRfY2FsaWJyYXRpb24iLCJlbmFibGVkIiwibW9kZSIsImFjY2VsZXJvbWV0ZXIiLCJmbGF0IiwiY2FsaWJyYXRlQWNjZWxlcm9tZXRlciIsImJpbmQiLCJmb3J3YXJkIiwiYmFjayIsInJpZ2h0IiwibGVmdCIsImZpbmlzaCIsInBvc2VEZXNjcmlwdGlvbiIsInBvc2VJZCIsImZhY3RvcnkiLCIkaW5qZWN0IiwiUmVhZGVyIiwiY2FwYWNpdHkiLCJ1bmRlZmluZWQiLCJ0aGlzIiwiTiIsImJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJyZWFkeV9mb3JfbmV3X21lc3NhZ2UiLCJidWZmZXJfbGVuZ3RoIiwiY29ic0RlY29kZSIsInJlYWRlciIsInNyY19wdHIiLCJkc3RfcHRyIiwibGVmdG92ZXJfbGVuZ3RoIiwiYXBwZW5kX3plcm8iLCJlbmNvZGUiLCJidWYiLCJyZXR2YWwiLCJNYXRoIiwiZmxvb3IiLCJieXRlTGVuZ3RoIiwibGVuIiwicG9zX2N0ciIsImkiLCJsZW5ndGgiLCJ2YWwiLCJzdWJhcnJheSIsInNsaWNlIiwicHJvdG90eXBlIiwicmVhZEJ5dGVzIiwiZGF0YSIsIm9uU3VjY2VzcyIsIm9uRXJyb3IiLCJjIiwiaiIsImZhaWxlZF9kZWNvZGUiLCJieXRlcyIsIm1lc3NhZ2UiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCIkcSIsIm1lc3NhZ2VzIiwicmVzcG9uZGVyIiwiZGVmZXIiLCJzZXJ2aWNlIiwibG9nIiwiY2xlYXJTdWJzY3JpYmVycyIsIm9uTWVzc2FnZSIsImNhbGxiYWNrIiwicHJvbWlzZSIsInRoZW4iLCJyZWFkIiwicHVzaCIsIm5vdGlmeSIsImRldmljZUNvbmZpZyIsImZpcm13YXJlVmVyc2lvbiIsInNlcmlhbGl6YXRpb25IYW5kbGVyIiwiY29uZmlnIiwiY29uZmlnQ2FsbGJhY2siLCJsb2dnaW5nQ2FsbGJhY2siLCJyZXF1ZXN0IiwiaGFuZGxlcnMiLCJyZXFfcGFydGlhbF9lZXByb21fZGF0YSIsIkNvbmZpZ3VyYXRpb25GbGFnIiwiZW1wdHkiLCJzZW5kQ29uZmlnIiwicHJvcGVydGllcyIsIm1hc2siLCJuZXdDb25maWciLCJyZXF1ZXN0VXBkYXRlIiwidGVtcG9yYXJ5Iiwic2V0X3BhcnRpYWxfdGVtcG9yYXJ5X2NvbmZpZyIsInNldF9wYXJ0aWFsX2VlcHJvbV9kYXRhIiwidXBkYXRlQ29uZmlnRnJvbVJlbW90ZURhdGEiLCJjb25maWdDaGFuZ2VzIiwidXBkYXRlRmllbGRzIiwic2V0IiwidmVyc2lvbiIsInN1cHBvcnRlZCIsImRlc2lyZWRLZXkiLCJhZGRPblJlY2VpdmVDYWxsYmFjayIsIm1lc3NhZ2VUeXBlIiwic2V0X2VlcHJvbV9kYXRhIiwiY2FyZF9yZWNfc3RhdGUiLCJzZXRfY2FyZF9yZWNvcmRpbmdfc3RhdGUiLCJzZF93cml0ZV9kZWxheSIsInNldF9zZF93cml0ZV9kZWxheSIsInJlY29yZF90b19jYXJkIiwibG9ja19yZWNvcmRpbmdfc3RhdGUiLCJDb25maWd1cmF0aW9uIiwicmVpbml0IiwicmVpbml0X2VlcHJvbV9kYXRhIiwicmVhc29uIiwic2VuZCIsImdldENvbmZpZyIsInNldENvbmZpZ0NhbGxiYWNrIiwic2V0TG9nZ2luZ0NhbGxiYWNrIiwiZ2V0RGVzaXJlZFZlcnNpb24iLCJkZXNpcmVkIiwia2V5IiwiMS40LjAiLCIxLjUuMCIsIjEuNS4xIiwiMS42LjAiLCJkZWZhdWx0U2VyaWFsaXphdGlvbkhhbmRsZXIiLCJnZXRIYW5kbGVyIiwiY3VycmVudFNlcmlhbGl6YXRpb25IYW5kbGVyIiwidmFsdWUiLCJqb2luIiwiZ2V0IiwibGVkIiwiTGVkUGF0dGVybnMiLCJOT19PVkVSUklERSIsIkZMQVNIIiwiQkVBQ09OIiwiQlJFQVRIRSIsIkFMVEVSTkFURSIsIlNPTElEIiwia2V5cyIsImNvbG9ycyIsImZvckVhY2giLCJyZWQiLCJncmVlbiIsImJsdWUiLCJsZWRTdGF0ZSIsInN0YXR1cyIsInBhdHRlcm4iLCJpbmRpY2F0b3JfcmVkIiwiaW5kaWNhdG9yX2dyZWVuIiwiY29uZmlnUGFydCIsImxlZF9zdGF0ZXMiLCJjb2xvcl9yZiIsImNvbG9yX3JiIiwiY29sb3JfbGYiLCJjb2xvcl9sYiIsIlN0YXR1c0ZsYWciLCJjb2xvciIsImlkeCIsInYiLCJzZXRTaW1wbGUiLCJwYXR0ZXJucyIsInJjRGF0YSIsIkFVWCIsIkxPVyIsIk1JRCIsIkhJR0giLCJhdXhOYW1lcyIsInRocm90dGxlIiwicGl0Y2giLCJyb2xsIiwieWF3IiwiYXV4MSIsImF1eDIiLCJ1cmdlbnQiLCJzZXRUaHJvdHRsZSIsInNldFBpdGNoIiwic2V0Um9sbCIsInNldFlhdyIsInNldEF1eDEiLCJtYXgiLCJtaW4iLCJzZXRBdXgyIiwiZ2V0VGhyb3R0bGUiLCJnZXRQaXRjaCIsImdldFJvbGwiLCJnZXRZYXciLCJnZXRBdXgxIiwiZ2V0QXV4MiIsImJ1c3kiLCJjb21tYW5kIiwiY29uc3RyYWluIiwiYXBwbHlEZWFkem9uZSIsImF1eF9tYXNrIiwic2V0X3NlcmlhbF9yYyIsImZvcmNlTmV4dFNlbmQiLCJ4IiwieG1pbiIsInhtYXgiLCJkZWFkem9uZSIsIiR0aW1lb3V0IiwiY29icyIsIk1lc3NhZ2VUeXBlIiwiU3RhdGUiLCJDb21tYW5kIiwiRGVidWdTdHJpbmciLCJIaXN0b3J5RGF0YSIsIlByb3RvY29sIiwiUmVzcG9uc2UiLCJhY2tub3dsZWRnZXMiLCJiYWNrZW5kIiwiQmFja2VuZCIsIm9uUmVjZWl2ZUxpc3RlbmVycyIsImNvYnNSZWFkZXIiLCJieXRlc0hhbmRsZXIiLCJvblJlYWQiLCJsYXN0X3RpbWVzdGFtcF91cyIsIk1lc3NhZ2VUeXBlSW52ZXJzaW9uIiwiT2JqZWN0Iiwic2hpZnQiLCJyZWxheGVkTWFzayIsInJlc3BvbnNlIiwicmVqZWN0IiwicmVzb2x2ZSIsImFja25vd2xlZGdlIiwiYWNrIiwiYWRkSGFuZGxlciIsInN0cnVjdHVyZSIsInNldEJhY2tlbmQiLCJyZW1vdmVPblJlY2VpdmVDYWxsYmFjayIsImZpbHRlciIsImNiIiwic2V0Qnl0ZXNIYW5kbGVyIiwiaGFuZGxlciIsImhhbmRsZVBvc3RDb25uZWN0IiwibG9nX3NlbmQiLCJleHRyYU1hc2siLCJzdGF0ZSIsImFzc2lnbiIsInRlbXBlcmF0dXJlIiwicHJlc3N1cmUiLCJwcm9jZXNzU3RhdGVPdXRwdXQiLCJ0eXBlQ29kZSIsImJ5dGVDb3VudCIsInNlcmlhbGl6ZXIiLCJTZXJpYWxpemVyIiwiRGF0YVZpZXciLCJtYXNrQXJyYXkiLCJkYXRhTGVuZ3RoIiwiaW5kZXgiLCJvdXRwdXQiLCJwcm9jZXNzRGF0YSIsInJlcG9ydElzc3VlcyIsImlzc3VlIiwidGV4dCIsImNvbmNhdCIsImRlY29kZSIsImVyciIsInNlcmlhbF91cGRhdGVfcmF0ZV9lc3RpbWF0ZSIsInRpbWVzdGFtcF91cyIsInByb2Nlc3NTdGF0ZUlucHV0IiwibGlzdGVuZXIiLCJoYW5kbGVyQ2FjaGUiLCJ0YXJnZXQiLCJzb3VyY2UiLCJBcnJheSIsInJlc3VsdCIsInVwZGF0ZUZpZWxkc0FycmF5IiwiRmx5YnJpeFNlcmlhbGl6YXRpb24iLCJwYXJzZSIsImNvbmZpZ0Z1bGwxNCIsImNvbmZpZ0Z1bGwxNSIsImNvbmZpZ0Z1bGwxNiIsImZpcm13YXJlIiwidmVyc2lvblN0cmluZyIsIm1ham9yIiwidG9TdHJpbmciLCJtaW5vciIsInBhdGNoIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLGFBRUFBLFFBQUFDLE9BQUEsZ0JBQUEsSUFIQSxHQ0FBLFdBQ0EsYUFNQSxTQUFBQyxFQUFB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LFdBQUEsU0FBQW1KLEdBQ0EsT0FBQVgsRUFBQVcsSUFFQS9DLFdBQUEsU0FBQWhJLEVBQUFpSSxHQUNBLElBQUErQyxFQUFBaEwsRUFBQWlMLE1BQUFDLFdBQUEsSUFBQWxMLEVBQUFtTCxNQUFBRCxXQUFBbEwsRUFBQW9MLE1BQUFGLFdBQ0FkLEVBQUFZLEdBQUFOLHFCQUFBQyxNQUFBMUMsSUFFQW5JLGFBQUFBLEdBdlhBbkIsRUFBQXpELFFBQUEsR0FFQXZCLFFBQUFDLE9BQUEsaUJBQUFxQixRQUFBLHVCQUFBMEQsR0FMQSIsImZpbGUiOiJmbHlicml4LWNvbW1vbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2ZseWJyaXhDb21tb24nLCBbXSk7XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnZmx5YnJpeENvbW1vbicpLmZhY3RvcnkoJ2NhbGlicmF0aW9uJywgY2FsaWJyYXRpb24pO1xyXG5cclxuICAgIGNhbGlicmF0aW9uLiRpbmplY3QgPSBbJ2NvbW1hbmRMb2cnLCAnc2VyaWFsJ107XHJcblxyXG4gICAgZnVuY3Rpb24gY2FsaWJyYXRpb24oY29tbWFuZExvZywgc2VyaWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWFnbmV0b21ldGVyOiBtYWduZXRvbWV0ZXIsXHJcbiAgICAgICAgICAgIGFjY2VsZXJvbWV0ZXI6IHtcclxuICAgICAgICAgICAgICAgIGZsYXQ6IGNhbGlicmF0ZUFjY2VsZXJvbWV0ZXIuYmluZChudWxsLCAnZmxhdCcsIDApLFxyXG4gICAgICAgICAgICAgICAgZm9yd2FyZDogY2FsaWJyYXRlQWNjZWxlcm9tZXRlci5iaW5kKG51bGwsICdsZWFuIGZvcndhcmQnLCAxKSxcclxuICAgICAgICAgICAgICAgIGJhY2s6IGNhbGlicmF0ZUFjY2VsZXJvbWV0ZXIuYmluZChudWxsLCAnbGVhbiBiYWNrJywgMiksXHJcbiAgICAgICAgICAgICAgICByaWdodDogY2FsaWJyYXRlQWNjZWxlcm9tZXRlci5iaW5kKG51bGwsICdsZWFuIHJpZ2h0JywgMyksXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBjYWxpYnJhdGVBY2NlbGVyb21ldGVyLmJpbmQobnVsbCwgJ2xlYW4gbGVmdCcsIDQpLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmaW5pc2g6IGZpbmlzaCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBtYWduZXRvbWV0ZXIoKSB7XHJcbiAgICAgICAgICAgIGNvbW1hbmRMb2coXCJDYWxpYnJhdGluZyBtYWduZXRvbWV0ZXIgYmlhc1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbC5zZW5kU3RydWN0dXJlKCdDb21tYW5kJywge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdF9yZXNwb25zZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNldF9jYWxpYnJhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogMCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNhbGlicmF0ZUFjY2VsZXJvbWV0ZXIocG9zZURlc2NyaXB0aW9uLCBwb3NlSWQpIHtcclxuICAgICAgICAgICAgY29tbWFuZExvZyhcIkNhbGlicmF0aW5nIGdyYXZpdHkgZm9yIHBvc2U6IFwiICsgcG9zZURlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbC5zZW5kU3RydWN0dXJlKCdDb21tYW5kJywge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdF9yZXNwb25zZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNldF9jYWxpYnJhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogcG9zZUlkICsgMSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbmlzaCgpIHtcclxuICAgICAgICAgICAgY29tbWFuZExvZyhcIkZpbmlzaGluZyBjYWxpYnJhdGlvblwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbC5zZW5kU3RydWN0dXJlKCdDb21tYW5kJywge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdF9yZXNwb25zZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNldF9jYWxpYnJhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGU6IDAsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2ZseWJyaXhDb21tb24nKS5mYWN0b3J5KCdjb2JzJywgY29icyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29icygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBSZWFkZXI6IFJlYWRlcixcclxuICAgICAgICAgICAgZW5jb2RlOiBlbmNvZGUsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gUmVhZGVyKGNhcGFjaXR5KSB7XHJcbiAgICAgICAgaWYgKGNhcGFjaXR5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY2FwYWNpdHkgPSAyMDAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLk4gPSBjYXBhY2l0eTtcclxuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGNhcGFjaXR5KTtcclxuICAgICAgICB0aGlzLnJlYWR5X2Zvcl9uZXdfbWVzc2FnZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5idWZmZXJfbGVuZ3RoID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb2JzRGVjb2RlKHJlYWRlcikge1xyXG4gICAgICAgIHZhciBzcmNfcHRyID0gMDtcclxuICAgICAgICB2YXIgZHN0X3B0ciA9IDA7XHJcbiAgICAgICAgdmFyIGxlZnRvdmVyX2xlbmd0aCA9IDA7XHJcbiAgICAgICAgdmFyIGFwcGVuZF96ZXJvID0gZmFsc2U7XHJcbiAgICAgICAgd2hpbGUgKHJlYWRlci5idWZmZXJbc3JjX3B0cl0pIHtcclxuICAgICAgICAgICAgaWYgKCFsZWZ0b3Zlcl9sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcHBlbmRfemVybylcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuYnVmZmVyW2RzdF9wdHIrK10gPSAwO1xyXG4gICAgICAgICAgICAgICAgbGVmdG92ZXJfbGVuZ3RoID0gcmVhZGVyLmJ1ZmZlcltzcmNfcHRyKytdIC0gMTtcclxuICAgICAgICAgICAgICAgIGFwcGVuZF96ZXJvID0gbGVmdG92ZXJfbGVuZ3RoIDwgMHhGRTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC0tbGVmdG92ZXJfbGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLmJ1ZmZlcltkc3RfcHRyKytdID0gcmVhZGVyLmJ1ZmZlcltzcmNfcHRyKytdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbGVmdG92ZXJfbGVuZ3RoID8gMCA6IGRzdF9wdHI7XHJcbiAgICB9XHJcblxyXG4gICAgUmVhZGVyLnByb3RvdHlwZS5yZWFkQnl0ZXMgPSBmdW5jdGlvbihkYXRhLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBkYXRhW2ldO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeV9mb3JfbmV3X21lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIGZpcnN0IGJ5dGUgb2YgYSBuZXcgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWFkeV9mb3JfbmV3X21lc3NhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyX2xlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyW3RoaXMuYnVmZmVyX2xlbmd0aCsrXSA9IGM7XHJcblxyXG4gICAgICAgICAgICBpZiAoYykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVmZmVyX2xlbmd0aCA9PT0gdGhpcy5OKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYnVmZmVyIG92ZXJmbG93LCBwcm9iYWJseSBkdWUgdG8gZXJyb3JzIGluIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKCdvdmVyZmxvdycsICdidWZmZXIgb3ZlcmZsb3cgaW4gQ09CUyBkZWNvZGluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVhZHlfZm9yX25ld19tZXNzYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlcl9sZW5ndGggPSBjb2JzRGVjb2RlKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgZmFpbGVkX2RlY29kZSA9ICh0aGlzLmJ1ZmZlcl9sZW5ndGggPT09IDApO1xyXG4gICAgICAgICAgICBpZiAoZmFpbGVkX2RlY29kZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbMF0gPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBqO1xyXG4gICAgICAgICAgICBmb3IgKGogPSAxOyBqIDwgdGhpcy5idWZmZXJfbGVuZ3RoOyArK2opIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyWzBdIF49IHRoaXMuYnVmZmVyW2pdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1ZmZlclswXSA9PT0gMCkgeyAgLy8gY2hlY2sgc3VtIGlzIGNvcnJlY3RcclxuICAgICAgICAgICAgICAgIHRoaXMucmVhZHlfZm9yX25ld19tZXNzYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ1ZmZlcl9sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzKHRoaXMuYnVmZmVyLnNsaWNlKDEsIHRoaXMuYnVmZmVyX2xlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKCdzaG9ydCcsICdUb28gc2hvcnQgcGFja2V0Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7ICAvLyBiYWQgY2hlY2tzdW1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVhZHlfZm9yX25ld19tZXNzYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBieXRlcyA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy5idWZmZXJfbGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBieXRlcyArPSB0aGlzLmJ1ZmZlcltqXSArIFwiLFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzLmJ1ZmZlcltqXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZmFpbGVkX2RlY29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3IoJ2ZyYW1lJywgJ1VuZXhwZWN0ZWQgZW5kaW5nIG9mIHBhY2tldCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0gJ0JBRCBDSEVDS1NVTSAoJyArIHRoaXMuYnVmZmVyX2xlbmd0aCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgYnl0ZXMpJyArIGJ5dGVzICsgbWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKCdjaGVja3N1bScsIG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGVuY29kZShidWYpIHtcclxuICAgICAgICB2YXIgcmV0dmFsID1cclxuICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoTWF0aC5mbG9vcigoYnVmLmJ5dGVMZW5ndGggKiAyNTUgKyA3NjEpIC8gMjU0KSk7XHJcbiAgICAgICAgdmFyIGxlbiA9IDE7XHJcbiAgICAgICAgdmFyIHBvc19jdHIgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXR2YWxbcG9zX2N0cl0gPT0gMHhGRSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dmFsW3Bvc19jdHJdID0gMHhGRjtcclxuICAgICAgICAgICAgICAgIHBvc19jdHIgPSBsZW4rKztcclxuICAgICAgICAgICAgICAgIHJldHZhbFtwb3NfY3RyXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHZhbCA9IGJ1ZltpXTtcclxuICAgICAgICAgICAgKytyZXR2YWxbcG9zX2N0cl07XHJcbiAgICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHZhbFtsZW4rK10gPSB2YWw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwb3NfY3RyID0gbGVuKys7XHJcbiAgICAgICAgICAgICAgICByZXR2YWxbcG9zX2N0cl0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXR2YWwuc3ViYXJyYXkoMCwgbGVuKS5zbGljZSgpLmJ1ZmZlcjtcclxuICAgIH07XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnZmx5YnJpeENvbW1vbicpLmZhY3RvcnkoJ2NvbW1hbmRMb2cnLCBjb21tYW5kTG9nKTtcclxuXHJcbiAgICBjb21tYW5kTG9nLiRpbmplY3QgPSBbJyRxJ107XHJcblxyXG4gICAgZnVuY3Rpb24gY29tbWFuZExvZygkcSkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlcyA9IFtdO1xyXG4gICAgICAgIHZhciByZXNwb25kZXIgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICB2YXIgc2VydmljZSA9IGxvZztcclxuICAgICAgICBzZXJ2aWNlLmxvZyA9IGxvZztcclxuICAgICAgICBzZXJ2aWNlLmNsZWFyU3Vic2NyaWJlcnMgPSBjbGVhclN1YnNjcmliZXJzO1xyXG4gICAgICAgIHNlcnZpY2Uub25NZXNzYWdlID0gb25NZXNzYWdlO1xyXG4gICAgICAgIHNlcnZpY2UucmVhZCA9IHJlYWQ7XHJcblxyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2cobWVzc2FnZSkge1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uZGVyLm5vdGlmeShyZWFkKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWFkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjbGVhclN1YnNjcmliZXJzKCkge1xyXG4gICAgICAgICAgICByZXNwb25kZXIgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25NZXNzYWdlKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25kZXIucHJvbWlzZS50aGVuKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2ZseWJyaXhDb21tb24nKS5mYWN0b3J5KCdkZXZpY2VDb25maWcnLCBkZXZpY2VDb25maWcpO1xyXG5cclxuICAgIGRldmljZUNvbmZpZy4kaW5qZWN0ID0gWydzZXJpYWwnLCAnY29tbWFuZExvZycsICdmaXJtd2FyZVZlcnNpb24nLCAnc2VyaWFsaXphdGlvbkhhbmRsZXInXTtcclxuXHJcbiAgICBmdW5jdGlvbiBkZXZpY2VDb25maWcoc2VyaWFsLCBjb21tYW5kTG9nLCBmaXJtd2FyZVZlcnNpb24sIHNlcmlhbGl6YXRpb25IYW5kbGVyKSB7XHJcbiAgICAgICAgdmFyIGNvbmZpZztcclxuXHJcbiAgICAgICAgdmFyIGNvbmZpZ0NhbGxiYWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbW1hbmRMb2coJ05vIGNhbGxiYWNrIGRlZmluZWQgZm9yIHJlY2VpdmluZyBjb25maWd1cmF0aW9ucyEnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgbG9nZ2luZ0NhbGxiYWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbW1hbmRMb2coXHJcbiAgICAgICAgICAgICAgICAnTm8gY2FsbGJhY2sgZGVmaW5lZCBmb3IgcmVjZWl2aW5nIGxvZ2dpbmcgc3RhdGUhJyArXHJcbiAgICAgICAgICAgICAgICAnIENhbGxiYWNrIGFyZ3VtZW50czogKGlzTG9nZ2luZywgaXNMb2NrZWQsIGRlbGF5KScpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNlcmlhbC5hZGRPblJlY2VpdmVDYWxsYmFjayhmdW5jdGlvbihtZXNzYWdlVHlwZSwgbWVzc2FnZSkge1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZVR5cGUgIT09ICdDb21tYW5kJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgnc2V0X2VlcHJvbV9kYXRhJyBpbiBtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVDb25maWdGcm9tUmVtb3RlRGF0YShtZXNzYWdlLnNldF9lZXByb21fZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCdzZXRfcGFydGlhbF9lZXByb21fZGF0YScgaW4gbWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ29uZmlnRnJvbVJlbW90ZURhdGEobWVzc2FnZS5zZXRfcGFydGlhbF9lZXByb21fZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCgnc2V0X2NhcmRfcmVjb3JkaW5nX3N0YXRlJyBpbiBtZXNzYWdlKSAmJiAoJ3NldF9zZF93cml0ZV9kZWxheScgaW4gbWVzc2FnZSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYXJkX3JlY19zdGF0ZSA9IG1lc3NhZ2Uuc2V0X2NhcmRfcmVjb3JkaW5nX3N0YXRlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNkX3dyaXRlX2RlbGF5ID0gbWVzc2FnZS5zZXRfc2Rfd3JpdGVfZGVsYXk7XHJcbiAgICAgICAgICAgICAgICBsb2dnaW5nQ2FsbGJhY2soY2FyZF9yZWNfc3RhdGUucmVjb3JkX3RvX2NhcmQsIGNhcmRfcmVjX3N0YXRlLmxvY2tfcmVjb3JkaW5nX3N0YXRlLCBzZF93cml0ZV9kZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RGVzaXJlZFZlcnNpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaXJtd2FyZVZlcnNpb24uZGVzaXJlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlcXVlc3QoKSB7XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IGZpcm13YXJlVmVyc2lvbi5zZXJpYWxpemF0aW9uSGFuZGxlcigpO1xyXG4gICAgICAgICAgICBjb21tYW5kTG9nKCdSZXF1ZXN0aW5nIGN1cnJlbnQgY29uZmlndXJhdGlvbiBkYXRhLi4uJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJpYWwuc2VuZFN0cnVjdHVyZSgnQ29tbWFuZCcsIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfcmVzcG9uc2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZXFfcGFydGlhbF9lZXByb21fZGF0YTogaGFuZGxlcnMuQ29uZmlndXJhdGlvbkZsYWcuZW1wdHkoKSxcclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVpbml0KCkge1xyXG4gICAgICAgICAgICBjb21tYW5kTG9nKCdTZXR0aW5nIGZhY3RvcnkgZGVmYXVsdCBjb25maWd1cmF0aW9uIGRhdGEuLi4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbC5zZW5kU3RydWN0dXJlKCdDb21tYW5kJywge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdF9yZXNwb25zZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlaW5pdF9lZXByb21fZGF0YTogdHJ1ZSxcclxuICAgICAgICAgICAgfSwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAudGhlbihcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kTG9nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3QgZm9yIGZhY3RvcnkgcmVzZXQgZmFpbGVkOiAnICsgcmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNlbmQobmV3Q29uZmlnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZW5kQ29uZmlnKHsgY29uZmlnOiBuZXdDb25maWcsIHRlbXBvcmFyeTogZmFsc2UsIHJlcXVlc3RVcGRhdGU6IHRydWUgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZW5kQ29uZmlnKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZXJzID0gZmlybXdhcmVWZXJzaW9uLnNlcmlhbGl6YXRpb25IYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIHZhciBtYXNrID0gcHJvcGVydGllcy5tYXNrIHx8IGhhbmRsZXJzLkNvbmZpZ3VyYXRpb25GbGFnLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdDb25maWcgPSBwcm9wZXJ0aWVzLmNvbmZpZyB8fCBjb25maWc7XHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0VXBkYXRlID0gcHJvcGVydGllcy5yZXF1ZXN0VXBkYXRlIHx8IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfcmVzcG9uc2U6IHRydWUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLnRlbXBvcmFyeSkge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zZXRfcGFydGlhbF90ZW1wb3JhcnlfY29uZmlnID0gbmV3Q29uZmlnO1xyXG4gICAgICAgICAgICAgICAgbWFzayA9IHsgcmVxdWVzdF9yZXNwb25zZTogdHJ1ZSwgc2V0X3BhcnRpYWxfdGVtcG9yYXJ5X2NvbmZpZzogbWFzayB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zZXRfcGFydGlhbF9lZXByb21fZGF0YSA9IG5ld0NvbmZpZztcclxuICAgICAgICAgICAgICAgIG1hc2sgPSB7IHJlcXVlc3RfcmVzcG9uc2U6IHRydWUsIHNldF9wYXJ0aWFsX2VlcHJvbV9kYXRhOiBtYXNrIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbC5zZW5kU3RydWN0dXJlKCdDb21tYW5kJywgbWVzc2FnZSwgdHJ1ZSwgbWFzaykudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0VXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbmZpZ0Zyb21SZW1vdGVEYXRhKGNvbmZpZ0NoYW5nZXMpIHtcclxuICAgICAgICAgICAgLy9jb21tYW5kTG9nKCdSZWNlaXZlZCBjb25maWchJyk7XHJcbiAgICAgICAgICAgIGNvbmZpZyA9IHNlcmlhbGl6YXRpb25IYW5kbGVyLnVwZGF0ZUZpZWxkcyhjb25maWcsIGNvbmZpZ0NoYW5nZXMpO1xyXG4gICAgICAgICAgICBmaXJtd2FyZVZlcnNpb24uc2V0KGNvbmZpZy52ZXJzaW9uKTtcclxuICAgICAgICAgICAgaWYgKCFmaXJtd2FyZVZlcnNpb24uc3VwcG9ydGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbW1hbmRMb2coJ1JlY2VpdmVkIGFuIHVuc3VwcG9ydGVkIGNvbmZpZ3VyYXRpb24hJyk7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kTG9nKFxyXG4gICAgICAgICAgICAgICAgICAgICdGb3VuZCB2ZXJzaW9uOiAnICsgY29uZmlnLnZlcnNpb25bMF0gKyAnLicgK1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy52ZXJzaW9uWzFdICsgJy4nICsgY29uZmlnLnZlcnNpb25bMl0gICtcclxuICAgICAgICAgICAgICAgICAgICAnIC0tLSBOZXdlc3QgdmVyc2lvbjogJyArXHJcbiAgICAgICAgICAgICAgICAgICAgZmlybXdhcmVWZXJzaW9uLmRlc2lyZWRLZXkoKSApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29tbWFuZExvZyhcclxuICAgICAgICAgICAgICAgICAgICAnUmVjZWl2ZWQgY29uZmlndXJhdGlvbiBkYXRhICh2JyArXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnZlcnNpb25bMF0gKyAnLicgKyBjb25maWcudmVyc2lvblsxXSArICcuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnZlcnNpb25bMl0gKycpJyk7XHJcbiAgICAgICAgICAgICAgICBjb25maWdDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRDb25maWdDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBjb25maWdDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0TG9nZ2luZ0NhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGxvZ2dpbmdDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29uZmlnKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uZmlnID0gZmlybXdhcmVWZXJzaW9uLnNlcmlhbGl6YXRpb25IYW5kbGVyKCkuQ29uZmlndXJhdGlvbi5lbXB0eSgpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0OiByZXF1ZXN0LFxyXG4gICAgICAgICAgICByZWluaXQ6IHJlaW5pdCxcclxuICAgICAgICAgICAgc2VuZDogc2VuZCxcclxuICAgICAgICAgICAgc2VuZENvbmZpZzogc2VuZENvbmZpZyxcclxuICAgICAgICAgICAgZ2V0Q29uZmlnOiBnZXRDb25maWcsXHJcbiAgICAgICAgICAgIHNldENvbmZpZ0NhbGxiYWNrOiBzZXRDb25maWdDYWxsYmFjayxcclxuICAgICAgICAgICAgc2V0TG9nZ2luZ0NhbGxiYWNrOiBzZXRMb2dnaW5nQ2FsbGJhY2ssXHJcbiAgICAgICAgICAgIGdldERlc2lyZWRWZXJzaW9uOiBnZXREZXNpcmVkVmVyc2lvbixcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2ZseWJyaXhDb21tb24nKS5mYWN0b3J5KCdmaXJtd2FyZVZlcnNpb24nLCBmaXJtd2FyZVZlcnNpb24pO1xyXG5cclxuICAgIGZpcm13YXJlVmVyc2lvbi4kaW5qZWN0ID0gWydzZXJpYWxpemF0aW9uSGFuZGxlciddO1xyXG5cclxuICAgIGZ1bmN0aW9uIGZpcm13YXJlVmVyc2lvbihzZXJpYWxpemF0aW9uSGFuZGxlcikge1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gWzAsIDAsIDBdO1xyXG4gICAgICAgIHZhciBrZXkgPSAnMC4wLjAnO1xyXG4gICAgICAgIHZhciBzdXBwb3J0ZWQgPSB7XHJcbiAgICAgICAgICAgICcxLjQuMCc6IHRydWUsXHJcbiAgICAgICAgICAgICcxLjUuMCc6IHRydWUsXHJcbiAgICAgICAgICAgICcxLjUuMSc6IHRydWUsXHJcbiAgICAgICAgICAgICcxLjYuMCc6IHRydWUsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGRlc2lyZWQgPSBbMSwgNiwgMF07XHJcbiAgICAgICAgdmFyIGRlc2lyZWRLZXkgPSAnMS42LjAnO1xyXG5cclxuICAgICAgICB2YXIgZGVmYXVsdFNlcmlhbGl6YXRpb25IYW5kbGVyID0gc2VyaWFsaXphdGlvbkhhbmRsZXIuZ2V0SGFuZGxlcihkZXNpcmVkS2V5KTtcclxuICAgICAgICB2YXIgY3VycmVudFNlcmlhbGl6YXRpb25IYW5kbGVyID0gZGVmYXVsdFNlcmlhbGl6YXRpb25IYW5kbGVyO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBrZXkgPSB2YWx1ZS5qb2luKCcuJyk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VyaWFsaXphdGlvbkhhbmRsZXIgPVxyXG4gICAgICAgICAgICAgICAgICAgIHNlcmlhbGl6YXRpb25IYW5kbGVyLmdldEhhbmRsZXIoZGVzaXJlZEtleSkgfHwgZGVmYXVsdFNlcmlhbGl6YXRpb25IYW5kbGVyO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZlcnNpb247XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGtleTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdXBwb3J0ZWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnRlZFtrZXldID09PSB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZXNpcmVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZXNpcmVkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZXNpcmVkS2V5OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZXNpcmVkS2V5O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uSGFuZGxlcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFNlcmlhbGl6YXRpb25IYW5kbGVyO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2ZseWJyaXhDb21tb24nKS5mYWN0b3J5KCdsZWQnLCBsZWQpO1xyXG5cclxuICAgIGxlZC4kaW5qZWN0ID0gWydkZXZpY2VDb25maWcnLCAnZmlybXdhcmVWZXJzaW9uJ107XHJcblxyXG4gICAgZnVuY3Rpb24gbGVkKGRldmljZUNvbmZpZywgZmlybXdhcmVWZXJzaW9uKSB7XHJcbiAgICAgICAgdmFyIExlZFBhdHRlcm5zID0ge1xyXG4gICAgICAgICAgICBOT19PVkVSUklERTogMCxcclxuICAgICAgICAgICAgRkxBU0g6IDEsXHJcbiAgICAgICAgICAgIEJFQUNPTjogMixcclxuICAgICAgICAgICAgQlJFQVRIRTogMyxcclxuICAgICAgICAgICAgQUxURVJOQVRFOiA0LFxyXG4gICAgICAgICAgICBTT0xJRDogNSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIga2V5cyA9IFsncmlnaHRfZnJvbnQnLCAncmlnaHRfYmFjaycsICdsZWZ0X2Zyb250JywgJ2xlZnRfYmFjayddO1xyXG4gICAgICAgIHZhciBjb2xvcnMgPSB7fTtcclxuXHJcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgICBjb2xvcnNba2V5XSA9IHtcclxuICAgICAgICAgICAgICAgIHJlZDogMCxcclxuICAgICAgICAgICAgICAgIGdyZWVuOiAwLFxyXG4gICAgICAgICAgICAgICAgYmx1ZTogMCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgbGVkU3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHN0YXR1czogNjU1MzUsXHJcbiAgICAgICAgICAgIHBhdHRlcm46IExlZFBhdHRlcm5zLlNPTElELFxyXG4gICAgICAgICAgICBjb2xvcnM6IGNvbG9ycyxcclxuICAgICAgICAgICAgaW5kaWNhdG9yX3JlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGluZGljYXRvcl9ncmVlbjogZmFsc2UsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNvbmZpZ1BhcnQgPSB7IGxlZF9zdGF0ZXM6IFtsZWRTdGF0ZV0gfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0KFxyXG4gICAgICAgICAgICBjb2xvcl9yZiwgY29sb3JfcmIsIGNvbG9yX2xmLCBjb2xvcl9sYiwgcGF0dGVybiwgcmVkLCBncmVlbikge1xyXG4gICAgICAgICAgICBsZWRTdGF0ZS5zdGF0dXMgPSBmaXJtd2FyZVZlcnNpb24uc2VyaWFsaXphdGlvbkhhbmRsZXIoKS5TdGF0dXNGbGFnLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIGlmIChwYXR0ZXJuID4gMCAmJiBwYXR0ZXJuIDwgNikge1xyXG4gICAgICAgICAgICAgICAgbGVkU3RhdGUucGF0dGVybiA9IHBhdHRlcm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgW2NvbG9yX3JmLCBjb2xvcl9yYiwgY29sb3JfbGYsIGNvbG9yX2xiXS5mb3JFYWNoKGZ1bmN0aW9uKFxyXG4gICAgICAgICAgICAgICAgY29sb3IsIGlkeCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB2ID0gY29sb3JzW2tleXNbaWR4XV07XHJcbiAgICAgICAgICAgICAgICB2LnJlZCA9IGNvbG9yLnJlZDtcclxuICAgICAgICAgICAgICAgIHYuZ3JlZW4gPSBjb2xvci5ncmVlbjtcclxuICAgICAgICAgICAgICAgIHYuYmx1ZSA9IGNvbG9yLmJsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGxlZFN0YXRlLmluZGljYXRvcl9yZWQgPSByZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGdyZWVuICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGxlZFN0YXRlLmluZGljYXRvcl9ncmVlbiA9IGdyZWVuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhcHBseSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0U2ltcGxlKHJlZCwgZ3JlZW4sIGJsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yID0ge3JlZDogcmVkIHx8IDAsIGdyZWVuOiBncmVlbiB8fCAwLCBibHVlOiBibHVlIHx8IDB9O1xyXG4gICAgICAgICAgICBzZXQoY29sb3IsIGNvbG9yLCBjb2xvciwgY29sb3IsIExlZFBhdHRlcm5zLlNPTElEKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFwcGx5KCkge1xyXG4gICAgICAgICAgICBkZXZpY2VDb25maWcuc2VuZENvbmZpZyh7XHJcbiAgICAgICAgICAgICAgICBjb25maWc6IGNvbmZpZ1BhcnQsXHJcbiAgICAgICAgICAgICAgICB0ZW1wb3Jhcnk6IHRydWUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2V0OiBzZXQsXHJcbiAgICAgICAgICAgIHNldFNpbXBsZTogc2V0U2ltcGxlLFxyXG4gICAgICAgICAgICBwYXR0ZXJuczogTGVkUGF0dGVybnMsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnZmx5YnJpeENvbW1vbicpLmZhY3RvcnkoJ3JjRGF0YScsIHJjRGF0YSk7XHJcblxyXG4gICAgcmNEYXRhLiRpbmplY3QgPSBbJ3NlcmlhbCddO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJjRGF0YShzZXJpYWwpIHtcclxuICAgICAgICB2YXIgQVVYID0ge1xyXG4gICAgICAgICAgICBMT1c6IDAsXHJcbiAgICAgICAgICAgIE1JRDogMSxcclxuICAgICAgICAgICAgSElHSDogMixcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBhdXhOYW1lcyA9IFsnbG93JywgJ21pZCcsICdoaWdoJ107XHJcblxyXG4gICAgICAgIHZhciB0aHJvdHRsZSA9IC0xO1xyXG4gICAgICAgIHZhciBwaXRjaCA9IDA7XHJcbiAgICAgICAgdmFyIHJvbGwgPSAwO1xyXG4gICAgICAgIHZhciB5YXcgPSAwO1xyXG4gICAgICAgIC8vIGRlZmF1bHRzIHRvIGhpZ2ggLS0gbG93IGlzIGVuYWJsaW5nOyBoaWdoIGlzIGRpc2FibGluZ1xyXG4gICAgICAgIHZhciBhdXgxID0gQVVYLkhJR0g7XHJcbiAgICAgICAgLy8gZGVmYXVsdHMgdG8gPz8gLS0gbmVlZCB0byBjaGVjayB0cmFuc21pdHRlciBiZWhhdmlvclxyXG4gICAgICAgIHZhciBhdXgyID0gQVVYLkhJR0g7XHJcblxyXG4gICAgICAgIHZhciB1cmdlbnQgPSB0cnVlO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZXRUaHJvdHRsZTogc2V0VGhyb3R0bGUsXHJcbiAgICAgICAgICAgIHNldFBpdGNoOiBzZXRQaXRjaCxcclxuICAgICAgICAgICAgc2V0Um9sbDogc2V0Um9sbCxcclxuICAgICAgICAgICAgc2V0WWF3OiBzZXRZYXcsXHJcbiAgICAgICAgICAgIHNldEF1eDE6IHNldEF1eDEsXHJcbiAgICAgICAgICAgIHNldEF1eDI6IHNldEF1eDIsXHJcbiAgICAgICAgICAgIGdldFRocm90dGxlOiBnZXRUaHJvdHRsZSxcclxuICAgICAgICAgICAgZ2V0UGl0Y2g6IGdldFBpdGNoLFxyXG4gICAgICAgICAgICBnZXRSb2xsOiBnZXRSb2xsLFxyXG4gICAgICAgICAgICBnZXRZYXc6IGdldFlhdyxcclxuICAgICAgICAgICAgZ2V0QXV4MTogZ2V0QXV4MSxcclxuICAgICAgICAgICAgZ2V0QXV4MjogZ2V0QXV4MixcclxuICAgICAgICAgICAgQVVYOiBBVVgsXHJcbiAgICAgICAgICAgIHNlbmQ6IHNlbmQsXHJcbiAgICAgICAgICAgIGZvcmNlTmV4dFNlbmQ6IGZvcmNlTmV4dFNlbmQsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VuZCgpIHtcclxuICAgICAgICAgICAgaWYgKCF1cmdlbnQgJiYgc2VyaWFsLmJ1c3koKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVyZ2VudCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbW1hbmQgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIC8vIGludmVydCBwaXRjaCBhbmQgcm9sbFxyXG4gICAgICAgICAgICB2YXIgdGhyb3R0bGVfdGhyZXNob2xkID1cclxuICAgICAgICAgICAgICAgIC0wLjg7ICAvLyBrZWVwIGJvdHRvbSAxMCUgb2YgdGhyb3R0bGUgc3RpY2sgdG8gbWVhbiAnb2ZmJ1xyXG4gICAgICAgICAgICBjb21tYW5kLnRocm90dGxlID0gY29uc3RyYWluKFxyXG4gICAgICAgICAgICAgICAgKHRocm90dGxlIC0gdGhyb3R0bGVfdGhyZXNob2xkKSAqIDQwOTUgL1xyXG4gICAgICAgICAgICAgICAgICAgICgxIC0gdGhyb3R0bGVfdGhyZXNob2xkKSxcclxuICAgICAgICAgICAgICAgIDAsIDQwOTUpO1xyXG4gICAgICAgICAgICBjb21tYW5kLnBpdGNoID1cclxuICAgICAgICAgICAgICAgIGNvbnN0cmFpbigtKGFwcGx5RGVhZHpvbmUocGl0Y2gsIDAuMSkpICogNDA5NSAvIDIsIC0yMDQ3LCAyMDQ3KTtcclxuICAgICAgICAgICAgY29tbWFuZC5yb2xsID1cclxuICAgICAgICAgICAgICAgIGNvbnN0cmFpbigoYXBwbHlEZWFkem9uZShyb2xsLCAwLjEpKSAqIDQwOTUgLyAyLCAtMjA0NywgMjA0Nyk7XHJcbiAgICAgICAgICAgIGNvbW1hbmQueWF3ID1cclxuICAgICAgICAgICAgICAgIGNvbnN0cmFpbigtKGFwcGx5RGVhZHpvbmUoeWF3LCAwLjEpKSAqIDQwOTUgLyAyLCAtMjA0NywgMjA0Nyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXV4X21hc2sgPSB7fTtcclxuICAgICAgICAgICAgLy8gYXV4MV9sb3csIGF1eDFfbWlkLCBhdXgxX2hpZ2gsIGFuZCBzYW1lIHdpdGggYXV4MlxyXG4gICAgICAgICAgICBhdXhfbWFza1snYXV4MV8nICsgYXV4TmFtZXNbYXV4MV1dID0gdHJ1ZTtcclxuICAgICAgICAgICAgYXV4X21hc2tbJ2F1eDJfJyArIGF1eE5hbWVzW2F1eDJdXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2VyaWFsLnNlbmRTdHJ1Y3R1cmUoJ0NvbW1hbmQnLCB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0X3Jlc3BvbnNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2V0X3NlcmlhbF9yYzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogY29tbWFuZCxcclxuICAgICAgICAgICAgICAgICAgICBhdXhfbWFzazogYXV4X21hc2ssXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRUaHJvdHRsZSh2KSB7XHJcbiAgICAgICAgICAgIHRocm90dGxlID0gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldFBpdGNoKHYpIHtcclxuICAgICAgICAgICAgcGl0Y2ggPSB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0Um9sbCh2KSB7XHJcbiAgICAgICAgICAgIHJvbGwgPSB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0WWF3KHYpIHtcclxuICAgICAgICAgICAgeWF3ID0gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEF1eDEodikge1xyXG4gICAgICAgICAgICBhdXgxID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMiwgdikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0QXV4Mih2KSB7XHJcbiAgICAgICAgICAgIGF1eDIgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigyLCB2KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRUaHJvdHRsZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRocm90dGxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UGl0Y2goKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwaXRjaDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFJvbGwoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByb2xsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0WWF3KCkge1xyXG4gICAgICAgICAgICByZXR1cm4geWF3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0QXV4MSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF1eDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRBdXgyKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXV4MjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZvcmNlTmV4dFNlbmQoKSB7XHJcbiAgICAgICAgICAgIHVyZ2VudCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjb25zdHJhaW4oeCwgeG1pbiwgeG1heCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoeG1pbiwgTWF0aC5taW4oeCwgeG1heCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYXBwbHlEZWFkem9uZSh2YWx1ZSwgZGVhZHpvbmUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID4gZGVhZHpvbmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSAtIGRlYWR6b25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IC1kZWFkem9uZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICsgZGVhZHpvbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2ZseWJyaXhDb21tb24nKS5mYWN0b3J5KCdzZXJpYWwnLCBzZXJpYWwpO1xyXG5cclxuICAgIHNlcmlhbC4kaW5qZWN0ID0gWyckdGltZW91dCcsICckcScsICdjb2JzJywgJ2NvbW1hbmRMb2cnLCAnZmlybXdhcmVWZXJzaW9uJywgJ3NlcmlhbGl6YXRpb25IYW5kbGVyJ107XHJcblxyXG4gICAgZnVuY3Rpb24gc2VyaWFsKCR0aW1lb3V0LCAkcSwgY29icywgY29tbWFuZExvZywgZmlybXdhcmVWZXJzaW9uLCBzZXJpYWxpemF0aW9uSGFuZGxlcikge1xyXG4gICAgICAgIHZhciBNZXNzYWdlVHlwZSA9IHtcclxuICAgICAgICAgICAgU3RhdGU6IDAsXHJcbiAgICAgICAgICAgIENvbW1hbmQ6IDEsXHJcbiAgICAgICAgICAgIERlYnVnU3RyaW5nOiAzLFxyXG4gICAgICAgICAgICBIaXN0b3J5RGF0YTogNCxcclxuICAgICAgICAgICAgUHJvdG9jb2w6IDEyOCxcclxuICAgICAgICAgICAgUmVzcG9uc2U6IDI1NSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgYWNrbm93bGVkZ2VzID0gW107XHJcbiAgICAgICAgdmFyIGJhY2tlbmQgPSBuZXcgQmFja2VuZCgpO1xyXG5cclxuICAgICAgICB2YXIgb25SZWNlaXZlTGlzdGVuZXJzID0gW107XHJcblxyXG4gICAgICAgIHZhciBjb2JzUmVhZGVyID0gbmV3IGNvYnMuUmVhZGVyKDEwMDAwKTtcclxuICAgICAgICB2YXIgYnl0ZXNIYW5kbGVyID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBCYWNrZW5kKCkge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQmFja2VuZC5wcm90b3R5cGUuYnVzeSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgQmFja2VuZC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgY29tbWFuZExvZygnTm8gXCJzZW5kXCIgZGVmaW5lZCBmb3Igc2VyaWFsIGJhY2tlbmQnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBCYWNrZW5kLnByb3RvdHlwZS5vblJlYWQgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbW1hbmRMb2coJ05vIFwib25SZWFkXCIgZGVmaW5lZCBmb3Igc2VyaWFsIGJhY2tlbmQnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgTWVzc2FnZVR5cGVJbnZlcnNpb24gPSBbXTtcclxuICAgICAgICBPYmplY3Qua2V5cyhNZXNzYWdlVHlwZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGVJbnZlcnNpb25bTWVzc2FnZVR5cGVba2V5XV0gPSBrZXk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFkZE9uUmVjZWl2ZUNhbGxiYWNrKGZ1bmN0aW9uKG1lc3NhZ2VUeXBlLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gJ1Jlc3BvbnNlJykge1xyXG4gICAgICAgICAgICAgICAgYWNrbm93bGVkZ2UobWVzc2FnZS5tYXNrLCBtZXNzYWdlLmFjayk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZVR5cGUgPT09ICdQcm90b2NvbCcpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbWVzc2FnZS5yZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXphdGlvbkhhbmRsZXIuYWRkSGFuZGxlcihkYXRhLnZlcnNpb24sIGRhdGEuc3RydWN0dXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBidXN5OiBidXN5LFxyXG4gICAgICAgICAgICBzZW5kU3RydWN0dXJlOiBzZW5kU3RydWN0dXJlLFxyXG4gICAgICAgICAgICBzZXRCYWNrZW5kOiBzZXRCYWNrZW5kLFxyXG4gICAgICAgICAgICBhZGRPblJlY2VpdmVDYWxsYmFjazogYWRkT25SZWNlaXZlQ2FsbGJhY2ssXHJcbiAgICAgICAgICAgIHJlbW92ZU9uUmVjZWl2ZUNhbGxiYWNrOiByZW1vdmVPblJlY2VpdmVDYWxsYmFjayxcclxuICAgICAgICAgICAgc2V0Qnl0ZXNIYW5kbGVyOiBzZXRCeXRlc0hhbmRsZXIsXHJcbiAgICAgICAgICAgIGhhbmRsZVBvc3RDb25uZWN0OiBoYW5kbGVQb3N0Q29ubmVjdCxcclxuICAgICAgICAgICAgQmFja2VuZDogQmFja2VuZCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRCYWNrZW5kKHYpIHtcclxuICAgICAgICAgICAgYmFja2VuZCA9IHY7XHJcbiAgICAgICAgICAgIGJhY2tlbmQub25SZWFkID0gcmVhZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVBvc3RDb25uZWN0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdEZpcm13YXJlVmVyc2lvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVxdWVzdEZpcm13YXJlVmVyc2lvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbmRTdHJ1Y3R1cmUoJ0NvbW1hbmQnLCB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0X3Jlc3BvbnNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVxX3BhcnRpYWxfZWVwcm9tX2RhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZW5kU3RydWN0dXJlKG1lc3NhZ2VUeXBlLCBkYXRhLCBsb2dfc2VuZCwgZXh0cmFNYXNrKSB7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gJ1N0YXRlJykge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHByb2Nlc3NTdGF0ZU91dHB1dChkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgaGFuZGxlcnMgPSBmaXJtd2FyZVZlcnNpb24uc2VyaWFsaXphdGlvbkhhbmRsZXIoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXNwb25zZSA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgIGlmICghKG1lc3NhZ2VUeXBlIGluIE1lc3NhZ2VUeXBlKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UucmVqZWN0KCdNZXNzYWdlIHR5cGUgXCInICsgbWVzc2FnZVR5cGUgK1xyXG4gICAgICAgICAgICAgICAgICAgICdcIiBub3Qgc3VwcG9ydGVkIGJ5IGFwcCwgc3VwcG9ydGVkIG1lc3NhZ2UgdHlwZXMgYXJlOicgK1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKE1lc3NhZ2VUeXBlKS5qb2luKCcsICcpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5wcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghKG1lc3NhZ2VUeXBlIGluIGhhbmRsZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UucmVqZWN0KCdNZXNzYWdlIHR5cGUgXCInICsgbWVzc2FnZVR5cGUgK1xyXG4gICAgICAgICAgICAgICAgICAgICdcIiBub3Qgc3VwcG9ydGVkIGJ5IGZpcm13YXJlLCBzdXBwb3J0ZWQgbWVzc2FnZSB0eXBlcyBhcmU6JyArXHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoaGFuZGxlcnMpLmpvaW4oJywgJykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb21pc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHR5cGVDb2RlID0gTWVzc2FnZVR5cGVbbWVzc2FnZVR5cGVdO1xyXG4gICAgICAgICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW21lc3NhZ2VUeXBlXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheShoYW5kbGVyLmJ5dGVDb3VudCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VyaWFsaXplciA9IG5ldyBzZXJpYWxpemF0aW9uSGFuZGxlci5TZXJpYWxpemVyKG5ldyBEYXRhVmlldyhidWZmZXIuYnVmZmVyKSk7XHJcbiAgICAgICAgICAgIGhhbmRsZXIuZW5jb2RlKHNlcmlhbGl6ZXIsIGRhdGEsIGV4dHJhTWFzayk7XHJcbiAgICAgICAgICAgIHZhciBtYXNrID0gaGFuZGxlci5tYXNrQXJyYXkoZGF0YSwgZXh0cmFNYXNrKTtcclxuICAgICAgICAgICAgaWYgKG1hc2subGVuZ3RoIDwgNSkge1xyXG4gICAgICAgICAgICAgICAgbWFzayA9IChtYXNrWzBdIDw8IDApIHwgKG1hc2tbMV0gPDwgOCkgfCAobWFza1syXSA8PCAxNikgfCAobWFza1szXSA8PCAyNCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhTGVuZ3RoID0gc2VyaWFsaXplci5pbmRleDtcclxuXHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBuZXcgVWludDhBcnJheShkYXRhTGVuZ3RoICsgMyk7XHJcbiAgICAgICAgICAgIG91dHB1dFswXSA9IG91dHB1dFsxXSA9IHR5cGVDb2RlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBkYXRhTGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0WzBdIF49IG91dHB1dFtpZHggKyAyXSA9IGJ1ZmZlcltpZHhdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dFtkYXRhTGVuZ3RoICsgMl0gPSAwO1xyXG5cclxuICAgICAgICAgICAgYWNrbm93bGVkZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgbWFzazogbWFzayxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiByZXNwb25zZSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGJhY2tlbmQuc2VuZChuZXcgVWludDhBcnJheShjb2JzLmVuY29kZShvdXRwdXQpKSk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxvZ19zZW5kKSB7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kTG9nKCdTZW5kaW5nIGNvbW1hbmQgJyArIHR5cGVDb2RlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBidXN5KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYmFja2VuZC5idXN5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRCeXRlc0hhbmRsZXIoaGFuZGxlcikge1xyXG4gICAgICAgICAgICBieXRlc0hhbmRsZXIgPSBoYW5kbGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVhZChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChieXRlc0hhbmRsZXIpXHJcbiAgICAgICAgICAgICAgICBieXRlc0hhbmRsZXIoZGF0YSwgcHJvY2Vzc0RhdGEpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBjb2JzUmVhZGVyLnJlYWRCeXRlcyhkYXRhLCBwcm9jZXNzRGF0YSwgcmVwb3J0SXNzdWVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlcG9ydElzc3Vlcyhpc3N1ZSwgdGV4dCkge1xyXG4gICAgICAgICAgICBjb21tYW5kTG9nKCdDT0JTIGRlY29kaW5nIGZhaWxlZCAoJyArIGlzc3VlICsgJyk6ICcgKyB0ZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZE9uUmVjZWl2ZUNhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIG9uUmVjZWl2ZUxpc3RlbmVycyA9IG9uUmVjZWl2ZUxpc3RlbmVycy5jb25jYXQoW2NhbGxiYWNrXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVPblJlY2VpdmVDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBvblJlY2VpdmVMaXN0ZW5lcnMgPSBvblJlY2VpdmVMaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uKGNiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2IgIT09IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFja25vd2xlZGdlKG1hc2ssIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChhY2tub3dsZWRnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHYgPSBhY2tub3dsZWRnZXMuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIGlmICh2Lm1hc2sgXiBtYXNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5yZXNwb25zZS5yZWplY3QoJ01pc3NpbmcgQUNLJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVsYXhlZE1hc2sgPSBtYXNrO1xyXG4gICAgICAgICAgICAgICAgcmVsYXhlZE1hc2sgJj0gfjE7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVsYXhlZE1hc2sgXiB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHYucmVzcG9uc2UucmVqZWN0KCdSZXF1ZXN0IHdhcyBub3QgZnVsbHkgcHJvY2Vzc2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2LnJlc3BvbnNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzRGF0YShieXRlcykge1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZVR5cGUgPSBNZXNzYWdlVHlwZUludmVyc2lvbltieXRlc1swXV07XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVyID0gZmlybXdhcmVWZXJzaW9uLnNlcmlhbGl6YXRpb25IYW5kbGVyKClbbWVzc2FnZVR5cGVdO1xyXG4gICAgICAgICAgICBpZiAoIW1lc3NhZ2VUeXBlIHx8ICFoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kTG9nKCdJbGxlZ2FsIG1lc3NhZ2UgdHlwZSBwYXNzZWQgZnJvbSBmaXJtd2FyZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWFsaXplciA9IG5ldyBzZXJpYWxpemF0aW9uSGFuZGxlci5TZXJpYWxpemVyKG5ldyBEYXRhVmlldyhieXRlcy5idWZmZXIsIDEpKTtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gaGFuZGxlci5kZWNvZGUoc2VyaWFsaXplcik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29tbWFuZExvZygnVW5yZWNvZ25pemVkIG1lc3NhZ2UgZm9ybWF0IHJlY2VpdmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VUeXBlID09PSAnU3RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gcHJvY2Vzc1N0YXRlSW5wdXQobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb25SZWNlaXZlTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24obGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKG1lc3NhZ2VUeXBlLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbGFzdF90aW1lc3RhbXBfdXMgPSAwO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzU3RhdGVJbnB1dChzdGF0ZSkge1xyXG4gICAgICAgICAgICBzdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlKTtcclxuICAgICAgICAgICAgdmFyIHNlcmlhbF91cGRhdGVfcmF0ZV9IeiA9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoJ3RpbWVzdGFtcF91cycgaW4gc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnNlcmlhbF91cGRhdGVfcmF0ZV9lc3RpbWF0ZSA9IDEwMDAwMDAgLyAoc3RhdGUudGltZXN0YW1wX3VzIC0gbGFzdF90aW1lc3RhbXBfdXMpO1xyXG4gICAgICAgICAgICAgICAgbGFzdF90aW1lc3RhbXBfdXMgPSBzdGF0ZS50aW1lc3RhbXBfdXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCd0ZW1wZXJhdHVyZScgaW4gc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnRlbXBlcmF0dXJlIC89IDEwMC4wOyAgLy8gdGVtcGVyYXR1cmUgZ2l2ZW4gaW4gQ2Vsc2l1cyAqIDEwMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgncHJlc3N1cmUnIGluIHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wcmVzc3VyZSAvPSAyNTYuMDsgIC8vIHByZXNzdXJlIGdpdmVuIGluIChRMjQuOCkgZm9ybWF0XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NTdGF0ZU91dHB1dChzdGF0ZSkge1xyXG4gICAgICAgICAgICBzdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlKTtcclxuICAgICAgICAgICAgaWYgKCd0ZW1wZXJhdHVyZScgaW4gc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnRlbXBlcmF0dXJlICo9IDEwMC4wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgncHJlc3N1cmUnIGluIHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wcmVzc3VyZSAqPSAyNTYuMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHNlcmlhbGl6YXRpb25IYW5kbGVyLiRpbmplY3QgPSBbXTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnZmx5YnJpeENvbW1vbicpLmZhY3RvcnkoJ3NlcmlhbGl6YXRpb25IYW5kbGVyJywgc2VyaWFsaXphdGlvbkhhbmRsZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNlcmlhbGl6YXRpb25IYW5kbGVyKCkge1xyXG4gICAgICAgIHZhciBoYW5kbGVyQ2FjaGUgPSB7fTtcclxuICAgICAgICB2YXIgdmVyc2lvbiA9ICdWZXJzaW9uID0geyBtYWpvcjogdTgsIG1pbm9yOiB1OCwgcGF0Y2g6IHU4IH07JztcclxuICAgICAgICB2YXIgY29uZmlnSWQgPSAnQ29uZmlnSUQgPSB1MzI7JztcclxuXHJcbiAgICAgICAgdmFyIHZlY3RvcjNmID0gJ1ZlY3RvcjNmID0geyB4OiBmMzIsIHk6IGYzMiwgejogZjMyIH07JztcclxuXHJcbiAgICAgICAgdmFyIHBjYlRyYW5zZm9ybSA9ICdQY2JUcmFuc2Zvcm0gPSB7IG9yaWVudGF0aW9uOiBWZWN0b3IzZiwgdHJhbnNsYXRpb246IFZlY3RvcjNmIH07JztcclxuICAgICAgICB2YXIgbWl4VGFibGUgPSAnTWl4VGFibGUgPSB7IGZ6OiBbaTg6OF0sIHR4OiBbaTg6OF0sIHR5OiBbaTg6OF0sIHR6OiBbaTg6OF0gfTsnO1xyXG4gICAgICAgIHZhciBtYWdCaWFzID0gJ01hZ0JpYXMgPSB7IG9mZnNldDogVmVjdG9yM2YgfTsnO1xyXG4gICAgICAgIHZhciBjaGFubmVsUHJvcGVydGllcyA9ICdDaGFubmVsUHJvcGVydGllcyA9IHsnICtcclxuICAgICAgICAgICAgJ2Fzc2lnbm1lbnQ6IFt1ODo2XSwnICtcclxuICAgICAgICAgICAgJ2ludmVyc2lvbjogdTgsJyArXHJcbiAgICAgICAgICAgICdtaWRwb2ludDogW3UxNjo2XSwnICtcclxuICAgICAgICAgICAgJ2RlYWR6b25lOiBbdTE2OjZdIH07JztcclxuXHJcbiAgICAgICAgdmFyIHBpZFNldHRpbmdzID0gJ1BJRFNldHRpbmdzID0geycgK1xyXG4gICAgICAgICAgICAna3A6IGYzMiwnICtcclxuICAgICAgICAgICAgJ2tpOiBmMzIsJyArXHJcbiAgICAgICAgICAgICdrZDogZjMyLCcgK1xyXG4gICAgICAgICAgICAnaW50ZWdyYWxfd2luZHVwX2d1YXJkOiBmMzIsJyArXHJcbiAgICAgICAgICAgICdkX2ZpbHRlcl90aW1lOiBmMzIsJyArXHJcbiAgICAgICAgICAgICdzZXRwb2ludF9maWx0ZXJfdGltZTogZjMyLCcgK1xyXG4gICAgICAgICAgICAnY29tbWFuZF90b192YWx1ZTogZjMyIH07JztcclxuICAgICAgICB2YXIgcGlkUGFyYW1ldGVyczE0ID0gJ1BJRFBhcmFtZXRlcnMgPSB7JyArXHJcbiAgICAgICAgICAgICd0aHJ1c3RfbWFzdGVyOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3BpdGNoX21hc3RlcjogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdyb2xsX21hc3RlcjogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICd5YXdfbWFzdGVyOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3RocnVzdF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdwaXRjaF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdyb2xsX3NsYXZlOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3lhd19zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdwaWRfYnlwYXNzOiB1OCB9Oyc7XHJcbiAgICAgICAgdmFyIHBpZFBhcmFtZXRlcnMgPSAnUElEUGFyYW1ldGVycyA9IHsnICtcclxuICAgICAgICAgICAgJ3RocnVzdF9tYXN0ZXI6IFBJRFNldHRpbmdzLCcgK1xyXG4gICAgICAgICAgICAncGl0Y2hfbWFzdGVyOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3JvbGxfbWFzdGVyOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3lhd19tYXN0ZXI6IFBJRFNldHRpbmdzLCcgK1xyXG4gICAgICAgICAgICAndGhydXN0X3NsYXZlOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3BpdGNoX3NsYXZlOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3JvbGxfc2xhdmU6IFBJRFNldHRpbmdzLCcgK1xyXG4gICAgICAgICAgICAneWF3X3NsYXZlOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3RocnVzdF9nYWluOiBmMzIsJyArXHJcbiAgICAgICAgICAgICdwaXRjaF9nYWluOiBmMzIsJyArXHJcbiAgICAgICAgICAgICdyb2xsX2dhaW46IGYzMiwnICtcclxuICAgICAgICAgICAgJ3lhd19nYWluOiBmMzIsJyArXHJcbiAgICAgICAgICAgICdwaWRfYnlwYXNzOiB1OCB9Oyc7XHJcblxyXG4gICAgICAgIHZhciBzdGF0ZVBhcmFtZXRlcnMgPSAnU3RhdGVQYXJhbWV0ZXJzID0geyBzdGF0ZV9lc3RpbWF0aW9uOiBbZjMyOjJdLCBlbmFibGU6IFtmMzI6Ml0gfTsnO1xyXG5cclxuICAgICAgICB2YXIgc3RhdHVzRmxhZzE0MTUgPSAnU3RhdHVzRmxhZyA9IHsvMTYvJyArXHJcbiAgICAgICAgICAgICdib290OiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbXB1X2ZhaWw6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdibXBfZmFpbDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3J4X2ZhaWw6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdpZGxlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnZW5hYmxpbmc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdjbGVhcl9tcHVfYmlhczogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3NldF9tcHVfYmlhczogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2ZhaWxfc3RhYmlsaXR5OiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnZmFpbF9hbmdsZTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2VuYWJsZWQ6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdiYXR0ZXJ5X2xvdzogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3RlbXBfd2FybmluZzogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2xvZ19mdWxsOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnZmFpbF9vdGhlcjogdm9pZCwnICtcclxuICAgICAgICAgICAgJ292ZXJyaWRlOiB2b2lkIH07JztcclxuXHJcbiAgICAgICAgdmFyIHN0YXR1c0ZsYWcgPSAnU3RhdHVzRmxhZyA9IHsvMTYvJyArXHJcbiAgICAgICAgICAgICdfMDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ18xOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnXzI6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdub19zaWduYWw6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdpZGxlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnYXJtaW5nOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncmVjb3JkaW5nX3NkOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnXzc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdsb29wX3Nsb3c6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdfOTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2FybWVkOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnYmF0dGVyeV9sb3c6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdiYXR0ZXJ5X2NyaXRpY2FsOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbG9nX2Z1bGw6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdjcmFzaF9kZXRlY3RlZDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ292ZXJyaWRlOiB2b2lkIH07JztcclxuXHJcbiAgICAgICAgdmFyIGNvbG9yID0gJ0NvbG9yID0geyByZWQ6IHU4LCBncmVlbjogdTgsIGJsdWU6IHU4IH07JztcclxuICAgICAgICB2YXIgbGVkU3RhdGVDYXNlID0gJ0xFRFN0YXRlQ2FzZSA9IHsnICtcclxuICAgICAgICAgICAgJ3N0YXR1czogU3RhdHVzRmxhZywnICtcclxuICAgICAgICAgICAgJ3BhdHRlcm46IHU4LCcgK1xyXG4gICAgICAgICAgICAnY29sb3JfcmlnaHRfZnJvbnQ6IENvbG9yLCcgK1xyXG4gICAgICAgICAgICAnY29sb3JfcmlnaHRfYmFjazogQ29sb3IsJyArXHJcbiAgICAgICAgICAgICdjb2xvcl9sZWZ0X2Zyb250OiBDb2xvciwnICtcclxuICAgICAgICAgICAgJ2NvbG9yX2xlZnRfYmFjazogQ29sb3IsJyArXHJcbiAgICAgICAgICAgICdpbmRpY2F0b3JfcmVkOiBib29sLCcgK1xyXG4gICAgICAgICAgICAnaW5kaWNhdG9yX2dyZWVuOiBib29sIH07JztcclxuICAgICAgICB2YXIgbGVkU3RhdGVzID0gJ0xFRFN0YXRlcyA9IFsvMTYvTEVEU3RhdGVDYXNlOjE2XTsnO1xyXG4gICAgICAgIHZhciBsZWRTdGF0ZXNGaXhlZCA9ICdMRURTdGF0ZXNGaXhlZCA9IFtMRURTdGF0ZUNhc2U6MTZdOyc7XHJcblxyXG4gICAgICAgIHZhciBkZXZpY2VOYW1lID0gJ0RldmljZU5hbWUgPSBzOTsnO1xyXG5cclxuICAgICAgICB2YXIgdmVsb2NpdHlQaWRQYXJhbWV0ZXJzID0gJ1ZlbG9jaXR5UElEUGFyYW1ldGVycyA9IHsnICtcclxuICAgICAgICAgICAgJ2ZvcndhcmRfbWFzdGVyOiBQSURTZXR0aW5ncywnICtcclxuICAgICAgICAgICAgJ3JpZ2h0X21hc3RlcjogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICd1cF9tYXN0ZXI6IFBJRFNldHRpbmdzLCcgK1xyXG4gICAgICAgICAgICAnZm9yd2FyZF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdyaWdodF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICd1cF9zbGF2ZTogUElEU2V0dGluZ3MsJyArXHJcbiAgICAgICAgICAgICdwaWRfYnlwYXNzOiB1OCB9Oyc7XHJcblxyXG4gICAgICAgIHZhciBpbmVydGlhbEJpYXMgPSAnSW5lcnRpYWxCaWFzID0geyBhY2NlbDogVmVjdG9yM2YsIGd5cm86IFZlY3RvcjNmIH07JztcclxuXHJcbiAgICAgICAgdmFyIGNvbmZpZzE0MTUgPSAnQ29uZmlndXJhdGlvbiA9IHsvMTYvJyArXHJcbiAgICAgICAgICAgICd2ZXJzaW9uOiBWZXJzaW9uLCcgK1xyXG4gICAgICAgICAgICAnY29uZmlnX2lkOiBDb25maWdJRCwnICtcclxuICAgICAgICAgICAgJ3BjYl90cmFuc2Zvcm06IFBjYlRyYW5zZm9ybSwnICtcclxuICAgICAgICAgICAgJ21peF90YWJsZTogTWl4VGFibGUsJyArXHJcbiAgICAgICAgICAgICdtYWdfYmlhczogTWFnQmlhcywnICtcclxuICAgICAgICAgICAgJ2NoYW5uZWw6IENoYW5uZWxQcm9wZXJ0aWVzLCcgK1xyXG4gICAgICAgICAgICAncGlkX3BhcmFtZXRlcnM6IFBJRFBhcmFtZXRlcnMsJyArXHJcbiAgICAgICAgICAgICdzdGF0ZV9wYXJhbWV0ZXJzOiBTdGF0ZVBhcmFtZXRlcnMsJyArXHJcbiAgICAgICAgICAgICdsZWRfc3RhdGVzOiBMRURTdGF0ZXMsJyArXHJcbiAgICAgICAgICAgICdkZXZpY2VfbmFtZTogRGV2aWNlTmFtZSB9Oyc7XHJcblxyXG4gICAgICAgIHZhciBjb25maWdGaXhlZDE0MTUgPSAnQ29uZmlndXJhdGlvbkZpeGVkID0geycgK1xyXG4gICAgICAgICAgICAndmVyc2lvbjogVmVyc2lvbiwnICtcclxuICAgICAgICAgICAgJ2NvbmZpZ19pZDogQ29uZmlnSUQsJyArXHJcbiAgICAgICAgICAgICdwY2JfdHJhbnNmb3JtOiBQY2JUcmFuc2Zvcm0sJyArXHJcbiAgICAgICAgICAgICdtaXhfdGFibGU6IE1peFRhYmxlLCcgK1xyXG4gICAgICAgICAgICAnbWFnX2JpYXM6IE1hZ0JpYXMsJyArXHJcbiAgICAgICAgICAgICdjaGFubmVsOiBDaGFubmVsUHJvcGVydGllcywnICtcclxuICAgICAgICAgICAgJ3BpZF9wYXJhbWV0ZXJzOiBQSURQYXJhbWV0ZXJzLCcgK1xyXG4gICAgICAgICAgICAnc3RhdGVfcGFyYW1ldGVyczogU3RhdGVQYXJhbWV0ZXJzLCcgK1xyXG4gICAgICAgICAgICAnbGVkX3N0YXRlczogTEVEU3RhdGVzRml4ZWQsJyArXHJcbiAgICAgICAgICAgICdkZXZpY2VfbmFtZTogRGV2aWNlTmFtZSB9Oyc7XHJcblxyXG4gICAgICAgIHZhciBjb25maWcgPSAnQ29uZmlndXJhdGlvbiA9IHsvMTYvJyArXHJcbiAgICAgICAgICAgICd2ZXJzaW9uOiBWZXJzaW9uLCcgK1xyXG4gICAgICAgICAgICAnY29uZmlnX2lkOiBDb25maWdJRCwnICtcclxuICAgICAgICAgICAgJ3BjYl90cmFuc2Zvcm06IFBjYlRyYW5zZm9ybSwnICtcclxuICAgICAgICAgICAgJ21peF90YWJsZTogTWl4VGFibGUsJyArXHJcbiAgICAgICAgICAgICdtYWdfYmlhczogTWFnQmlhcywnICtcclxuICAgICAgICAgICAgJ2NoYW5uZWw6IENoYW5uZWxQcm9wZXJ0aWVzLCcgK1xyXG4gICAgICAgICAgICAncGlkX3BhcmFtZXRlcnM6IFBJRFBhcmFtZXRlcnMsJyArXHJcbiAgICAgICAgICAgICdzdGF0ZV9wYXJhbWV0ZXJzOiBTdGF0ZVBhcmFtZXRlcnMsJyArXHJcbiAgICAgICAgICAgICdsZWRfc3RhdGVzOiBMRURTdGF0ZXMsJyArXHJcbiAgICAgICAgICAgICdkZXZpY2VfbmFtZTogRGV2aWNlTmFtZSwnICtcclxuICAgICAgICAgICAgJ3ZlbG9jaXR5X3BpZF9wYXJhbWV0ZXJzOiBWZWxvY2l0eVBJRFBhcmFtZXRlcnMsJyArXHJcbiAgICAgICAgICAgICdpbmVydGlhbF9iaWFzOiBJbmVydGlhbEJpYXMgfTsnO1xyXG5cclxuICAgICAgICB2YXIgY29uZmlnRml4ZWQgPSAnQ29uZmlndXJhdGlvbkZpeGVkID0geycgK1xyXG4gICAgICAgICAgICAndmVyc2lvbjogVmVyc2lvbiwnICtcclxuICAgICAgICAgICAgJ2NvbmZpZ19pZDogQ29uZmlnSUQsJyArXHJcbiAgICAgICAgICAgICdwY2JfdHJhbnNmb3JtOiBQY2JUcmFuc2Zvcm0sJyArXHJcbiAgICAgICAgICAgICdtaXhfdGFibGU6IE1peFRhYmxlLCcgK1xyXG4gICAgICAgICAgICAnbWFnX2JpYXM6IE1hZ0JpYXMsJyArXHJcbiAgICAgICAgICAgICdjaGFubmVsOiBDaGFubmVsUHJvcGVydGllcywnICtcclxuICAgICAgICAgICAgJ3BpZF9wYXJhbWV0ZXJzOiBQSURQYXJhbWV0ZXJzLCcgK1xyXG4gICAgICAgICAgICAnc3RhdGVfcGFyYW1ldGVyczogU3RhdGVQYXJhbWV0ZXJzLCcgK1xyXG4gICAgICAgICAgICAnbGVkX3N0YXRlczogTEVEU3RhdGVzRml4ZWQsJyArXHJcbiAgICAgICAgICAgICdkZXZpY2VfbmFtZTogRGV2aWNlTmFtZSwnICtcclxuICAgICAgICAgICAgJ3ZlbG9jaXR5X3BpZF9wYXJhbWV0ZXJzOiBWZWxvY2l0eVBJRFBhcmFtZXRlcnMsJyArXHJcbiAgICAgICAgICAgICdpbmVydGlhbF9iaWFzOiBJbmVydGlhbEJpYXMgfTsnO1xyXG5cclxuICAgICAgICB2YXIgY29uZmlnRmxhZzE0ID0gJ0NvbmZpZ3VyYXRpb25GbGFnID0gey8xNi8nICtcclxuICAgICAgICAgICAgJ3ZlcnNpb246IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdjb25maWdfaWQ6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdwY2JfdHJhbnNmb3JtOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbWl4X3RhYmxlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbWFnX2JpYXM6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdjaGFubmVsOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncGlkX3BhcmFtZXRlcnM6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdzdGF0ZV9wYXJhbWV0ZXJzOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbGVkX3N0YXRlczogWy8vIHZvaWQ6MTZdLCcgK1xyXG4gICAgICAgICAgICAnZGV2aWNlX25hbWU6IHZvaWR9Oyc7XHJcblxyXG4gICAgICAgIHZhciBjb25maWdGbGFnID0gJ0NvbmZpZ3VyYXRpb25GbGFnID0gey8xNi8nICtcclxuICAgICAgICAgICAgJ3ZlcnNpb246IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdjb25maWdfaWQ6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdwY2JfdHJhbnNmb3JtOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbWl4X3RhYmxlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbWFnX2JpYXM6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdjaGFubmVsOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncGlkX3BhcmFtZXRlcnM6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdzdGF0ZV9wYXJhbWV0ZXJzOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbGVkX3N0YXRlczogWy8vIHZvaWQ6MTZdLCcgK1xyXG4gICAgICAgICAgICAnZGV2aWNlX25hbWU6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICd2ZWxvY2l0eV9waWRfcGFyYW1ldGVyczogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2luZXJ0aWFsX2JpYXM6IHZvaWQgfTsnO1xyXG5cclxuICAgICAgICB2YXIgY29uZmlnRnVsbDE0ID0gdmVjdG9yM2YgKyBwaWRTZXR0aW5ncyArIHZlcnNpb24gKyBjb25maWdJZCArIHBjYlRyYW5zZm9ybSArXHJcbiAgICAgICAgICAgIG1peFRhYmxlICsgbWFnQmlhcyArIGNoYW5uZWxQcm9wZXJ0aWVzICsgcGlkUGFyYW1ldGVyczE0ICsgc3RhdGVQYXJhbWV0ZXJzICtcclxuICAgICAgICAgICAgc3RhdHVzRmxhZzE0MTUgKyBjb2xvciArIGxlZFN0YXRlQ2FzZSArIGxlZFN0YXRlcyArIGxlZFN0YXRlc0ZpeGVkICsgZGV2aWNlTmFtZSArXHJcbiAgICAgICAgICAgIGNvbmZpZzE0MTUgKyBjb25maWdGaXhlZDE0MTUgKyBjb25maWdGbGFnMTQ7XHJcbiAgICAgICAgdmFyIGNvbmZpZ0Z1bGwxNSA9IHZlY3RvcjNmICsgcGlkU2V0dGluZ3MgKyB2ZXJzaW9uICsgY29uZmlnSWQgKyBwY2JUcmFuc2Zvcm0gKyBtaXhUYWJsZSArXHJcbiAgICAgICAgICAgIG1hZ0JpYXMgKyBjaGFubmVsUHJvcGVydGllcyArIHBpZFBhcmFtZXRlcnMgKyBzdGF0ZVBhcmFtZXRlcnMgK1xyXG4gICAgICAgICAgICBzdGF0dXNGbGFnMTQxNSArIGNvbG9yICsgbGVkU3RhdGVDYXNlICsgbGVkU3RhdGVzICsgbGVkU3RhdGVzRml4ZWQgKyBkZXZpY2VOYW1lICtcclxuICAgICAgICAgICAgY29uZmlnMTQxNSArIGNvbmZpZ0ZpeGVkMTQxNSArIGNvbmZpZ0ZsYWc7XHJcbiAgICAgICAgdmFyIGNvbmZpZ0Z1bGwxNiA9IHZlY3RvcjNmICsgcGlkU2V0dGluZ3MgKyB2ZXJzaW9uICsgY29uZmlnSWQgKyBwY2JUcmFuc2Zvcm0gKyBtaXhUYWJsZSArXHJcbiAgICAgICAgICAgIG1hZ0JpYXMgKyBjaGFubmVsUHJvcGVydGllcyArIHBpZFBhcmFtZXRlcnMgKyBzdGF0ZVBhcmFtZXRlcnMgK1xyXG4gICAgICAgICAgICBzdGF0dXNGbGFnICsgY29sb3IgKyBsZWRTdGF0ZUNhc2UgKyBsZWRTdGF0ZXMgKyBsZWRTdGF0ZXNGaXhlZCArIGRldmljZU5hbWUgK1xyXG4gICAgICAgICAgICBpbmVydGlhbEJpYXMgKyB2ZWxvY2l0eVBpZFBhcmFtZXRlcnMgK1xyXG4gICAgICAgICAgICBjb25maWcgKyBjb25maWdGaXhlZCArIGNvbmZpZ0ZsYWc7XHJcblxyXG4gICAgICAgIHZhciBzdGF0ZSA9ICdSb3RhdGlvbiA9IHsgcm9sbDogZjMyLCBwaXRjaDogZjMyLCB5YXc6IGYzMiB9OycgK1xyXG4gICAgICAgICAgICAnUElEU3RhdGUgPSB7JyArXHJcbiAgICAgICAgICAgICd0aW1lc3RhbXBfdXM6IHUzMiwnICtcclxuICAgICAgICAgICAgJ2lucHV0OiBmMzIsJyArXHJcbiAgICAgICAgICAgICdzZXRwb2ludDogZjMyLCcgK1xyXG4gICAgICAgICAgICAncF90ZXJtOiBmMzIsJyArXHJcbiAgICAgICAgICAgICdpX3Rlcm06IGYzMiwnICtcclxuICAgICAgICAgICAgJ2RfdGVybTogZjMyIH07JyArXHJcbiAgICAgICAgICAgICdSY0NvbW1hbmQgPSB7IHRocm90dGxlOiBpMTYsIHBpdGNoOiBpMTYsIHJvbGw6IGkxNiwgeWF3OiBpMTYgfTsnICtcclxuICAgICAgICAgICAgJ1N0YXRlID0gey8zMi8nICtcclxuICAgICAgICAgICAgJ3RpbWVzdGFtcF91czogdTMyLCcgK1xyXG4gICAgICAgICAgICAnc3RhdHVzOiBTdGF0dXNGbGFnLCcgK1xyXG4gICAgICAgICAgICAndjBfcmF3OiB1MTYsJyArXHJcbiAgICAgICAgICAgICdpMF9yYXc6IHUxNiwnICtcclxuICAgICAgICAgICAgJ2kxX3JhdzogdTE2LCcgK1xyXG4gICAgICAgICAgICAnYWNjZWw6IFZlY3RvcjNmLCcgK1xyXG4gICAgICAgICAgICAnZ3lybzogVmVjdG9yM2YsJyArXHJcbiAgICAgICAgICAgICdtYWc6IFZlY3RvcjNmLCcgK1xyXG4gICAgICAgICAgICAndGVtcGVyYXR1cmU6IHUxNiwnICtcclxuICAgICAgICAgICAgJ3ByZXNzdXJlOiB1MzIsJyArXHJcbiAgICAgICAgICAgICdwcG06IFtpMTY6Nl0sJyArXHJcbiAgICAgICAgICAgICdhdXhfY2hhbl9tYXNrOiB1OCwnICtcclxuICAgICAgICAgICAgJ2NvbW1hbmQ6IFJjQ29tbWFuZCwnICtcclxuICAgICAgICAgICAgJ2NvbnRyb2w6IHsgZno6IGYzMiwgdHg6IGYzMiwgdHk6IGYzMiwgdHo6IGYzMiB9LCcgK1xyXG4gICAgICAgICAgICAncGlkX21hc3Rlcl9mejogUElEU3RhdGUsJyArXHJcbiAgICAgICAgICAgICdwaWRfbWFzdGVyX3R4OiBQSURTdGF0ZSwnICtcclxuICAgICAgICAgICAgJ3BpZF9tYXN0ZXJfdHk6IFBJRFN0YXRlLCcgK1xyXG4gICAgICAgICAgICAncGlkX21hc3Rlcl90ejogUElEU3RhdGUsJyArXHJcbiAgICAgICAgICAgICdwaWRfc2xhdmVfZno6IFBJRFN0YXRlLCcgK1xyXG4gICAgICAgICAgICAncGlkX3NsYXZlX3R4OiBQSURTdGF0ZSwnICtcclxuICAgICAgICAgICAgJ3BpZF9zbGF2ZV90eTogUElEU3RhdGUsJyArXHJcbiAgICAgICAgICAgICdwaWRfc2xhdmVfdHo6IFBJRFN0YXRlLCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3V0OiBbaTE2OjhdLCcgK1xyXG4gICAgICAgICAgICAna2luZW1hdGljc19hbmdsZTogUm90YXRpb24sJyArXHJcbiAgICAgICAgICAgICdraW5lbWF0aWNzX3JhdGU6IFJvdGF0aW9uLCcgK1xyXG4gICAgICAgICAgICAna2luZW1hdGljc19hbHRpdHVkZTogZjMyLCcgK1xyXG4gICAgICAgICAgICAnbG9vcF9jb3VudDogdTMyIH07JyArXHJcbiAgICAgICAgICAgICdTdGF0ZUZpZWxkcyA9IHsvMzIvJyArXHJcbiAgICAgICAgICAgICd0aW1lc3RhbXBfdXM6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdzdGF0dXM6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICd2MF9yYXc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdpMF9yYXc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdpMV9yYXc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdhY2NlbDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2d5cm86IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdtYWc6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICd0ZW1wZXJhdHVyZTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3ByZXNzdXJlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncHBtOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnYXV4X2NoYW5fbWFzazogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2NvbW1hbmQ6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdjb250cm9sOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncGlkX21hc3Rlcl9mejogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9tYXN0ZXJfdHg6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdwaWRfbWFzdGVyX3R5OiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAncGlkX21hc3Rlcl90ejogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9zbGF2ZV9mejogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9zbGF2ZV90eDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9zbGF2ZV90eTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3BpZF9zbGF2ZV90ejogdm9pZCwnICtcclxuICAgICAgICAgICAgJ21vdG9yX291dDogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2tpbmVtYXRpY3NfYW5nbGU6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdraW5lbWF0aWNzX3JhdGU6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdraW5lbWF0aWNzX2FsdGl0dWRlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnbG9vcF9jb3VudDogdm9pZCB9Oyc7XHJcblxyXG4gICAgICAgIHZhciBhdXhNYXNrID0gJ0F1eE1hc2sgPSB7Ly8nICtcclxuICAgICAgICAgICAgJ2F1eDFfbG93OiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnYXV4MV9taWQ6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdhdXgxX2hpZ2g6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdhdXgyX2xvdzogdm9pZCwnICtcclxuICAgICAgICAgICAgJ2F1eDJfbWlkOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnYXV4Ml9oaWdoOiB2b2lkIH07JztcclxuXHJcbiAgICAgICAgdmFyIGNvbW1hbmRzID0gYXV4TWFzayArICdDb21tYW5kID0gey8zMi8nICtcclxuICAgICAgICAgICAgJ3JlcXVlc3RfcmVzcG9uc2U6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdzZXRfZWVwcm9tX2RhdGE6IENvbmZpZ3VyYXRpb25GaXhlZCwnICtcclxuICAgICAgICAgICAgJ3JlaW5pdF9lZXByb21fZGF0YTogdm9pZCwnICtcclxuICAgICAgICAgICAgJ3JlcXVlc3RfZWVwcm9tX2RhdGE6IHZvaWQsJyArXHJcbiAgICAgICAgICAgICdyZXF1ZXN0X2VuYWJsZV9pdGVyYXRpb246IHU4LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfMDogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfMTogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfMjogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfMzogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfNDogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfNTogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfNjogdTE2LCcgK1xyXG4gICAgICAgICAgICAnbW90b3Jfb3ZlcnJpZGVfc3BlZWRfNzogdTE2LCcgK1xyXG4gICAgICAgICAgICAnc2V0X2NvbW1hbmRfb3ZlcnJpZGU6IGJvb2wsJyArXHJcbiAgICAgICAgICAgICdzZXRfc3RhdGVfbWFzazogU3RhdGVGaWVsZHMsJyArXHJcbiAgICAgICAgICAgICdzZXRfc3RhdGVfZGVsYXk6IHUxNiwnICtcclxuICAgICAgICAgICAgJ3NldF9zZF93cml0ZV9kZWxheTogdTE2LCcgK1xyXG4gICAgICAgICAgICAnc2V0X2xlZDogeycgK1xyXG4gICAgICAgICAgICAnICBwYXR0ZXJuOiB1OCwnICtcclxuICAgICAgICAgICAgJyAgY29sb3JfcmlnaHQ6IENvbG9yLCcgK1xyXG4gICAgICAgICAgICAnICBjb2xvcl9sZWZ0OiBDb2xvciwnICtcclxuICAgICAgICAgICAgJyAgaW5kaWNhdG9yX3JlZDogYm9vbCwnICtcclxuICAgICAgICAgICAgJyAgaW5kaWNhdG9yX2dyZWVuOiBib29sIH0sJyArXHJcbiAgICAgICAgICAgICdzZXRfc2VyaWFsX3JjOiB7IGVuYWJsZWQ6IGJvb2wsIGNvbW1hbmQ6IFJjQ29tbWFuZCwgYXV4X21hc2s6IEF1eE1hc2sgfSwnICtcclxuICAgICAgICAgICAgJ3NldF9jYXJkX3JlY29yZGluZ19zdGF0ZTogey84LyByZWNvcmRfdG9fY2FyZDogdm9pZCwgbG9ja19yZWNvcmRpbmdfc3RhdGU6IHZvaWQgfSwnICtcclxuICAgICAgICAgICAgJ3NldF9wYXJ0aWFsX2VlcHJvbV9kYXRhOiBDb25maWd1cmF0aW9uLCcgK1xyXG4gICAgICAgICAgICAncmVpbml0X3BhcnRpYWxfZWVwcm9tX2RhdGE6IENvbmZpZ3VyYXRpb25GbGFnLCcgK1xyXG4gICAgICAgICAgICAncmVxX3BhcnRpYWxfZWVwcm9tX2RhdGE6IENvbmZpZ3VyYXRpb25GbGFnLCcgK1xyXG4gICAgICAgICAgICAncmVxX2NhcmRfcmVjb3JkaW5nX3N0YXRlOiB2b2lkLCcgK1xyXG4gICAgICAgICAgICAnc2V0X3BhcnRpYWxfdGVtcG9yYXJ5X2NvbmZpZzogQ29uZmlndXJhdGlvbiwnICtcclxuICAgICAgICAgICAgJ3NldF9jb21tYW5kX3NvdXJjZXM6IHsvOC8gc2VyaWFsOiB2b2lkLCByYWRpbzogdm9pZCB9LCcgK1xyXG4gICAgICAgICAgICAnc2V0X2NhbGlicmF0aW9uOiB7IGVuYWJsZWQ6IGJvb2wsIG1vZGU6IHU4IH0sJyArXHJcbiAgICAgICAgICAgICdzZXRfYXV0b3BpbG90X2VuYWJsZWQ6IGJvb2wsJyArXHJcbiAgICAgICAgICAgICdzZXRfdXNiX21vZGU6IHU4fTsnO1xyXG5cclxuICAgICAgICB2YXIgZGVidWdTdHJpbmcgPSBcIkRlYnVnU3RyaW5nID0geyBkZXByZWNhdGVkX21hc2s6IHUzMiwgbWVzc2FnZTogcyB9O1wiO1xyXG4gICAgICAgIHZhciBoaXN0b3J5RGF0YSA9IFwiSGlzdG9yeURhdGEgPSBEZWJ1Z1N0cmluZztcIjtcclxuICAgICAgICB2YXIgcmVzcG9uc2UgPSBcIlJlc3BvbnNlID0geyBtYXNrOiB1MzIsIGFjazogdTMyIH07XCI7XHJcbiAgICAgICAgdmFyIHByb3RvY29sID0gXCJQcm90b2NvbEluZm8gPSB7IHZlcnNpb246IFZlcnNpb24sIHN0cnVjdHVyZTogcyB9O1wiICtcclxuICAgICAgICAgICAgXCJQcm90b2NvbCA9IHsvMzIvIHJlcXVlc3Q6IHZvaWQsIHJlc3BvbnNlOiBQcm90b2NvbEluZm8gfTtcIjtcclxuXHJcbiAgICAgICAgdmFyIGhhbmRsZXIxNCA9IGNvbmZpZ0Z1bGwxNCArIHN0YXRlICsgY29tbWFuZHMgKyBkZWJ1Z1N0cmluZyArIGhpc3RvcnlEYXRhICsgcmVzcG9uc2UgKyBwcm90b2NvbDtcclxuICAgICAgICB2YXIgaGFuZGxlcjE1ID0gY29uZmlnRnVsbDE1ICsgc3RhdGUgKyBjb21tYW5kcyArIGRlYnVnU3RyaW5nICsgaGlzdG9yeURhdGEgKyByZXNwb25zZSArIHByb3RvY29sO1xyXG4gICAgICAgIHZhciBoYW5kbGVyMTYgPSBjb25maWdGdWxsMTYgKyBzdGF0ZSArIGNvbW1hbmRzICsgZGVidWdTdHJpbmcgKyBoaXN0b3J5RGF0YSArIHJlc3BvbnNlICsgcHJvdG9jb2w7XHJcblxyXG4gICAgICAgIGhhbmRsZXJDYWNoZVsnMS40LjAnXSA9IEZseWJyaXhTZXJpYWxpemF0aW9uLnBhcnNlKGhhbmRsZXIxNCk7XHJcbiAgICAgICAgaGFuZGxlckNhY2hlWycxLjUuMCddID0gaGFuZGxlckNhY2hlWycxLjUuMSddID0gRmx5YnJpeFNlcmlhbGl6YXRpb24ucGFyc2UoaGFuZGxlcjE1KTtcclxuICAgICAgICBoYW5kbGVyQ2FjaGVbJzEuNi4wJ10gPSBGbHlicml4U2VyaWFsaXphdGlvbi5wYXJzZShoYW5kbGVyMTYpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVGaWVsZHModGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgICAgICAgICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRmllbGRzQXJyYXkodGFyZ2V0LCBzb3VyY2UpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUZpZWxkc09iamVjdCh0YXJnZXQsIHNvdXJjZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNvdXJjZSA9PT0gbnVsbCB8fCBzb3VyY2UgPT09IHVuZGVmaW5lZCkgPyB0YXJnZXQgOiBzb3VyY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUZpZWxkc09iamVjdCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRhcmdldCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IHVwZGF0ZUZpZWxkcyh0YXJnZXRba2V5XSwgc291cmNlW2tleV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gcmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB1cGRhdGVGaWVsZHModGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVGaWVsZHNBcnJheSh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gTWF0aC5tYXgodGFyZ2V0Lmxlbmd0aCwgc291cmNlLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godXBkYXRlRmllbGRzKHRhcmdldFtpZHhdLCBzb3VyY2VbaWR4XSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBTZXJpYWxpemVyOiBGbHlicml4U2VyaWFsaXphdGlvbi5TZXJpYWxpemVyLFxyXG4gICAgICAgICAgICBnZXRIYW5kbGVyOiBmdW5jdGlvbiAoZmlybXdhcmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyQ2FjaGVbZmlybXdhcmVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZGRIYW5kbGVyOiBmdW5jdGlvbiAodmVyc2lvbiwgc3RydWN0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmVyc2lvblN0cmluZyA9IHZlcnNpb24ubWFqb3IudG9TdHJpbmcoKSArICcuJyArIHZlcnNpb24ubWlub3IudG9TdHJpbmcoKSArIHZlcnNpb24ucGF0Y2gudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXJDYWNoZVt2ZXJzaW9uU3RyaW5nXSA9IEZseWJyaXhTZXJpYWxpemF0aW9uLnBhcnNlKHN0cnVjdHVyZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHVwZGF0ZUZpZWxkczogdXBkYXRlRmllbGRzLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59KCkpO1xyXG4iXX0=
